import{createElementBlock as Z,openBlock as R,createBaseVNode as se,withDirectives as Xe,renderSlot as Le,normalizeStyle as Qe,normalizeClass as H,vShow as ot,nextTick as St,createBlock as Fe,createVNode as k,withCtx as Ue,mergeProps as yr,withModifiers as Be,Transition as bn,Teleport as Wa,getCurrentInstance as He,resolveComponent as mt,createCommentVNode as ue,Fragment as gn,renderList as Fl,createTextVNode as Wt,toDisplayString as qe,vModelText as Hu,withKeys as Ft,resolveDirective as Ku,h as Ne,resolveDynamicComponent as Zu,vModelCheckbox as Gu,TransitionGroup as Yu,createApp as mi,call as gt,defineComponent as xs,shallowRef as Te,off as wo,on as xo,isArray as Ju,hasOwn as Qu,isPlainObject as Bl,Awaiter as os,download as Zs,EXT_REG as Xn,getFileExt as gi}from"./index-DkGBVHu-.js";const Ha=Symbol.for("yaml.alias"),Sa=Symbol.for("yaml.document"),yn=Symbol.for("yaml.map"),zl=Symbol.for("yaml.pair"),Ht=Symbol.for("yaml.scalar"),ks=Symbol.for("yaml.seq"),Ct=Symbol.for("yaml.node.type"),zn=t=>!!t&&typeof t=="object"&&t[Ct]===Ha,Un=t=>!!t&&typeof t=="object"&&t[Ct]===Sa,Ss=t=>!!t&&typeof t=="object"&&t[Ct]===yn,Me=t=>!!t&&typeof t=="object"&&t[Ct]===zl,Ee=t=>!!t&&typeof t=="object"&&t[Ct]===Ht,_s=t=>!!t&&typeof t=="object"&&t[Ct]===ks;function Re(t){if(t&&typeof t=="object")switch(t[Ct]){case yn:case ks:return!0}return!1}function De(t){if(t&&typeof t=="object")switch(t[Ct]){case Ha:case yn:case Ht:case ks:return!0}return!1}const Xu=t=>(Ee(t)||Re(t))&&!!t.anchor,ut=Symbol("break visit"),Ul=Symbol("skip children"),zt=Symbol("remove node");function vn(t,e){const n=ql(e);Un(t)?es(null,t.contents,n,Object.freeze([t]))===zt&&(t.contents=null):es(null,t,n,Object.freeze([]))}vn.BREAK=ut;vn.SKIP=Ul;vn.REMOVE=zt;function es(t,e,n,s){const i=Wl(t,e,n,s);if(De(i)||Me(i))return Hl(t,s,i),es(t,i,n,s);if(typeof i!="symbol"){if(Re(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=es(r,e.items[r],n,s);if(typeof a=="number")r=a-1;else{if(a===ut)return ut;a===zt&&(e.items.splice(r,1),r-=1)}}}else if(Me(e)){s=Object.freeze(s.concat(e));const r=es("key",e.key,n,s);if(r===ut)return ut;r===zt&&(e.key=null);const a=es("value",e.value,n,s);if(a===ut)return ut;a===zt&&(e.value=null)}}return i}async function br(t,e){const n=ql(e);Un(t)?await ts(null,t.contents,n,Object.freeze([t]))===zt&&(t.contents=null):await ts(null,t,n,Object.freeze([]))}br.BREAK=ut;br.SKIP=Ul;br.REMOVE=zt;async function ts(t,e,n,s){const i=await Wl(t,e,n,s);if(De(i)||Me(i))return Hl(t,s,i),ts(t,i,n,s);if(typeof i!="symbol"){if(Re(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=await ts(r,e.items[r],n,s);if(typeof a=="number")r=a-1;else{if(a===ut)return ut;a===zt&&(e.items.splice(r,1),r-=1)}}}else if(Me(e)){s=Object.freeze(s.concat(e));const r=await ts("key",e.key,n,s);if(r===ut)return ut;r===zt&&(e.key=null);const a=await ts("value",e.value,n,s);if(a===ut)return ut;a===zt&&(e.value=null)}}return i}function ql(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Wl(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(Ss(e))return n.Map?.(t,e,s);if(_s(e))return n.Seq?.(t,e,s);if(Me(e))return n.Pair?.(t,e,s);if(Ee(e))return n.Scalar?.(t,e,s);if(zn(e))return n.Alias?.(t,e,s)}function Hl(t,e,n){const s=e[e.length-1];if(Re(s))s.items[t]=n;else if(Me(s))t==="key"?s.key=n:s.value=n;else if(Un(s))s.contents=n;else{const i=zn(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const ef={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},tf=t=>t.replace(/[!,[\]{}]/g,e=>ef[e]);class at{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},at.defaultYaml,e),this.tags=Object.assign({},at.defaultTags,n)}clone(){const e=new at(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new at(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:at.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},at.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:at.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},at.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),i=s.shift();switch(i){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[r,a]=s;return this.tags[r]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[r]=s;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const a=/^\d+\.\d+$/.test(r);return n(6,`Unsupported YAML version ${r}`,a),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),a)}const[,s,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const r=this.tags[s];if(r)try{return r+decodeURIComponent(i)}catch(a){return n(String(a)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+tf(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let i;if(e&&s.length>0&&De(e.contents)){const r={};vn(e.contents,(a,o)=>{De(o)&&o.tag&&(r[o.tag]=!0)}),i=Object.keys(r)}else i=[];for(const[r,a]of s)r==="!!"&&a==="tag:yaml.org,2002:"||(!e||i.some(o=>o.startsWith(a)))&&n.push(`%TAG ${r} ${a}`);return n.join(`
`)}}at.defaultYaml={explicit:!1,version:"1.2"};at.defaultTags={"!!":"tag:yaml.org,2002:"};function Kl(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Zl(t){const e=new Set;return vn(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function Gl(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function nf(t,e){const n=[],s=new Map;let i=null;return{onAnchor:r=>{n.push(r),i||(i=Zl(t));const a=Gl(e,i);return i.add(a),a},setAnchors:()=>{for(const r of n){const a=s.get(r);if(typeof a=="object"&&a.anchor&&(Ee(a.node)||Re(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=r,o}}},sourceObjects:s}}function ns(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let i=0,r=s.length;i<r;++i){const a=s[i],o=ns(t,s,String(i),a);o===void 0?delete s[i]:o!==a&&(s[i]=o)}else if(s instanceof Map)for(const i of Array.from(s.keys())){const r=s.get(i),a=ns(t,s,i,r);a===void 0?s.delete(i):a!==r&&s.set(i,a)}else if(s instanceof Set)for(const i of Array.from(s)){const r=ns(t,s,i,i);r===void 0?s.delete(i):r!==i&&(s.delete(i),s.add(r))}else for(const[i,r]of Object.entries(s)){const a=ns(t,s,i,r);a===void 0?delete s[i]:a!==r&&(s[i]=a)}return t.call(e,n,s)}function _t(t,e,n){if(Array.isArray(t))return t.map((s,i)=>_t(s,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!Xu(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=r=>{s.res=r,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!n?.keep?Number(t):t}class Ka{constructor(e){Object.defineProperty(this,Ct,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:i,reviver:r}={}){if(!Un(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},o=_t(this,"",a);if(typeof i=="function")for(const{count:c,res:l}of a.anchors.values())i(l,c);return typeof r=="function"?ns(r,{"":o},"",o):o}}class vr extends Ka{constructor(e){super(Ha),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return vn(e,{Node:(s,i)=>{if(i===this)return vn.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:i,maxAliasCount:r}=n,a=this.resolve(i);if(!a){const c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let o=s.get(a);if(o||(_t(a,null,n),o=s.get(a)),!o||o.res===void 0){const c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=Bi(i,a,s)),o.count*o.aliasCount>r)){const c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return o.res}toString(e,n,s){const i=`*${this.source}`;if(e){if(Kl(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${i} `}return i}}function Bi(t,e,n){if(zn(e)){const s=e.resolve(t),i=n&&s&&n.get(s);return i?i.count*i.aliasCount:0}else if(Re(e)){let s=0;for(const i of e.items){const r=Bi(t,i,n);r>s&&(s=r)}return s}else if(Me(e)){const s=Bi(t,e.key,n),i=Bi(t,e.value,n);return Math.max(s,i)}return 1}const Yl=t=>!t||typeof t!="function"&&typeof t!="object";class ce extends Ka{constructor(e){super(Ht),this.value=e}toJSON(e,n){return n?.keep?this.value:_t(this.value,e,n)}toString(){return String(this.value)}}ce.BLOCK_FOLDED="BLOCK_FOLDED";ce.BLOCK_LITERAL="BLOCK_LITERAL";ce.PLAIN="PLAIN";ce.QUOTE_DOUBLE="QUOTE_DOUBLE";ce.QUOTE_SINGLE="QUOTE_SINGLE";const sf="tag:yaml.org,2002:";function rf(t,e,n){if(e){const s=n.filter(r=>r.tag===e),i=s.find(r=>!r.format)??s[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(s=>s.identify?.(t)&&!s.format)}function Gs(t,e,n){if(Un(t)&&(t=t.contents),De(t))return t;if(Me(t)){const f=n.schema[yn].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:i,onTagObj:r,schema:a,sourceObjects:o}=n;let c;if(s&&t&&typeof t=="object"){if(c=o.get(t),c)return c.anchor||(c.anchor=i(t)),new vr(c.anchor);c={anchor:null,node:null},o.set(t,c)}e?.startsWith("!!")&&(e=sf+e.slice(2));let l=rf(t,e,a.tags);if(!l){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new ce(t);return c&&(c.node=f),f}l=t instanceof Map?a[yn]:Symbol.iterator in Object(t)?a[ks]:a[yn]}r&&(r(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,t,n):typeof l?.nodeClass?.from=="function"?l.nodeClass.from(n.schema,t,n):new ce(t);return e?u.tag=e:l.default||(u.tag=l.tag),c&&(c.node=u),u}function Xi(t,e,n){let s=n;for(let i=e.length-1;i>=0;--i){const r=e[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const a=[];a[r]=s,s=a}else s=new Map([[r,s]])}return Gs(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Ds=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Jl extends Ka{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>De(s)||Me(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Ds(e))this.add(n);else{const[s,...i]=e,r=this.get(s,!0);if(Re(r))r.addIn(i,n);else if(r===void 0&&this.schema)this.set(s,Xi(this.schema,i,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const i=this.get(n,!0);if(Re(i))return i.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...i]=e,r=this.get(s,!0);return i.length===0?!n&&Ee(r)?r.value:r:Re(r)?r.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Me(n))return!1;const s=n.value;return s==null||e&&Ee(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const i=this.get(n,!0);return Re(i)?i.hasIn(s):!1}setIn(e,n){const[s,...i]=e;if(i.length===0)this.set(s,n);else{const r=this.get(s,!0);if(Re(r))r.setIn(i,n);else if(r===void 0&&this.schema)this.set(s,Xi(this.schema,i,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}}const af=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function nn(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const An=(t,e,n)=>t.endsWith(`
`)?nn(n,e):n.includes(`
`)?`
`+nn(n,e):(t.endsWith(" ")?"":" ")+n,Ql="flow",_a="block",zi="quoted";function wr(t,e,n="flow",{indentAtStart:s,lineWidth:i=80,minContentWidth:r=20,onFold:a,onOverflow:o}={}){if(!i||i<0)return t;i<r&&(r=0);const c=Math.max(1+r,1+i-e.length);if(t.length<=c)return t;const l=[],u={};let f=i-e.length;typeof s=="number"&&(s>i-Math.max(2,r)?l.push(0):f=i-s);let h,m,v=!1,d=-1,b=-1,E=-1;n===_a&&(d=ko(t,d,e.length),d!==-1&&(f=d+c));for(let A;A=t[d+=1];){if(n===zi&&A==="\\"){switch(b=d,t[d+1]){case"x":d+=3;break;case"u":d+=5;break;case"U":d+=9;break;default:d+=1}E=d}if(A===`
`)n===_a&&(d=ko(t,d,e.length)),f=d+e.length+c,h=void 0;else{if(A===" "&&m&&m!==" "&&m!==`
`&&m!=="	"){const $=t[d+1];$&&$!==" "&&$!==`
`&&$!=="	"&&(h=d)}if(d>=f)if(h)l.push(h),f=h+c,h=void 0;else if(n===zi){for(;m===" "||m==="	";)m=A,A=t[d+=1],v=!0;const $=d>E+1?d-2:b-1;if(u[$])return t;l.push($),u[$]=!0,f=$+c,h=void 0}else v=!0}m=A}if(v&&o&&o(),l.length===0)return t;a&&a();let T=t.slice(0,l[0]);for(let A=0;A<l.length;++A){const $=l[A],y=l[A+1]||t.length;$===0?T=`
${e}${t.slice(0,y)}`:(n===zi&&u[$]&&(T+=`${t[$]}\\`),T+=`
${e}${t.slice($+1,y)}`)}return T}function ko(t,e,n){let s=e,i=e+1,r=t[i];for(;r===" "||r==="	";)if(e<i+n)r=t[++e];else{do r=t[++e];while(r&&r!==`
`);s=e,i=e+1,r=t[i]}return s}const xr=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),kr=t=>/^(%|---|\.\.\.)/m.test(t);function of(t,e,n){if(!e||e<0)return!1;const s=e-n,i=t.length;if(i<=s)return!1;for(let r=0,a=0;r<i;++r)if(t[r]===`
`){if(r-a>s)return!0;if(a=r+1,i-a<=s)return!1}return!0}function qs(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(kr(t)?"  ":"");let a="",o=0;for(let c=0,l=n[c];l;l=n[++c])if(l===" "&&n[c+1]==="\\"&&n[c+2]==="n"&&(a+=n.slice(o,c)+"\\ ",c+=1,o=c,l="\\"),l==="\\")switch(n[c+1]){case"u":{a+=n.slice(o,c);const u=n.substr(c+2,4);switch(u){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:u.substr(0,2)==="00"?a+="\\x"+u.substr(2):a+=n.substr(c,6)}c+=5,o=c+1}break;case"n":if(s||n[c+2]==='"'||n.length<i)c+=1;else{for(a+=n.slice(o,c)+`

`;n[c+2]==="\\"&&n[c+3]==="n"&&n[c+4]!=='"';)a+=`
`,c+=2;a+=r,n[c+2]===" "&&(a+="\\"),c+=1,o=c+1}break;default:c+=1}return a=o?a+n.slice(o):n,s?a:wr(a,r,zi,xr(e,!1))}function Ca(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return qs(t,e);const n=e.indent||(kr(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:wr(s,n,Ql,xr(e,!1))}function ss(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=qs;else{const i=t.includes('"'),r=t.includes("'");i&&!r?s=Ca:r&&!i?s=qs:s=n?Ca:qs}return s(t,e)}let Ia;try{Ia=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Ia=/\n+(?!\n|$)/g}function Ui({comment:t,type:e,value:n},s,i,r){const{blockQuote:a,commentString:o,lineWidth:c}=s.options;if(!a||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return ss(n,s);const l=s.indent||(s.forceBlockIndent||kr(n)?"  ":""),u=a==="literal"?!0:a==="folded"||e===ce.BLOCK_FOLDED?!1:e===ce.BLOCK_LITERAL?!0:!of(n,c,l.length);if(!n)return u?`|
`:`>
`;let f,h;for(h=n.length;h>0;--h){const y=n[h-1];if(y!==`
`&&y!=="	"&&y!==" ")break}let m=n.substring(h);const v=m.indexOf(`
`);v===-1?f="-":n===m||v!==m.length-1?(f="+",r&&r()):f="",m&&(n=n.slice(0,-m.length),m[m.length-1]===`
`&&(m=m.slice(0,-1)),m=m.replace(Ia,`$&${l}`));let d=!1,b,E=-1;for(b=0;b<n.length;++b){const y=n[b];if(y===" ")d=!0;else if(y===`
`)E=b;else break}let T=n.substring(0,E<b?E+1:b);T&&(n=n.substring(T.length),T=T.replace(/\n+/g,`$&${l}`));let $=(d?l?"2":"1":"")+f;if(t&&($+=" "+o(t.replace(/ ?[\r\n]+/g," ")),i&&i()),!u){const y=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let g=!1;const C=xr(s,!0);a!=="folded"&&e!==ce.BLOCK_FOLDED&&(C.onOverflow=()=>{g=!0});const _=wr(`${T}${y}${m}`,l,_a,C);if(!g)return`>${$}
${l}${_}`}return n=n.replace(/\n+/g,`$&${l}`),`|${$}
${l}${T}${n}${m}`}function lf(t,e,n,s){const{type:i,value:r}=t,{actualString:a,implicitKey:o,indent:c,indentStep:l,inFlow:u}=e;if(o&&r.includes(`
`)||u&&/[[\]{},]/.test(r))return ss(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return o||u||!r.includes(`
`)?ss(r,e):Ui(t,e,n,s);if(!o&&!u&&i!==ce.PLAIN&&r.includes(`
`))return Ui(t,e,n,s);if(kr(r)){if(c==="")return e.forceBlockIndent=!0,Ui(t,e,n,s);if(o&&c===l)return ss(r,e)}const f=r.replace(/\n+/g,`$&
${c}`);if(a){const h=d=>d.default&&d.tag!=="tag:yaml.org,2002:str"&&d.test?.test(f),{compat:m,tags:v}=e.doc.schema;if(v.some(h)||m?.some(h))return ss(r,e)}return o?f:wr(f,c,Ql,xr(e,!1))}function yi(t,e,n,s){const{implicitKey:i,inFlow:r}=e,a=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:o}=t;o!==ce.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=ce.QUOTE_DOUBLE);const c=u=>{switch(u){case ce.BLOCK_FOLDED:case ce.BLOCK_LITERAL:return i||r?ss(a.value,e):Ui(a,e,n,s);case ce.QUOTE_DOUBLE:return qs(a.value,e);case ce.QUOTE_SINGLE:return Ca(a.value,e);case ce.PLAIN:return lf(a,e,n,s);default:return null}};let l=c(o);if(l===null){const{defaultKeyType:u,defaultStringType:f}=e.options,h=i&&u||f;if(l=c(h),l===null)throw new Error(`Unsupported default string type ${h}`)}return l}function Xl(t,e){const n=Object.assign({blockQuote:!0,commentString:af,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function cf(t,e){if(e.tag){const i=t.filter(r=>r.tag===e.tag);if(i.length>0)return i.find(r=>r.format===e.format)??i[0]}let n,s;if(Ee(e)){s=e.value;let i=t.filter(r=>r.identify?.(s));if(i.length>1){const r=i.filter(a=>a.test);r.length>0&&(i=r)}n=i.find(r=>r.format===e.format)??i.find(r=>!r.format)}else s=e,n=t.find(i=>i.nodeClass&&s instanceof i.nodeClass);if(!n){const i=s?.constructor?.name??typeof s;throw new Error(`Tag not resolved for ${i} value`)}return n}function uf(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const i=[],r=(Ee(t)||Re(t))&&t.anchor;r&&Kl(r)&&(n.add(r),i.push(`&${r}`));const a=t.tag?t.tag:e.default?null:e.tag;return a&&i.push(s.directives.tagString(a)),i.join(" ")}function ps(t,e,n,s){if(Me(t))return t.toString(e,n,s);if(zn(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const r=De(t)?t:e.doc.createNode(t,{onTagObj:c=>i=c});i||(i=cf(e.doc.schema.tags,r));const a=uf(r,i,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const o=typeof i.stringify=="function"?i.stringify(r,e,n,s):Ee(r)?yi(r,e,n,s):r.toString(e,n,s);return a?Ee(r)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${e.indent}${o}`:o}function ff({key:t,value:e},n,s,i){const{allNullValues:r,doc:a,indent:o,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:f}}=n;let h=De(t)&&t.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Re(t)||!De(t)&&typeof t=="object"){const C="With simple keys, collection cannot be used as a key value";throw new Error(C)}}let m=!f&&(!t||h&&e==null&&!n.inFlow||Re(t)||(Ee(t)?t.type===ce.BLOCK_FOLDED||t.type===ce.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!m&&(f||!r),indent:o+c});let v=!1,d=!1,b=ps(t,n,()=>v=!0,()=>d=!0);if(!m&&!n.inFlow&&b.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");m=!0}if(n.inFlow){if(r||e==null)return v&&s&&s(),b===""?"?":m?`? ${b}`:b}else if(r&&!f||e==null&&m)return b=`? ${b}`,h&&!v?b+=An(b,n.indent,l(h)):d&&i&&i(),b;v&&(h=null),m?(h&&(b+=An(b,n.indent,l(h))),b=`? ${b}
${o}:`):(b=`${b}:`,h&&(b+=An(b,n.indent,l(h))));let E,T,A;De(e)?(E=!!e.spaceBefore,T=e.commentBefore,A=e.comment):(E=!1,T=null,A=null,e&&typeof e=="object"&&(e=a.createNode(e))),n.implicitKey=!1,!m&&!h&&Ee(e)&&(n.indentAtStart=b.length+1),d=!1,!u&&c.length>=2&&!n.inFlow&&!m&&_s(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let $=!1;const y=ps(e,n,()=>$=!0,()=>d=!0);let g=" ";if(h||E||T){if(g=E?`
`:"",T){const C=l(T);g+=`
${nn(C,n.indent)}`}y===""&&!n.inFlow?g===`
`&&(g=`

`):g+=`
${n.indent}`}else if(!m&&Re(e)){const C=y[0],_=y.indexOf(`
`),x=_!==-1,O=n.inFlow??e.flow??e.items.length===0;if(x||!O){let N=!1;if(x&&(C==="&"||C==="!")){let W=y.indexOf(" ");C==="&"&&W!==-1&&W<_&&y[W+1]==="!"&&(W=y.indexOf(" ",W+1)),(W===-1||_<W)&&(N=!0)}N||(g=`
${n.indent}`)}}else(y===""||y[0]===`
`)&&(g="");return b+=g+y,n.inFlow?$&&s&&s():A&&!$?b+=An(b,n.indent,l(A)):d&&i&&i(),b}function ec(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Ai="<<",sn={identify:t=>t===Ai||typeof t=="symbol"&&t.description===Ai,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ce(Symbol(Ai)),{addToJSMap:tc}),stringify:()=>Ai},df=(t,e)=>(sn.identify(e)||Ee(e)&&(!e.type||e.type===ce.PLAIN)&&sn.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===sn.tag&&n.default);function tc(t,e,n){if(n=t&&zn(n)?n.resolve(t.doc):n,_s(n))for(const s of n.items)Vr(t,e,s);else if(Array.isArray(n))for(const s of n)Vr(t,e,s);else Vr(t,e,n)}function Vr(t,e,n){const s=t&&zn(n)?n.resolve(t.doc):n;if(!Ss(s))throw new Error("Merge sources must be maps or map aliases");const i=s.toJSON(null,t,Map);for(const[r,a]of i)e instanceof Map?e.has(r)||e.set(r,a):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function nc(t,e,{key:n,value:s}){if(De(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(df(t,n))tc(t,e,s);else{const i=_t(n,"",t);if(e instanceof Map)e.set(i,_t(s,i,t));else if(e instanceof Set)e.add(i);else{const r=hf(n,i,t),a=_t(s,r,t);r in e?Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[r]=a}}return e}function hf(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(De(t)&&n?.doc){const s=Xl(n.doc,{});s.anchors=new Set;for(const r of n.anchors.keys())s.anchors.add(r.anchor);s.inFlow=!0,s.inStringifyKey=!0;const i=t.toString(s);if(!n.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),ec(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function Za(t,e,n){const s=Gs(t,void 0,n),i=Gs(e,void 0,n);return new nt(s,i)}class nt{constructor(e,n=null){Object.defineProperty(this,Ct,{value:zl}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return De(n)&&(n=n.clone(e)),De(s)&&(s=s.clone(e)),new nt(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return nc(n,s,this)}toString(e,n,s){return e?.doc?ff(this,e,n,s):JSON.stringify(this)}}function sc(t,e,n){return(e.inFlow??t.flow?mf:pf)(t,e,n)}function pf({comment:t,items:e},n,{blockItemPrefix:s,flowChars:i,itemIndent:r,onChompKeep:a,onComment:o}){const{indent:c,options:{commentString:l}}=n,u=Object.assign({},n,{indent:r,type:null});let f=!1;const h=[];for(let v=0;v<e.length;++v){const d=e[v];let b=null;if(De(d))!f&&d.spaceBefore&&h.push(""),er(n,h,d.commentBefore,f),d.comment&&(b=d.comment);else if(Me(d)){const T=De(d.key)?d.key:null;T&&(!f&&T.spaceBefore&&h.push(""),er(n,h,T.commentBefore,f))}f=!1;let E=ps(d,u,()=>b=null,()=>f=!0);b&&(E+=An(E,r,l(b))),f&&b&&(f=!1),h.push(s+E)}let m;if(h.length===0)m=i.start+i.end;else{m=h[0];for(let v=1;v<h.length;++v){const d=h[v];m+=d?`
${c}${d}`:`
`}}return t?(m+=`
`+nn(l(t),c),o&&o()):f&&a&&a(),m}function mf({items:t},e,{flowChars:n,itemIndent:s}){const{indent:i,indentStep:r,flowCollectionPadding:a,options:{commentString:o}}=e;s+=r;const c=Object.assign({},e,{indent:s,inFlow:!0,type:null});let l=!1,u=0;const f=[];for(let v=0;v<t.length;++v){const d=t[v];let b=null;if(De(d))d.spaceBefore&&f.push(""),er(e,f,d.commentBefore,!1),d.comment&&(b=d.comment);else if(Me(d)){const T=De(d.key)?d.key:null;T&&(T.spaceBefore&&f.push(""),er(e,f,T.commentBefore,!1),T.comment&&(l=!0));const A=De(d.value)?d.value:null;A?(A.comment&&(b=A.comment),A.commentBefore&&(l=!0)):d.value==null&&T?.comment&&(b=T.comment)}b&&(l=!0);let E=ps(d,c,()=>b=null);v<t.length-1&&(E+=","),b&&(E+=An(E,s,o(b))),!l&&(f.length>u||E.includes(`
`))&&(l=!0),f.push(E),u=f.length}const{start:h,end:m}=n;if(f.length===0)return h+m;if(!l){const v=f.reduce((d,b)=>d+b.length+2,2);l=e.options.lineWidth>0&&v>e.options.lineWidth}if(l){let v=h;for(const d of f)v+=d?`
${r}${i}${d}`:`
`;return`${v}
${i}${m}`}else return`${h}${a}${f.join(" ")}${a}${m}`}function er({indent:t,options:{commentString:e}},n,s,i){if(s&&i&&(s=s.replace(/^\n+/,"")),s){const r=nn(e(s),t);n.push(r.trimStart())}}function Nn(t,e){const n=Ee(e)?e.value:e;for(const s of t)if(Me(s)&&(s.key===e||s.key===n||Ee(s.key)&&s.key.value===n))return s}class pt extends Jl{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(yn,e),this.items=[]}static from(e,n,s){const{keepUndefined:i,replacer:r}=s,a=new this(e),o=(c,l)=>{if(typeof r=="function")l=r.call(n,c,l);else if(Array.isArray(r)&&!r.includes(c))return;(l!==void 0||i)&&a.items.push(Za(c,l,s))};if(n instanceof Map)for(const[c,l]of n)o(c,l);else if(n&&typeof n=="object")for(const c of Object.keys(n))o(c,n[c]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,n){let s;Me(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new nt(e,e?.value):s=new nt(e.key,e.value);const i=Nn(this.items,s.key),r=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${s.key} already set`);Ee(i.value)&&Yl(s.value)?i.value.value=s.value:i.value=s.value}else if(r){const a=this.items.findIndex(o=>r(s,o)<0);a===-1?this.items.push(s):this.items.splice(a,0,s)}else this.items.push(s)}delete(e){const n=Nn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const i=Nn(this.items,e)?.value;return(!n&&Ee(i)?i.value:i)??void 0}has(e){return!!Nn(this.items,e)}set(e,n){this.add(new nt(e,n),!0)}toJSON(e,n,s){const i=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(const r of this.items)nc(n,i,r);return i}toString(e,n,s){if(!e)return JSON.stringify(this);for(const i of this.items)if(!Me(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),sc(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Cs={collection:"map",default:!0,nodeClass:pt,tag:"tag:yaml.org,2002:map",resolve(t,e){return Ss(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>pt.from(t,e,n)};class wn extends Jl{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(ks,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Ni(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Ni(e);if(typeof s!="number")return;const i=this.items[s];return!n&&Ee(i)?i.value:i}has(e){const n=Ni(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Ni(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[s];Ee(i)&&Yl(n)?i.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let i=0;for(const r of this.items)s.push(_t(r,String(i++),n));return s}toString(e,n,s){return e?sc(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:i}=s,r=new this(e);if(n&&Symbol.iterator in Object(n)){let a=0;for(let o of n){if(typeof i=="function"){const c=n instanceof Set?o:String(a++);o=i.call(n,c,o)}r.items.push(Gs(o,void 0,s))}}return r}}function Ni(t){let e=Ee(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Is={collection:"seq",default:!0,nodeClass:wn,tag:"tag:yaml.org,2002:seq",resolve(t,e){return _s(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>wn.from(t,e,n)},Sr={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),yi(t,e,n,s)}},_r={identify:t=>t==null,createNode:()=>new ce(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ce(null),stringify:({source:t},e)=>typeof t=="string"&&_r.test.test(t)?t:e.options.nullStr},Ga={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new ce(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Ga.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function Pt({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const i=typeof s=="number"?s:Number(s);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let a=r.indexOf(".");a<0&&(a=r.length,r+=".");let o=e-(r.length-a-1);for(;o-- >0;)r+="0"}return r}const ic={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Pt},rc={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Pt(t)}},ac={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new ce(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Pt},Cr=t=>typeof t=="bigint"||Number.isInteger(t),Ya=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function oc(t,e,n){const{value:s}=t;return Cr(s)&&s>=0?n+s.toString(e):Pt(t)}const lc={identify:t=>Cr(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Ya(t,2,8,n),stringify:t=>oc(t,8,"0o")},cc={identify:Cr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Ya(t,0,10,n),stringify:Pt},uc={identify:t=>Cr(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Ya(t,2,16,n),stringify:t=>oc(t,16,"0x")},gf=[Cs,Is,Sr,_r,Ga,lc,cc,uc,ic,rc,ac];function So(t){return typeof t=="bigint"||Number.isInteger(t)}const $i=({value:t})=>JSON.stringify(t),yf=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:$i},{identify:t=>t==null,createNode:()=>new ce(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:$i},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:$i},{identify:So,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>So(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:$i}],bf={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},vf=[Cs,Is].concat(yf,bf),Ja={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,i,r){if(!n)return"";const a=n;let o;if(typeof btoa=="function"){let c="";for(let l=0;l<a.length;++l)c+=String.fromCharCode(a[l]);o=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=ce.BLOCK_LITERAL),e!==ce.QUOTE_DOUBLE){const c=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),l=Math.ceil(o.length/c),u=new Array(l);for(let f=0,h=0;f<l;++f,h+=c)u[f]=o.substr(h,c);o=u.join(e===ce.BLOCK_LITERAL?`
`:" ")}return yi({comment:t,type:e,value:o},s,i,r)}};function fc(t,e){if(_s(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!Me(s)){if(Ss(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const i=s.items[0]||new nt(new ce(null));if(s.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${s.commentBefore}
${i.key.commentBefore}`:s.commentBefore),s.comment){const r=i.value??i.key;r.comment=r.comment?`${s.comment}
${r.comment}`:s.comment}s=i}t.items[n]=Me(s)?s:new nt(s)}}else e("Expected a sequence for this tag");return t}function dc(t,e,n){const{replacer:s}=n,i=new wn(t);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof s=="function"&&(a=s.call(e,String(r++),a));let o,c;if(Array.isArray(a))if(a.length===2)o=a[0],c=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const l=Object.keys(a);if(l.length===1)o=l[0],c=a[o];else throw new TypeError(`Expected tuple with one key, not ${l.length} keys`)}else o=a;i.items.push(Za(o,c,n))}return i}const Qa={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:fc,createNode:dc};class ls extends wn{constructor(){super(),this.add=pt.prototype.add.bind(this),this.delete=pt.prototype.delete.bind(this),this.get=pt.prototype.get.bind(this),this.has=pt.prototype.has.bind(this),this.set=pt.prototype.set.bind(this),this.tag=ls.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const i of this.items){let r,a;if(Me(i)?(r=_t(i.key,"",n),a=_t(i.value,r,n)):r=_t(i,"",n),s.has(r))throw new Error("Ordered maps must not include duplicate keys");s.set(r,a)}return s}static from(e,n,s){const i=dc(e,n,s),r=new this;return r.items=i.items,r}}ls.tag="tag:yaml.org,2002:omap";const Xa={collection:"seq",identify:t=>t instanceof Map,nodeClass:ls,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=fc(t,e),s=[];for(const{key:i}of n.items)Ee(i)&&(s.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):s.push(i.value));return Object.assign(new ls,n)},createNode:(t,e,n)=>ls.from(t,e,n)};function hc({value:t,source:e},n){return e&&(t?pc:mc).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const pc={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ce(!0),stringify:hc},mc={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ce(!1),stringify:hc},wf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Pt},xf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Pt(t)}},kf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new ce(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Pt},bi=t=>typeof t=="bigint"||Number.isInteger(t);function Ir(t,e,n,{intAsBigInt:s}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const a=BigInt(t);return i==="-"?BigInt(-1)*a:a}const r=parseInt(t,n);return i==="-"?-1*r:r}function eo(t,e,n){const{value:s}=t;if(bi(s)){const i=s.toString(e);return s<0?"-"+n+i.substr(1):n+i}return Pt(t)}const Sf={identify:bi,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Ir(t,2,2,n),stringify:t=>eo(t,2,"0b")},_f={identify:bi,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Ir(t,1,8,n),stringify:t=>eo(t,8,"0")},Cf={identify:bi,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Ir(t,0,10,n),stringify:Pt},If={identify:bi,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Ir(t,2,16,n),stringify:t=>eo(t,16,"0x")};class cs extends pt{constructor(e){super(e),this.tag=cs.tag}add(e){let n;Me(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new nt(e.key,null):n=new nt(e,null),Nn(this.items,n.key)||this.items.push(n)}get(e,n){const s=Nn(this.items,e);return!n&&Me(s)?Ee(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Nn(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new nt(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:i}=s,r=new this(e);if(n&&Symbol.iterator in Object(n))for(let a of n)typeof i=="function"&&(a=i.call(n,a,a)),r.items.push(Za(a,null,s));return r}}cs.tag="tag:yaml.org,2002:set";const to={collection:"map",identify:t=>t instanceof Set,nodeClass:cs,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>cs.from(t,e,n),resolve(t,e){if(Ss(t)){if(t.hasAllNullValues(!0))return Object.assign(new cs,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function no(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,i=a=>e?BigInt(a):Number(a),r=s.replace(/_/g,"").split(":").reduce((a,o)=>a*i(60)+i(o),i(0));return n==="-"?i(-1)*r:r}function gc(t){let{value:e}=t,n=a=>a;if(typeof e=="bigint")n=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return Pt(t);let s="";e<0&&(s="-",e*=n(-1));const i=n(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),s+r.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const yc={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>no(t,n),stringify:gc},bc={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>no(t,!1),stringify:gc},Or={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Or.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,i,r,a,o]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(n,s-1,i,r||0,a||0,o||0,c);const u=e[8];if(u&&u!=="Z"){let f=no(u,!1);Math.abs(f)<30&&(f*=60),l-=6e4*f}return new Date(l)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},_o=[Cs,Is,Sr,_r,pc,mc,Sf,_f,Cf,If,wf,xf,kf,Ja,sn,Xa,Qa,to,yc,bc,Or],Co=new Map([["core",gf],["failsafe",[Cs,Is,Sr]],["json",vf],["yaml11",_o],["yaml-1.1",_o]]),Io={binary:Ja,bool:Ga,float:ac,floatExp:rc,floatNaN:ic,floatTime:bc,int:cc,intHex:uc,intOct:lc,intTime:yc,map:Cs,merge:sn,null:_r,omap:Xa,pairs:Qa,seq:Is,set:to,timestamp:Or},Of={"tag:yaml.org,2002:binary":Ja,"tag:yaml.org,2002:merge":sn,"tag:yaml.org,2002:omap":Xa,"tag:yaml.org,2002:pairs":Qa,"tag:yaml.org,2002:set":to,"tag:yaml.org,2002:timestamp":Or};function Fr(t,e,n){const s=Co.get(e);if(s&&!t)return n&&!s.includes(sn)?s.concat(sn):s.slice();let i=s;if(!i)if(Array.isArray(t))i=[];else{const r=Array.from(Co.keys()).filter(a=>a!=="yaml11").map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(const r of t)i=i.concat(r);else typeof t=="function"&&(i=t(i.slice()));return n&&(i=i.concat(sn)),i.reduce((r,a)=>{const o=typeof a=="string"?Io[a]:a;if(!o){const c=JSON.stringify(a),l=Object.keys(Io).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${c}; use one of ${l}`)}return r.includes(o)||r.push(o),r},[])}const Tf=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Tr{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:i,schema:r,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(e)?Fr(e,"compat"):e?Fr(null,e):null,this.name=typeof r=="string"&&r||"core",this.knownTags=i?Of:{},this.tags=Fr(n,this.name,s),this.toStringOptions=o??null,Object.defineProperty(this,yn,{value:Cs}),Object.defineProperty(this,Ht,{value:Sr}),Object.defineProperty(this,ks,{value:Is}),this.sortMapEntries=typeof a=="function"?a:a===!0?Tf:null}clone(){const e=Object.create(Tr.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Ef(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const c=t.directives.toString(t);c?(n.push(c),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const i=Xl(t,e),{commentString:r}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const c=r(t.commentBefore);n.unshift(nn(c,""))}let a=!1,o=null;if(t.contents){if(De(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const u=r(t.contents.commentBefore);n.push(nn(u,""))}i.forceBlockIndent=!!t.comment,o=t.contents.comment}const c=o?void 0:()=>a=!0;let l=ps(t.contents,i,()=>o=null,c);o&&(l+=An(l,"",r(o))),(l[0]==="|"||l[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${l}`:n.push(l)}else n.push(ps(t.contents,i));if(t.directives?.docEnd)if(t.comment){const c=r(t.comment);c.includes(`
`)?(n.push("..."),n.push(nn(c,""))):n.push(`... ${c}`)}else n.push("...");else{let c=t.comment;c&&a&&(c=c.replace(/^\n+/,"")),c&&((!a||o)&&n[n.length-1]!==""&&n.push(""),n.push(nn(r(c),"")))}return n.join(`
`)+`
`}class Os{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Ct,{value:Sa});let i=null;typeof n=="function"||Array.isArray(n)?i=n:s===void 0&&n&&(s=n,n=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=r;let{version:a}=r;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new at({version:a}),this.setSchema(a,s),this.contents=e===void 0?null:this.createNode(e,i,s)}clone(){const e=Object.create(Os.prototype,{[Ct]:{value:Sa}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=De(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Kn(this.contents)&&this.contents.add(e)}addIn(e,n){Kn(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=Zl(this);e.anchor=!n||s.has(n)?Gl(n||"a",s):n}return new vr(e.anchor)}createNode(e,n,s){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const b=T=>typeof T=="number"||T instanceof String||T instanceof Number,E=n.filter(b).map(String);E.length>0&&(n=n.concat(E)),i=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:r,anchorPrefix:a,flow:o,keepUndefined:c,onTagObj:l,tag:u}=s??{},{onAnchor:f,setAnchors:h,sourceObjects:m}=nf(this,a||"a"),v={aliasDuplicateObjects:r??!0,keepUndefined:c??!1,onAnchor:f,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:m},d=Gs(e,u,v);return o&&Re(d)&&(d.flow=!0),h(),d}createPair(e,n,s={}){const i=this.createNode(e,null,s),r=this.createNode(n,null,s);return new nt(i,r)}delete(e){return Kn(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ds(e)?this.contents==null?!1:(this.contents=null,!0):Kn(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Re(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Ds(e)?!n&&Ee(this.contents)?this.contents.value:this.contents:Re(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Re(this.contents)?this.contents.has(e):!1}hasIn(e){return Ds(e)?this.contents!==void 0:Re(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Xi(this.schema,[e],n):Kn(this.contents)&&this.contents.set(e,n)}setIn(e,n){Ds(e)?this.contents=n:this.contents==null?this.contents=Xi(this.schema,Array.from(e),n):Kn(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new at({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new at({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new Tr(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:i,onAnchor:r,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},c=_t(this.contents,n??"",o);if(typeof r=="function")for(const{count:l,res:u}of o.anchors.values())r(u,l);return typeof a=="function"?ns(a,{"":c},"",c):c}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Ef(this,e)}}function Kn(t){if(Re(t))return!0;throw new Error("Expected a YAML collection as document contents")}class so extends Error{constructor(e,n,s,i){super(),this.name=e,this.code=s,this.message=i,this.pos=n}}class $n extends so{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class vc extends so{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const tr=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(o=>e.linePos(o));const{line:s,col:i}=n.linePos[0];n.message+=` at line ${s}, column ${i}`;let r=i-1,a=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(r>=60&&a.length>80){const o=Math.min(r-39,a.length-79);a="…"+a.substring(o),r-=o-1}if(a.length>80&&(a=a.substring(0,79)+"…"),s>1&&/^ *$/.test(a.substring(0,r))){let o=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);o.length>80&&(o=o.substring(0,79)+`…
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const c=n.linePos[1];c&&c.line===s&&c.col>i&&(o=Math.max(1,Math.min(c.col-i,80-r)));const l=" ".repeat(r)+"^".repeat(o);n.message+=`:

${a}
${l}
`}};function ms(t,{flow:e,indicator:n,next:s,offset:i,onError:r,parentIndent:a,startOnNewline:o}){let c=!1,l=o,u=o,f="",h="",m=!1,v=!1,d=null,b=null,E=null,T=null,A=null,$=null,y=null;for(const _ of t)switch(v&&(_.type!=="space"&&_.type!=="newline"&&_.type!=="comma"&&r(_.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),v=!1),d&&(l&&_.type!=="comment"&&_.type!=="newline"&&r(d,"TAB_AS_INDENT","Tabs are not allowed as indentation"),d=null),_.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&_.source.includes("	")&&(d=_),u=!0;break;case"comment":{u||r(_,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const x=_.source.substring(1)||" ";f?f+=h+x:f=x,h="",l=!1;break}case"newline":l?f?f+=_.source:(!$||n!=="seq-item-ind")&&(c=!0):h+=_.source,l=!0,m=!0,(b||E)&&(T=_),u=!0;break;case"anchor":b&&r(_,"MULTIPLE_ANCHORS","A node can have at most one anchor"),_.source.endsWith(":")&&r(_.offset+_.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=_,y===null&&(y=_.offset),l=!1,u=!1,v=!0;break;case"tag":{E&&r(_,"MULTIPLE_TAGS","A node can have at most one tag"),E=_,y===null&&(y=_.offset),l=!1,u=!1,v=!0;break}case n:(b||E)&&r(_,"BAD_PROP_ORDER",`Anchors and tags must be after the ${_.source} indicator`),$&&r(_,"UNEXPECTED_TOKEN",`Unexpected ${_.source} in ${e??"collection"}`),$=_,l=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(e){A&&r(_,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),A=_,l=!1,u=!1;break}default:r(_,"UNEXPECTED_TOKEN",`Unexpected ${_.type} token`),l=!1,u=!1}const g=t[t.length-1],C=g?g.offset+g.source.length:i;return v&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&r(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),d&&(l&&d.indent<=a||s?.type==="block-map"||s?.type==="block-seq")&&r(d,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:A,found:$,spaceBefore:c,comment:f,hasNewline:m,anchor:b,tag:E,newlineAfterProp:T,end:C,start:y??C}}function Ys(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(Ys(e.key)||Ys(e.value))return!0}return!1;default:return!0}}function Oa(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&Ys(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function wc(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const i=typeof s=="function"?s:(r,a)=>r===a||Ee(r)&&Ee(a)&&r.value===a.value;return e.some(r=>i(r.key,n))}const Oo="All mapping items must start at the same column";function Af({composeNode:t,composeEmptyNode:e},n,s,i,r){const a=r?.nodeClass??pt,o=new a(n.schema);n.atRoot&&(n.atRoot=!1);let c=s.offset,l=null;for(const u of s.items){const{start:f,key:h,sep:m,value:v}=u,d=ms(f,{indicator:"explicit-key-ind",next:h??m?.[0],offset:c,onError:i,parentIndent:s.indent,startOnNewline:!0}),b=!d.found;if(b){if(h&&(h.type==="block-seq"?i(c,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==s.indent&&i(c,"BAD_INDENT",Oo)),!d.anchor&&!d.tag&&!m){l=d.end,d.comment&&(o.comment?o.comment+=`
`+d.comment:o.comment=d.comment);continue}(d.newlineAfterProp||Ys(h))&&i(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==s.indent&&i(c,"BAD_INDENT",Oo);n.atKey=!0;const E=d.end,T=h?t(n,h,d,i):e(n,E,f,null,d,i);n.schema.compat&&Oa(s.indent,h,i),n.atKey=!1,wc(n,o.items,T)&&i(E,"DUPLICATE_KEY","Map keys must be unique");const A=ms(m??[],{indicator:"map-value-ind",next:v,offset:T.range[2],onError:i,parentIndent:s.indent,startOnNewline:!h||h.type==="block-scalar"});if(c=A.end,A.found){b&&(v?.type==="block-map"&&!A.hasNewline&&i(c,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<A.found.offset-1024&&i(T.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const $=v?t(n,v,A,i):e(n,c,m,null,A,i);n.schema.compat&&Oa(s.indent,v,i),c=$.range[2];const y=new nt(T,$);n.options.keepSourceTokens&&(y.srcToken=u),o.items.push(y)}else{b&&i(T.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),A.comment&&(T.comment?T.comment+=`
`+A.comment:T.comment=A.comment);const $=new nt(T);n.options.keepSourceTokens&&($.srcToken=u),o.items.push($)}}return l&&l<c&&i(l,"IMPOSSIBLE","Map comment with trailing content"),o.range=[s.offset,c,l??c],o}function Nf({composeNode:t,composeEmptyNode:e},n,s,i,r){const a=r?.nodeClass??wn,o=new a(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let c=s.offset,l=null;for(const{start:u,value:f}of s.items){const h=ms(u,{indicator:"seq-item-ind",next:f,offset:c,onError:i,parentIndent:s.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f&&f.type==="block-seq"?i(h.end,"BAD_INDENT","All sequence items must start at the same column"):i(c,"MISSING_CHAR","Sequence item without - indicator");else{l=h.end,h.comment&&(o.comment=h.comment);continue}const m=f?t(n,f,h,i):e(n,h.end,u,null,h,i);n.schema.compat&&Oa(s.indent,f,i),c=m.range[2],o.items.push(m)}return o.range=[s.offset,c,l??c],o}function vi(t,e,n,s){let i="";if(t){let r=!1,a="";for(const o of t){const{source:c,type:l}=o;switch(l){case"space":r=!0;break;case"comment":{n&&!r&&s(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const u=c.substring(1)||" ";i?i+=a+u:i=u,a="";break}case"newline":i&&(a+=c),r=!0;break;default:s(o,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}const Br="Block collections are not allowed within flow collections",zr=t=>t&&(t.type==="block-map"||t.type==="block-seq");function $f({composeNode:t,composeEmptyNode:e},n,s,i,r){const a=s.start.source==="{",o=a?"flow map":"flow sequence",c=r?.nodeClass??(a?pt:wn),l=new c(n.schema);l.flow=!0;const u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=s.offset+s.start.source.length;for(let b=0;b<s.items.length;++b){const E=s.items[b],{start:T,key:A,sep:$,value:y}=E,g=ms(T,{flow:o,indicator:"explicit-key-ind",next:A??$?.[0],offset:f,onError:i,parentIndent:s.indent,startOnNewline:!1});if(!g.found){if(!g.anchor&&!g.tag&&!$&&!y){b===0&&g.comma?i(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):b<s.items.length-1&&i(g.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),g.comment&&(l.comment?l.comment+=`
`+g.comment:l.comment=g.comment),f=g.end;continue}!a&&n.options.strict&&Ys(A)&&i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(b===0)g.comma&&i(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(g.comma||i(g.start,"MISSING_CHAR",`Missing , between ${o} items`),g.comment){let C="";e:for(const _ of T)switch(_.type){case"comma":case"space":break;case"comment":C=_.source.substring(1);break e;default:break e}if(C){let _=l.items[l.items.length-1];Me(_)&&(_=_.value??_.key),_.comment?_.comment+=`
`+C:_.comment=C,g.comment=g.comment.substring(C.length+1)}}if(!a&&!$&&!g.found){const C=y?t(n,y,g,i):e(n,g.end,$,null,g,i);l.items.push(C),f=C.range[2],zr(y)&&i(C.range,"BLOCK_IN_FLOW",Br)}else{n.atKey=!0;const C=g.end,_=A?t(n,A,g,i):e(n,C,T,null,g,i);zr(A)&&i(_.range,"BLOCK_IN_FLOW",Br),n.atKey=!1;const x=ms($??[],{flow:o,indicator:"map-value-ind",next:y,offset:_.range[2],onError:i,parentIndent:s.indent,startOnNewline:!1});if(x.found){if(!a&&!g.found&&n.options.strict){if($)for(const W of $){if(W===x.found)break;if(W.type==="newline"){i(W,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}g.start<x.found.offset-1024&&i(x.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else y&&("source"in y&&y.source&&y.source[0]===":"?i(y,"MISSING_CHAR",`Missing space after : in ${o}`):i(x.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const O=y?t(n,y,x,i):x.found?e(n,x.end,$,null,x,i):null;O?zr(y)&&i(O.range,"BLOCK_IN_FLOW",Br):x.comment&&(_.comment?_.comment+=`
`+x.comment:_.comment=x.comment);const N=new nt(_,O);if(n.options.keepSourceTokens&&(N.srcToken=E),a){const W=l;wc(n,W.items,_)&&i(C,"DUPLICATE_KEY","Map keys must be unique"),W.items.push(N)}else{const W=new pt(n.schema);W.flow=!0,W.items.push(N);const J=(O??_).range;W.range=[_.range[0],J[1],J[2]],l.items.push(W)}f=O?O.range[2]:x.end}}const h=a?"}":"]",[m,...v]=s.end;let d=f;if(m&&m.source===h)d=m.offset+m.source.length;else{const b=o[0].toUpperCase()+o.substring(1),E=u?`${b} must end with a ${h}`:`${b} in block collection must be sufficiently indented and end with a ${h}`;i(f,u?"MISSING_CHAR":"BAD_INDENT",E),m&&m.source.length!==1&&v.unshift(m)}if(v.length>0){const b=vi(v,d,n.options.strict,i);b.comment&&(l.comment?l.comment+=`
`+b.comment:l.comment=b.comment),l.range=[s.offset,d,b.offset]}else l.range=[s.offset,d,d];return l}function Ur(t,e,n,s,i,r){const a=n.type==="block-map"?Af(t,e,n,s,r):n.type==="block-seq"?Nf(t,e,n,s,r):$f(t,e,n,s,r),o=a.constructor;return i==="!"||i===o.tagName?(a.tag=o.tagName,a):(i&&(a.tag=i),a)}function Lf(t,e,n,s,i){const r=s.tag,a=r?e.directives.tagName(r.source,h=>i(r,"TAG_RESOLVE_FAILED",h)):null;if(n.type==="block-seq"){const{anchor:h,newlineAfterProp:m}=s,v=h&&r?h.offset>r.offset?h:r:h??r;v&&(!m||m.offset<v.offset)&&i(v,"MISSING_CHAR","Missing newline after block sequence props")}const o=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!a||a==="!"||a===pt.tagName&&o==="map"||a===wn.tagName&&o==="seq")return Ur(t,e,n,i,a);let c=e.schema.tags.find(h=>h.tag===a&&h.collection===o);if(!c){const h=e.schema.knownTags[a];if(h&&h.collection===o)e.schema.tags.push(Object.assign({},h,{default:!1})),c=h;else return h?i(r,"BAD_COLLECTION_TYPE",`${h.tag} used for ${o} collection, but expects ${h.collection??"scalar"}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),Ur(t,e,n,i,a)}const l=Ur(t,e,n,i,a,c),u=c.resolve?.(l,h=>i(r,"TAG_RESOLVE_FAILED",h),e.options)??l,f=De(u)?u:new ce(u);return f.range=l.range,f.tag=a,c?.format&&(f.format=c.format),f}function xc(t,e,n){const s=e.offset,i=Mf(e,t.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[s,s,s]};const r=i.mode===">"?ce.BLOCK_FOLDED:ce.BLOCK_LITERAL,a=e.source?Pf(e.source):[];let o=a.length;for(let d=a.length-1;d>=0;--d){const b=a[d][1];if(b===""||b==="\r")o=d;else break}if(o===0){const d=i.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let b=s+i.length;return e.source&&(b+=e.source.length),{value:d,type:r,comment:i.comment,range:[s,b,b]}}let c=e.indent+i.indent,l=e.offset+i.length,u=0;for(let d=0;d<o;++d){const[b,E]=a[d];if(E===""||E==="\r")i.indent===0&&b.length>c&&(c=b.length);else{b.length<c&&n(l+b.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(c=b.length),u=d,c===0&&!t.atRoot&&n(l,"BAD_INDENT","Block scalar values in collections must be indented");break}l+=b.length+E.length+1}for(let d=a.length-1;d>=o;--d)a[d][0].length>c&&(o=d+1);let f="",h="",m=!1;for(let d=0;d<u;++d)f+=a[d][0].slice(c)+`
`;for(let d=u;d<o;++d){let[b,E]=a[d];l+=b.length+E.length+1;const T=E[E.length-1]==="\r";if(T&&(E=E.slice(0,-1)),E&&b.length<c){const $=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(l-E.length-(T?2:1),"BAD_INDENT",$),b=""}r===ce.BLOCK_LITERAL?(f+=h+b.slice(c)+E,h=`
`):b.length>c||E[0]==="	"?(h===" "?h=`
`:!m&&h===`
`&&(h=`

`),f+=h+b.slice(c)+E,h=`
`,m=!0):E===""?h===`
`?f+=`
`:h=`
`:(f+=h+E,h=" ",m=!1)}switch(i.chomp){case"-":break;case"+":for(let d=o;d<a.length;++d)f+=`
`+a[d][0].slice(c);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const v=s+i.length+e.source.length;return{value:f,type:r,comment:i.comment,range:[s,v,v]}}function Mf({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],r=i[0];let a=0,o="",c=-1;for(let h=1;h<i.length;++h){const m=i[h];if(!o&&(m==="-"||m==="+"))o=m;else{const v=Number(m);!a&&v?a=v:c===-1&&(c=t+h)}}c!==-1&&s(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",f=i.length;for(let h=1;h<e.length;++h){const m=e[h];switch(m.type){case"space":l=!0;case"newline":f+=m.source.length;break;case"comment":n&&!l&&s(m,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=m.source.length,u=m.source.substring(1);break;case"error":s(m,"UNEXPECTED_TOKEN",m.message),f+=m.source.length;break;default:{const v=`Unexpected token in block scalar header: ${m.type}`;s(m,"UNEXPECTED_TOKEN",v);const d=m.source;d&&typeof d=="string"&&(f+=d.length)}}}return{mode:r,indent:a,chomp:o,comment:u,length:f}}function Pf(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),r=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let a=1;a<e.length;a+=2)r.push([e[a],e[a+1]]);return r}function kc(t,e,n){const{offset:s,type:i,source:r,end:a}=t;let o,c;const l=(h,m,v)=>n(s+h,m,v);switch(i){case"scalar":o=ce.PLAIN,c=jf(r,l);break;case"single-quoted-scalar":o=ce.QUOTE_SINGLE,c=Rf(r,l);break;case"double-quoted-scalar":o=ce.QUOTE_DOUBLE,c=Df(r,l);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[s,s+r.length,s+r.length]}}const u=s+r.length,f=vi(a,u,e,n);return{value:c,type:o,comment:f.comment,range:[s,u,f.offset]}}function jf(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Sc(t)}function Rf(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Sc(t.slice(1,-1)).replace(/''/g,"'")}function Sc(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let i=s[1],r=" ",a=e.lastIndex;for(n.lastIndex=a;s=n.exec(t);)s[1]===""?r===`
`?i+=r:r=`
`:(i+=r+s[1],r=" "),a=n.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,s=o.exec(t),i+r+(s?.[1]??"")}function Df(t,e){let n="";for(let s=1;s<t.length-1;++s){const i=t[s];if(!(i==="\r"&&t[s+1]===`
`))if(i===`
`){const{fold:r,offset:a}=Vf(t,s);n+=r,s=a}else if(i==="\\"){let r=t[++s];const a=Ff[r];if(a)n+=a;else if(r===`
`)for(r=t[s+1];r===" "||r==="	";)r=t[++s+1];else if(r==="\r"&&t[s+1]===`
`)for(r=t[++s+1];r===" "||r==="	";)r=t[++s+1];else if(r==="x"||r==="u"||r==="U"){const o={x:2,u:4,U:8}[r];n+=Bf(t,s+1,o,e),s+=o}else{const o=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),n+=o}}else if(i===" "||i==="	"){const r=s;let a=t[s+1];for(;a===" "||a==="	";)a=t[++s+1];a!==`
`&&!(a==="\r"&&t[s+2]===`
`)&&(n+=s>r?t.slice(r,s+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Vf(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Ff={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Bf(t,e,n,s){const i=t.substr(e,n),a=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(a)){const o=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function _c(t,e,n,s){const{value:i,type:r,comment:a,range:o}=e.type==="block-scalar"?xc(t,e,s):kc(e,t.options.strict,s),c=n?t.directives.tagName(n.source,f=>s(n,"TAG_RESOLVE_FAILED",f)):null;let l;t.options.stringKeys&&t.atKey?l=t.schema[Ht]:c?l=zf(t.schema,i,c,n,s):e.type==="scalar"?l=Uf(t,i,e,s):l=t.schema[Ht];let u;try{const f=l.resolve(i,h=>s(n??e,"TAG_RESOLVE_FAILED",h),t.options);u=Ee(f)?f:new ce(f)}catch(f){const h=f instanceof Error?f.message:String(f);s(n??e,"TAG_RESOLVE_FAILED",h),u=new ce(i)}return u.range=o,u.source=i,r&&(u.type=r),c&&(u.tag=c),l.format&&(u.format=l.format),a&&(u.comment=a),u}function zf(t,e,n,s,i){if(n==="!")return t[Ht];const r=[];for(const o of t.tags)if(!o.collection&&o.tag===n)if(o.default&&o.test)r.push(o);else return o;for(const o of r)if(o.test?.test(e))return o;const a=t.knownTags[n];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Ht])}function Uf({atKey:t,directives:e,schema:n},s,i,r){const a=n.tags.find(o=>(o.default===!0||t&&o.default==="key")&&o.test?.test(s))||n[Ht];if(n.compat){const o=n.compat.find(c=>c.default&&c.test?.test(s))??n[Ht];if(a.tag!==o.tag){const c=e.tagString(a.tag),l=e.tagString(o.tag),u=`Value may be parsed as either ${c} or ${l}`;r(i,"TAG_RESOLVE_FAILED",u,!0)}}return a}function qf(t,e,n){if(e){n===null&&(n=e.length);for(let s=n-1;s>=0;--s){let i=e[s];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++s];i?.type==="space";)t+=i.source.length,i=e[++s];break}}return t}const Wf={composeNode:Cc,composeEmptyNode:io};function Cc(t,e,n,s){const i=t.atKey,{spaceBefore:r,comment:a,anchor:o,tag:c}=n;let l,u=!0;switch(e.type){case"alias":l=Hf(t,e,s),(o||c)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=_c(t,e,c,s),o&&(l.anchor=o.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=Lf(Wf,t,e,n,s),o&&(l.anchor=o.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",f),l=io(t,e.offset,void 0,null,n,s),u=!1}}return o&&l.anchor===""&&s(o,"BAD_ALIAS","Anchor cannot be an empty string"),i&&t.options.stringKeys&&(!Ee(l)||typeof l.value!="string"||l.tag&&l.tag!=="tag:yaml.org,2002:str")&&s(c??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),r&&(l.spaceBefore=!0),a&&(e.type==="scalar"&&e.source===""?l.comment=a:l.commentBefore=a),t.options.keepSourceTokens&&u&&(l.srcToken=e),l}function io(t,e,n,s,{spaceBefore:i,comment:r,anchor:a,tag:o,end:c},l){const u={type:"scalar",offset:qf(e,n,s),indent:-1,source:""},f=_c(t,u,o,l);return a&&(f.anchor=a.source.substring(1),f.anchor===""&&l(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(f.spaceBefore=!0),r&&(f.comment=r,f.range[2]=c),f}function Hf({options:t},{offset:e,source:n,end:s},i){const r=new vr(n.substring(1));r.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),r.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+n.length,o=vi(s,a,t.strict,i);return r.range=[e,a,o.offset],o.comment&&(r.comment=o.comment),r}function Kf(t,e,{offset:n,start:s,value:i,end:r},a){const o=Object.assign({_directives:e},t),c=new Os(void 0,o),l={atKey:!1,atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=ms(s,{indicator:"doc-start",next:i??r?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0});u.found&&(c.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&a(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?Cc(l,i,u,a):io(l,u.end,s,null,u,a);const f=c.contents.range[2],h=vi(r,f,!1,a);return h.comment&&(c.comment=h.comment),c.range=[n,f,h.offset],c}function $s(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function To(t){let e="",n=!1,s=!1;for(let i=0;i<t.length;++i){const r=t[i];switch(r[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(r.substring(1)||" "),n=!0,s=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class ro{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,i,r)=>{const a=$s(n);r?this.warnings.push(new vc(a,s,i)):this.errors.push(new $n(a,s,i))},this.directives=new at({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:i}=To(this.prelude);if(s){const r=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(i||e.directives.docStart||!r)e.commentBefore=s;else if(Re(r)&&!r.flow&&r.items.length>0){let a=r.items[0];Me(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${s}
${o}`:s}else{const a=r.commentBefore;r.commentBefore=a?`${s}
${a}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:To(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const i of e)yield*this.next(i);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,i)=>{const r=$s(e);r[0]+=n,this.onError(r,"BAD_DIRECTIVE",s,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=Kf(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new $n($s(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new $n($s(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=vi(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new $n($s(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),i=new Os(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function Zf(t,e=!0,n){if(t){const s=(i,r,a)=>{const o=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(o,r,a);else throw new $n([o,o+1],r,a)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return kc(t,e,s);case"block-scalar":return xc({options:{strict:e}},t,s)}}return null}function Gf(t,e){const{implicitKey:n=!1,indent:s,inFlow:i=!1,offset:r=-1,type:a="PLAIN"}=e,o=yi({type:a,value:t},{implicitKey:n,indent:s>0?" ".repeat(s):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),c=e.end??[{type:"newline",offset:-1,indent:s,source:`
`}];switch(o[0]){case"|":case">":{const l=o.indexOf(`
`),u=o.substring(0,l),f=o.substring(l+1)+`
`,h=[{type:"block-scalar-header",offset:r,indent:s,source:u}];return Ic(h,c)||h.push({type:"newline",offset:-1,indent:s,source:`
`}),{type:"block-scalar",offset:r,indent:s,props:h,source:f}}case'"':return{type:"double-quoted-scalar",offset:r,indent:s,source:o,end:c};case"'":return{type:"single-quoted-scalar",offset:r,indent:s,source:o,end:c};default:return{type:"scalar",offset:r,indent:s,source:o,end:c}}}function Yf(t,e,n={}){let{afterKey:s=!1,implicitKey:i=!1,inFlow:r=!1,type:a}=n,o="indent"in t?t.indent:null;if(s&&typeof o=="number"&&(o+=2),!a)switch(t.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const c=yi({type:a,value:e},{implicitKey:i||o===null,indent:o!==null&&o>0?" ".repeat(o):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":Jf(t,c);break;case'"':qr(t,c,"double-quoted-scalar");break;case"'":qr(t,c,"single-quoted-scalar");break;default:qr(t,c,"scalar")}}function Jf(t,e){const n=e.indexOf(`
`),s=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const r=t.props[0];if(r.type!=="block-scalar-header")throw new Error("Invalid block scalar header");r.source=s,t.source=i}else{const{offset:r}=t,a="indent"in t?t.indent:-1,o=[{type:"block-scalar-header",offset:r,indent:a,source:s}];Ic(o,"end"in t?t.end:void 0)||o.push({type:"newline",offset:-1,indent:a,source:`
`});for(const c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:a,props:o,source:i})}}function Ic(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function qr(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const s=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const r of s)r.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:s});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const s="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(r=>r.type==="space"||r.type==="comment"||r.type==="newline"):[];for(const r of Object.keys(t))r!=="type"&&r!=="offset"&&delete t[r];Object.assign(t,{type:n,indent:s,source:e,end:i})}}}const Qf=t=>"type"in t?nr(t):qi(t);function nr(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=nr(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=qi(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=qi(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=qi(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function qi({start:t,key:e,sep:n,value:s}){let i="";for(const r of t)i+=r.source;if(e&&(i+=nr(e)),n)for(const r of n)i+=r.source;return s&&(i+=nr(s)),i}const Ta=Symbol("break visit"),Xf=Symbol("skip children"),Oc=Symbol("remove item");function Dn(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Tc(Object.freeze([]),t,e)}Dn.BREAK=Ta;Dn.SKIP=Xf;Dn.REMOVE=Oc;Dn.itemAtPath=(t,e)=>{let n=t;for(const[s,i]of e){const r=n?.[s];if(r&&"items"in r)n=r.items[i];else return}return n};Dn.parentCollection=(t,e)=>{const n=Dn.itemAtPath(t,e.slice(0,-1)),s=e[e.length-1][0],i=n?.[s];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Tc(t,e,n){let s=n(e,t);if(typeof s=="symbol")return s;for(const i of["key","value"]){const r=e[i];if(r&&"items"in r){for(let a=0;a<r.items.length;++a){const o=Tc(Object.freeze(t.concat([[i,a]])),r.items[a],n);if(typeof o=="number")a=o-1;else{if(o===Ta)return Ta;o===Oc&&(r.items.splice(a,1),a-=1)}}typeof s=="function"&&i==="key"&&(s=s(e,t))}}return typeof s=="function"?s(e,t):s}const Er="\uFEFF",Ar="",Nr="",Js="",ed=t=>!!t&&"items"in t,td=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function nd(t){switch(t){case Er:return"<BOM>";case Ar:return"<DOC>";case Nr:return"<FLOW_END>";case Js:return"<SCALAR>";default:return JSON.stringify(t)}}function Ec(t){switch(t){case Er:return"byte-order-mark";case Ar:return"doc-mode";case Nr:return"flow-error-end";case Js:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const sd=Object.freeze(Object.defineProperty({__proto__:null,BOM:Er,DOCUMENT:Ar,FLOW_END:Nr,SCALAR:Js,createScalarToken:Gf,isCollection:ed,isScalar:td,prettyToken:nd,resolveAsScalar:Zf,setScalarValue:Yf,stringify:Qf,tokenType:Ec,visit:Dn},Symbol.toStringTag,{value:"Module"}));function Et(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Eo=new Set("0123456789ABCDEFabcdef"),id=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Li=new Set(",[]{}"),rd=new Set(` ,[]{}
\r	`),Wr=t=>!t||rd.has(t);class Ac{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const i=this.buffer[s+e+1];if(i===`
`||!i&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&Et(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Er&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const r=e[s-1];if(r===" "||r==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const r=e[n-1];if(r===" "||r==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield Ar,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Et(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Et(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Et(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Wr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&i[0]!=="#"||s===0&&(i.startsWith("---")||i.startsWith("..."))&&Et(i[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Nr,yield*this.parseLineStart();let r=0;for(;i[r]===",";)r+=yield*this.pushCount(1),r+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(r+=yield*this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Wr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||Et(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let r=0;for(;this.buffer[n-1-r]==="\\";)r+=1;if(r%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let i=s.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const r=this.continueScalar(i+1);if(r===-1)break;i=s.indexOf(`
`,r)}i!==-1&&(n=i-(s[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Et(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let r=this.pos;s=this.buffer[r];++r)switch(s){case" ":n+=1;break;case`
`:e=r,n=0;break;case"\r":{const a=this.buffer[r+1];if(!a&&!this.atEnd)return this.setNext("block-scalar");if(a===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const r=this.continueScalar(e+1);if(r===-1)break;e=this.buffer.indexOf(`
`,r)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let i=e+1;for(s=this.buffer[i];s===" ";)s=this.buffer[++i];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++i];e=i-1}else if(!this.blockScalarKeep)do{let r=e-1,a=this.buffer[r];a==="\r"&&(a=this.buffer[--r]);const o=r;for(;a===" ";)a=this.buffer[--r];if(a===`
`&&r>=this.pos&&r+1+n>o)e=r;else break}while(!0);return yield Js,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,i;for(;i=this.buffer[++s];)if(i===":"){const r=this.buffer[s+1];if(Et(r)||e&&Li.has(r))break;n=s}else if(Et(i)){let r=this.buffer[s+1];if(i==="\r"&&(r===`
`?(s+=1,i=`
`,r=this.buffer[s+1]):n=s),r==="#"||e&&Li.has(r))break;if(i===`
`){const a=this.continueScalar(s+1);if(a===-1)break;s=Math.max(s,a-2)}}else{if(e&&Li.has(i))break;n=s}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Js,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Wr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Et(n)||e&&Li.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Et(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(id.has(n))n=this.buffer[++e];else if(n==="%"&&Eo.has(this.buffer[e+1])&&Eo.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Nc{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const r=n+s>>1;this.lineStarts[r]<e?n=r+1:s=r}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function pn(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Ao(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function $c(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Mi(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Zn(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function No(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!pn(e.start,"explicit-key-ind")&&!pn(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,$c(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class ao{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ac,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Ec(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&No(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const i=s.items[s.items.length-1];if(i.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=s.items[s.items.length-1];i.value?s.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=s.items[s.items.length-1];!i||i.value?s.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Ao(i.start)===-1&&(n.indent===0||i.start.every(r=>r.type!=="comment"||r.indent<n.indent))&&(s.type==="document"?s.end=i.start:s.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Ao(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Mi(this.peek(2)),s=Zn(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,i=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let r=[];if(i&&n.sep&&!n.value){const a=[];for(let o=0;o<n.sep.length;++o){const c=n.sep[o];switch(c.type){case"newline":a.push(o);break;case"space":break;case"comment":c.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(r=n.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):i||n.value?(r.push(this.sourceToken),e.items.push({start:r,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(pn(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if($c(n.key)&&!pn(n.sep,"newline")){const a=Zn(n.start),o=n.key,c=n.sep;c.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:o,sep:c}]})}else r.length>0?n.sep=n.sep.concat(r,this.sourceToken):n.sep.push(this.sourceToken);else if(pn(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const a=Zn(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:r,key:null,sep:[this.sourceToken]}):pn(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);i||n.value?(e.items.push({start:r,key:a,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(a):(Object.assign(n,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){if(a.type==="block-seq"){if(!n.explicitKey&&n.sep&&!pn(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:r});this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||pn(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s&&s.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const i=Mi(s),r=Zn(i);No(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Mi(e),s=Zn(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Mi(e),s=Zn(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Lc(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Nc||null,prettyErrors:e}}function ad(t,e={}){const{lineCounter:n,prettyErrors:s}=Lc(e),i=new ao(n?.addNewLine),r=new ro(e),a=Array.from(r.compose(i.parse(t)));if(s&&n)for(const o of a)o.errors.forEach(tr(t,n)),o.warnings.forEach(tr(t,n));return a.length>0?a:Object.assign([],{empty:!0},r.streamInfo())}function Mc(t,e={}){const{lineCounter:n,prettyErrors:s}=Lc(e),i=new ao(n?.addNewLine),r=new ro(e);let a=null;for(const o of r.compose(i.parse(t),!0,t.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new $n(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(a.errors.forEach(tr(t,n)),a.warnings.forEach(tr(t,n))),a}function Pc(t,e,n){let s;typeof e=="function"?s=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=Mc(t,n);if(!i)return null;if(i.warnings.forEach(r=>ec(i.options.logLevel,r)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:s},n))}function od(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return Un(t)&&!s?t.toString(n):new Os(t,s,n).toString(n)}const us=Object.freeze(Object.defineProperty({__proto__:null,Alias:vr,CST:sd,Composer:ro,Document:Os,Lexer:Ac,LineCounter:Nc,Pair:nt,Parser:ao,Scalar:ce,Schema:Tr,YAMLError:so,YAMLMap:pt,YAMLParseError:$n,YAMLSeq:wn,YAMLWarning:vc,isAlias:zn,isCollection:Re,isDocument:Un,isMap:Ss,isNode:De,isPair:Me,isScalar:Ee,isSeq:_s,parse:Pc,parseAllDocuments:ad,parseDocument:Mc,stringify:od,visit:vn,visitAsync:br},Symbol.toStringTag,{value:"Module"})),ke=typeof window<"u",en=function(){return ke&&document.addEventListener?function(t,e,n,s=!1){t&&e&&n&&t.addEventListener(e,n,s)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),tn=function(){return ke&&document.removeEventListener?function(t,e,n,s=!1){t&&e&&t.removeEventListener(e,n,s)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}(),Je=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},ld="ivu-affix";function Ea(t,e){const n=e?"pageYOffset":"pageXOffset",s=e?"scrollTop":"scrollLeft";let i=t[n];return ke&&typeof i!="number"&&(i=window.document.documentElement[s]),i}function cd(t){if(!ke)return;const e=t.getBoundingClientRect(),n=Ea(window,!0),s=Ea(window),i=window.document.body,r=i.clientTop||0,a=i.clientLeft||0;return{top:e.top+n-r,left:e.left+s-a}}const ud={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let t="top";return this.offsetBottom>=0&&(t="bottom"),t},classes(){return[{[`${ld}`]:this.affix}]}},mounted(){en(window,"scroll",this.handleScroll,this.useCapture),en(window,"resize",this.handleScroll,this.useCapture),St(()=>{this.handleScroll()})},beforeUnmount(){tn(window,"scroll",this.handleScroll,this.useCapture),tn(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!ke)return;const t=this.affix,e=Ea(window,!0),n=cd(this.$el),s=window.innerHeight,i=this.$el.getElementsByTagName("div")[0].offsetHeight;n.top-this.offsetTop<e&&this.offsetType=="top"&&!t?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${n.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):n.top-this.offsetTop>e&&this.offsetType=="top"&&t&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),n.top+this.offsetBottom+i>e+s&&this.offsetType=="bottom"&&!t?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${n.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):n.top+this.offsetBottom+i<e+s&&this.offsetType=="bottom"&&t&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function fd(t,e,n,s,i,r){return R(),Z("div",null,[se("div",{ref:"point",class:H(r.classes),style:Qe(i.styles)},[Le(t.$slots,"default")],6),Xe(se("div",{style:Qe(i.slotStyle)},null,4),[[ot,i.slot]])])}const dd=Je(ud,[["render",fd]]),$o="ivu-icon",hd={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${$o}`,{[`${$o}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let t={};return this.size&&(t["font-size"]=`${this.size}px`),this.color&&(t.color=this.color),t}}};function pd(t,e,n,s,i,r){return R(),Z("i",{class:H(r.classes),style:Qe(r.styles)},null,6)}const st=Je(hd,[["render",pd]]);function We(t,e){for(let n=0;n<e.length;n++)if(t===e[n])return!0;return!1}let Hr;function md(t){if(ke&&Hr===void 0){const e=document.createElement("div");e.style.width="100%",e.style.height="200px";const n=document.createElement("div"),s=n.style;s.position="absolute",s.top=0,s.left=0,s.pointerEvents="none",s.visibility="hidden",s.width="200px",s.height="150px",s.overflow="hidden",n.appendChild(e),document.body.appendChild(n);const i=e.offsetWidth;n.style.overflow="scroll";let r=e.offsetWidth;i===r&&(r=n.clientWidth),document.body.removeChild(n),Hr=i-r}return Hr}const gd=/([\:\-\_]+(.))/g,yd=/^moz([A-Z])/;function bd(t){return t.replace(gd,function(e,n,s,i){return i?s.toUpperCase():s}).replace(yd,"Moz$1")}function vd(t,e){if(ke){if(!t||!e)return null;e=bd(e),e==="float"&&(e="cssFloat");try{const n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch{return t.style[e]}}}function Aa(t){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(t)]}function sr(t){const e=Aa(t);let n;if(e==="array")n=[];else if(e==="object")n={};else return t;if(e==="array")for(let s=0;s<t.length;s++)n.push(sr(t[s]));else if(e==="object")for(let s in t)n[s]=sr(t[s]);return n}function Na(t,e,n){typeof e=="string"?n=[e]:n=e;let s=t.$parent,i=s.$options.name;for(;s&&(!i||n.indexOf(i)<0);)s=s.$parent,s&&(i=s.$options.name);return s}function wd(){if(!ke)return;const t=e=>({media:e,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||t}async function xd(t,e="unnamed"){if(!ke)return Promise.reject();try{const s=await(await fetch(t)).blob();if(!s)return Promise.reject();const i=URL.createObjectURL(s),r=document.createElement("a");return r.setAttribute("href",i),r.setAttribute("download",e),r.click(),URL.revokeObjectURL(i),Promise.resolve()}catch(n){return Promise.reject(n)}}function jc(t=32){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",n=e.length;let s="";for(let i=0;i<t;i++)s+=e.charAt(Math.floor(Math.random()*n));return s}const Rc={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(t){return We(t,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!=="string")return null;if(this.to.includes("//"))return this.to;const e=this.$router;if(e){const n=this.$route,s=e.resolve(this.to,n,this.append);return s?s.href:this.to}return this.to}},methods:{handleOpenTo(){if(!ke)return;const t=this.$router;let e=this.to;if(t){const n=this.$route,s=t.resolve(this.to,n,this.append);e=s?s.href:this.to}typeof this.to!="string"&&window.open(e)},handleClick(t=!1){const e=this.$router;ke&&(t?this.handleOpenTo():e?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(t,e=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;t.preventDefault(),this.handleClick(e)}}}};var Vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wi={exports:{}};/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var kd=Wi.exports,Lo;function Sd(){return Lo||(Lo=1,function(t,e){(function(n,s){t.exports=s()})(kd,function(){var n=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",s=function(){for(var p=["Edge","Trident","Firefox"],w=0;w<p.length;w+=1)if(n&&navigator.userAgent.indexOf(p[w])>=0)return 1;return 0}();function i(p){var w=!1;return function(){w||(w=!0,window.Promise.resolve().then(function(){w=!1,p()}))}}function r(p){var w=!1;return function(){w||(w=!0,setTimeout(function(){w=!1,p()},s))}}var a=n&&window.Promise,o=a?i:r;function c(p){var w={};return p&&w.toString.call(p)==="[object Function]"}function l(p,w){if(p.nodeType!==1)return[];var S=p.ownerDocument.defaultView,I=S.getComputedStyle(p,null);return w?I[w]:I}function u(p){return p.nodeName==="HTML"?p:p.parentNode||p.host}function f(p){if(!p)return document.body;switch(p.nodeName){case"HTML":case"BODY":return p.ownerDocument.body;case"#document":return p.body}var w=l(p),S=w.overflow,I=w.overflowX,M=w.overflowY;return/(auto|scroll|overlay)/.test(S+M+I)?p:f(u(p))}function h(p){return p&&p.referenceNode?p.referenceNode:p}var m=n&&!!(window.MSInputMethodContext&&document.documentMode),v=n&&/MSIE 10/.test(navigator.userAgent);function d(p){return p===11?m:p===10?v:m||v}function b(p){if(!p)return document.documentElement;for(var w=d(10)?document.body:null,S=p.offsetParent||null;S===w&&p.nextElementSibling;)S=(p=p.nextElementSibling).offsetParent;var I=S&&S.nodeName;return!I||I==="BODY"||I==="HTML"?p?p.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(S.nodeName)!==-1&&l(S,"position")==="static"?b(S):S}function E(p){var w=p.nodeName;return w==="BODY"?!1:w==="HTML"||b(p.firstElementChild)===p}function T(p){return p.parentNode!==null?T(p.parentNode):p}function A(p,w){if(!p||!p.nodeType||!w||!w.nodeType)return document.documentElement;var S=p.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING,I=S?p:w,M=S?w:p,L=document.createRange();L.setStart(I,0),L.setEnd(M,0);var P=L.commonAncestorContainer;if(p!==P&&w!==P||I.contains(M))return E(P)?P:b(P);var z=T(p);return z.host?A(z.host,w):A(p,T(w).host)}function $(p){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",S=w==="top"?"scrollTop":"scrollLeft",I=p.nodeName;if(I==="BODY"||I==="HTML"){var M=p.ownerDocument.documentElement,L=p.ownerDocument.scrollingElement||M;return L[S]}return p[S]}function y(p,w){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=$(w,"top"),M=$(w,"left"),L=S?-1:1;return p.top+=I*L,p.bottom+=I*L,p.left+=M*L,p.right+=M*L,p}function g(p,w){var S=w==="x"?"Left":"Top",I=S==="Left"?"Right":"Bottom";return parseFloat(p["border"+S+"Width"])+parseFloat(p["border"+I+"Width"])}function C(p,w,S,I){return Math.max(w["offset"+p],w["scroll"+p],S["client"+p],S["offset"+p],S["scroll"+p],d(10)?parseInt(S["offset"+p])+parseInt(I["margin"+(p==="Height"?"Top":"Left")])+parseInt(I["margin"+(p==="Height"?"Bottom":"Right")]):0)}function _(p){var w=p.body,S=p.documentElement,I=d(10)&&getComputedStyle(S);return{height:C("Height",w,S,I),width:C("Width",w,S,I)}}var x=function(p,w){if(!(p instanceof w))throw new TypeError("Cannot call a class as a function")},O=function(){function p(w,S){for(var I=0;I<S.length;I++){var M=S[I];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,M.key,M)}}return function(w,S,I){return S&&p(w.prototype,S),I&&p(w,I),w}}(),N=function(p,w,S){return w in p?Object.defineProperty(p,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):p[w]=S,p},W=Object.assign||function(p){for(var w=1;w<arguments.length;w++){var S=arguments[w];for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(p[I]=S[I])}return p};function J(p){return W({},p,{right:p.left+p.width,bottom:p.top+p.height})}function G(p){var w={};try{if(d(10)){w=p.getBoundingClientRect();var S=$(p,"top"),I=$(p,"left");w.top+=S,w.left+=I,w.bottom+=S,w.right+=I}else w=p.getBoundingClientRect()}catch{}var M={left:w.left,top:w.top,width:w.right-w.left,height:w.bottom-w.top},L=p.nodeName==="HTML"?_(p.ownerDocument):{},P=L.width||p.clientWidth||M.width,z=L.height||p.clientHeight||M.height,K=p.offsetWidth-P,te=p.offsetHeight-z;if(K||te){var re=l(p);K-=g(re,"x"),te-=g(re,"y"),M.width-=K,M.height-=te}return J(M)}function F(p,w){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=d(10),M=w.nodeName==="HTML",L=G(p),P=G(w),z=f(p),K=l(w),te=parseFloat(K.borderTopWidth),re=parseFloat(K.borderLeftWidth);S&&M&&(P.top=Math.max(P.top,0),P.left=Math.max(P.left,0));var ee=J({top:L.top-P.top-te,left:L.left-P.left-re,width:L.width,height:L.height});if(ee.marginTop=0,ee.marginLeft=0,!I&&M){var he=parseFloat(K.marginTop),fe=parseFloat(K.marginLeft);ee.top-=te-he,ee.bottom-=te-he,ee.left-=re-fe,ee.right-=re-fe,ee.marginTop=he,ee.marginLeft=fe}return(I&&!S?w.contains(z):w===z&&z.nodeName!=="BODY")&&(ee=y(ee,w)),ee}function U(p){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=p.ownerDocument.documentElement,I=F(p,S),M=Math.max(S.clientWidth,window.innerWidth||0),L=Math.max(S.clientHeight,window.innerHeight||0),P=w?0:$(S),z=w?0:$(S,"left"),K={top:P-I.top+I.marginTop,left:z-I.left+I.marginLeft,width:M,height:L};return J(K)}function B(p){var w=p.nodeName;if(w==="BODY"||w==="HTML")return!1;if(l(p,"position")==="fixed")return!0;var S=u(p);return S?B(S):!1}function D(p){if(!p||!p.parentElement||d())return document.documentElement;for(var w=p.parentElement;w&&l(w,"transform")==="none";)w=w.parentElement;return w||document.documentElement}function X(p,w,S,I){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,L={top:0,left:0},P=M?D(p):A(p,h(w));if(I==="viewport")L=U(P,M);else{var z=void 0;I==="scrollParent"?(z=f(u(w)),z.nodeName==="BODY"&&(z=p.ownerDocument.documentElement)):I==="window"?z=p.ownerDocument.documentElement:z=I;var K=F(z,P,M);if(z.nodeName==="HTML"&&!B(P)){var te=_(p.ownerDocument),re=te.height,ee=te.width;L.top+=K.top-K.marginTop,L.bottom=re+K.top,L.left+=K.left-K.marginLeft,L.right=ee+K.left}else L=K}S=S||0;var he=typeof S=="number";return L.left+=he?S:S.left||0,L.top+=he?S:S.top||0,L.right-=he?S:S.right||0,L.bottom-=he?S:S.bottom||0,L}function ie(p){var w=p.width,S=p.height;return w*S}function ye(p,w,S,I,M){var L=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(p.indexOf("auto")===-1)return p;var P=X(S,I,L,M),z={top:{width:P.width,height:w.top-P.top},right:{width:P.right-w.right,height:P.height},bottom:{width:P.width,height:P.bottom-w.bottom},left:{width:w.left-P.left,height:P.height}},K=Object.keys(z).map(function(he){return W({key:he},z[he],{area:ie(z[he])})}).sort(function(he,fe){return fe.area-he.area}),te=K.filter(function(he){var fe=he.width,pe=he.height;return fe>=S.clientWidth&&pe>=S.clientHeight}),re=te.length>0?te[0].key:K[0].key,ee=p.split("-")[1];return re+(ee?"-"+ee:"")}function be(p,w,S){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,M=I?D(w):A(w,h(S));return F(S,M,I)}function we(p){var w=p.ownerDocument.defaultView,S=w.getComputedStyle(p),I=parseFloat(S.marginTop||0)+parseFloat(S.marginBottom||0),M=parseFloat(S.marginLeft||0)+parseFloat(S.marginRight||0),L={width:p.offsetWidth+M,height:p.offsetHeight+I};return L}function _e(p){var w={left:"right",right:"left",bottom:"top",top:"bottom"};return p.replace(/left|right|bottom|top/g,function(S){return w[S]})}function Ie(p,w,S){S=S.split("-")[0];var I=we(p),M={width:I.width,height:I.height},L=["right","left"].indexOf(S)!==-1,P=L?"top":"left",z=L?"left":"top",K=L?"height":"width",te=L?"width":"height";return M[P]=w[P]+w[K]/2-I[K]/2,S===z?M[z]=w[z]-I[te]:M[z]=w[_e(z)],M}function Pe(p,w){return Array.prototype.find?p.find(w):p.filter(w)[0]}function Se(p,w,S){if(Array.prototype.findIndex)return p.findIndex(function(M){return M[w]===S});var I=Pe(p,function(M){return M[w]===S});return p.indexOf(I)}function oe(p,w,S){var I=S===void 0?p:p.slice(0,Se(p,"name",S));return I.forEach(function(M){M.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var L=M.function||M.fn;M.enabled&&c(L)&&(w.offsets.popper=J(w.offsets.popper),w.offsets.reference=J(w.offsets.reference),w=L(w,M))}),w}function Ae(){if(!this.state.isDestroyed){var p={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};p.offsets.reference=be(this.state,this.popper,this.reference,this.options.positionFixed),p.placement=ye(this.options.placement,p.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),p.originalPlacement=p.placement,p.positionFixed=this.options.positionFixed,p.offsets.popper=Ie(this.popper,p.offsets.reference,p.placement),p.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",p=oe(this.modifiers,p),this.state.isCreated?this.options.onUpdate(p):(this.state.isCreated=!0,this.options.onCreate(p))}}function V(p,w){return p.some(function(S){var I=S.name,M=S.enabled;return M&&I===w})}function ne(p){for(var w=[!1,"ms","Webkit","Moz","O"],S=p.charAt(0).toUpperCase()+p.slice(1),I=0;I<w.length;I++){var M=w[I],L=M?""+M+S:p;if(typeof document.body.style[L]<"u")return L}return null}function xe(){return this.state.isDestroyed=!0,V(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[ne("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Ke(p){var w=p.ownerDocument;return w?w.defaultView:window}function vt(p,w,S,I){var M=p.nodeName==="BODY",L=M?p.ownerDocument.defaultView:p;L.addEventListener(w,S,{passive:!0}),M||vt(f(L.parentNode),w,S,I),I.push(L)}function on(p,w,S,I){S.updateBound=I,Ke(p).addEventListener("resize",S.updateBound,{passive:!0});var M=f(p);return vt(M,"scroll",S.updateBound,S.scrollParents),S.scrollElement=M,S.eventsEnabled=!0,S}function ln(){this.state.eventsEnabled||(this.state=on(this.reference,this.options,this.state,this.scheduleUpdate))}function rt(p,w){return Ke(p).removeEventListener("resize",w.updateBound),w.scrollParents.forEach(function(S){S.removeEventListener("scroll",w.updateBound)}),w.updateBound=null,w.scrollParents=[],w.scrollElement=null,w.eventsEnabled=!1,w}function Ce(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=rt(this.reference,this.state))}function et(p){return p!==""&&!isNaN(parseFloat(p))&&isFinite(p)}function It(p,w){Object.keys(w).forEach(function(S){var I="";["width","height","top","right","bottom","left"].indexOf(S)!==-1&&et(w[S])&&(I="px"),p.style[S]=w[S]+I})}function Ot(p,w){Object.keys(w).forEach(function(S){var I=w[S];I!==!1?p.setAttribute(S,w[S]):p.removeAttribute(S)})}function Tt(p){return It(p.instance.popper,p.styles),Ot(p.instance.popper,p.attributes),p.arrowElement&&Object.keys(p.arrowStyles).length&&It(p.arrowElement,p.arrowStyles),p}function cn(p,w,S,I,M){var L=be(M,w,p,S.positionFixed),P=ye(S.placement,L,w,p,S.modifiers.flip.boundariesElement,S.modifiers.flip.padding);return w.setAttribute("x-placement",P),It(w,{position:S.positionFixed?"fixed":"absolute"}),S}function Ii(p,w){var S=p.offsets,I=S.popper,M=S.reference,L=Math.round,P=Math.floor,z=function(un){return un},K=L(M.width),te=L(I.width),re=["left","right"].indexOf(p.placement)!==-1,ee=p.placement.indexOf("-")!==-1,he=K%2===te%2,fe=K%2===1&&te%2===1,pe=w?re||ee||he?L:P:z,Ve=w?L:z;return{left:pe(fe&&!ee&&w?I.left-1:I.left),top:Ve(I.top),bottom:Ve(I.bottom),right:pe(I.right)}}var Wn=n&&/Firefox/i.test(navigator.userAgent);function Oi(p,w){var S=w.x,I=w.y,M=p.offsets.popper,L=Pe(p.instance.modifiers,function(In){return In.name==="applyStyle"}).gpuAcceleration;L!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var P=L!==void 0?L:w.gpuAcceleration,z=b(p.instance.popper),K=G(z),te={position:M.position},re=Ii(p,window.devicePixelRatio<2||!Wn),ee=S==="bottom"?"top":"bottom",he=I==="right"?"left":"right",fe=ne("transform"),pe=void 0,Ve=void 0;if(ee==="bottom"?z.nodeName==="HTML"?Ve=-z.clientHeight+re.bottom:Ve=-K.height+re.bottom:Ve=re.top,he==="right"?z.nodeName==="HTML"?pe=-z.clientWidth+re.right:pe=-K.width+re.right:pe=re.left,P&&fe)te[fe]="translate3d("+pe+"px, "+Ve+"px, 0)",te[ee]=0,te[he]=0,te.willChange="transform";else{var Gt=ee==="bottom"?-1:1,un=he==="right"?-1:1;te[ee]=Ve*Gt,te[he]=pe*un,te.willChange=ee+", "+he}var xt={"x-placement":p.placement};return p.attributes=W({},xt,p.attributes),p.styles=W({},te,p.styles),p.arrowStyles=W({},p.offsets.arrow,p.arrowStyles),p}function Es(p,w,S){var I=Pe(p,function(z){var K=z.name;return K===w}),M=!!I&&p.some(function(z){return z.name===S&&z.enabled&&z.order<I.order});if(!M){var L="`"+w+"`",P="`"+S+"`";console.warn(P+" modifier is required by "+L+" modifier in order to work, be sure to include it before "+L+"!")}return M}function Ti(p,w){var S;if(!Es(p.instance.modifiers,"arrow","keepTogether"))return p;var I=w.element;if(typeof I=="string"){if(I=p.instance.popper.querySelector(I),!I)return p}else if(!p.instance.popper.contains(I))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),p;var M=p.placement.split("-")[0],L=p.offsets,P=L.popper,z=L.reference,K=["left","right"].indexOf(M)!==-1,te=K?"height":"width",re=K?"Top":"Left",ee=re.toLowerCase(),he=K?"left":"top",fe=K?"bottom":"right",pe=we(I)[te];z[fe]-pe<P[ee]&&(p.offsets.popper[ee]-=P[ee]-(z[fe]-pe)),z[ee]+pe>P[fe]&&(p.offsets.popper[ee]+=z[ee]+pe-P[fe]),p.offsets.popper=J(p.offsets.popper);var Ve=z[ee]+z[te]/2-pe/2,Gt=l(p.instance.popper),un=parseFloat(Gt["margin"+re]),xt=parseFloat(Gt["border"+re+"Width"]),In=Ve-p.offsets.popper[ee]-un-xt;return In=Math.max(Math.min(P[te]-pe,In),0),p.arrowElement=I,p.offsets.arrow=(S={},N(S,ee,Math.round(In)),N(S,he,""),S),p}function Ze(p){return p==="end"?"start":p==="start"?"end":p}var wt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],jt=wt.slice(3);function Rt(p){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=jt.indexOf(p),I=jt.slice(S+1).concat(jt.slice(0,S));return w?I.reverse():I}var As={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Hn(p,w){if(V(p.instance.modifiers,"inner")||p.flipped&&p.placement===p.originalPlacement)return p;var S=X(p.instance.popper,p.instance.reference,w.padding,w.boundariesElement,p.positionFixed),I=p.placement.split("-")[0],M=_e(I),L=p.placement.split("-")[1]||"",P=[];switch(w.behavior){case As.FLIP:P=[I,M];break;case As.CLOCKWISE:P=Rt(I);break;case As.COUNTERCLOCKWISE:P=Rt(I,!0);break;default:P=w.behavior}return P.forEach(function(z,K){if(I!==z||P.length===K+1)return p;I=p.placement.split("-")[0],M=_e(I);var te=p.offsets.popper,re=p.offsets.reference,ee=Math.floor,he=I==="left"&&ee(te.right)>ee(re.left)||I==="right"&&ee(te.left)<ee(re.right)||I==="top"&&ee(te.bottom)>ee(re.top)||I==="bottom"&&ee(te.top)<ee(re.bottom),fe=ee(te.left)<ee(S.left),pe=ee(te.right)>ee(S.right),Ve=ee(te.top)<ee(S.top),Gt=ee(te.bottom)>ee(S.bottom),un=I==="left"&&fe||I==="right"&&pe||I==="top"&&Ve||I==="bottom"&&Gt,xt=["top","bottom"].indexOf(I)!==-1,In=!!w.flipVariations&&(xt&&L==="start"&&fe||xt&&L==="end"&&pe||!xt&&L==="start"&&Ve||!xt&&L==="end"&&Gt),Wu=!!w.flipVariationsByContent&&(xt&&L==="start"&&pe||xt&&L==="end"&&fe||!xt&&L==="start"&&Gt||!xt&&L==="end"&&Ve),vo=In||Wu;(he||un||vo)&&(p.flipped=!0,(he||un)&&(I=P[K+1]),vo&&(L=Ze(L)),p.placement=I+(L?"-"+L:""),p.offsets.popper=W({},p.offsets.popper,Ie(p.instance.popper,p.offsets.reference,p.placement)),p=oe(p.instance.modifiers,p,"flip"))}),p}function Rr(p){var w=p.offsets,S=w.popper,I=w.reference,M=p.placement.split("-")[0],L=Math.floor,P=["top","bottom"].indexOf(M)!==-1,z=P?"right":"bottom",K=P?"left":"top",te=P?"width":"height";return S[z]<L(I[K])&&(p.offsets.popper[K]=L(I[K])-S[te]),S[K]>L(I[z])&&(p.offsets.popper[K]=L(I[z])),p}function Ns(p,w,S,I){var M=p.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),L=+M[1],P=M[2];if(!L)return p;if(P.indexOf("%")===0){var z=void 0;switch(P){case"%p":z=S;break;case"%":case"%r":default:z=I}var K=J(z);return K[w]/100*L}else if(P==="vh"||P==="vw"){var te=void 0;return P==="vh"?te=Math.max(document.documentElement.clientHeight,window.innerHeight||0):te=Math.max(document.documentElement.clientWidth,window.innerWidth||0),te/100*L}else return L}function Dr(p,w,S,I){var M=[0,0],L=["right","left"].indexOf(I)!==-1,P=p.split(/(\+|\-)/).map(function(re){return re.trim()}),z=P.indexOf(Pe(P,function(re){return re.search(/,|\s/)!==-1}));P[z]&&P[z].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var K=/\s*,\s*|\s+/,te=z!==-1?[P.slice(0,z).concat([P[z].split(K)[0]]),[P[z].split(K)[1]].concat(P.slice(z+1))]:[P];return te=te.map(function(re,ee){var he=(ee===1?!L:L)?"height":"width",fe=!1;return re.reduce(function(pe,Ve){return pe[pe.length-1]===""&&["+","-"].indexOf(Ve)!==-1?(pe[pe.length-1]=Ve,fe=!0,pe):fe?(pe[pe.length-1]+=Ve,fe=!1,pe):pe.concat(Ve)},[]).map(function(pe){return Ns(pe,he,w,S)})}),te.forEach(function(re,ee){re.forEach(function(he,fe){et(he)&&(M[ee]+=he*(re[fe-1]==="-"?-1:1))})}),M}function Du(p,w){var S=w.offset,I=p.placement,M=p.offsets,L=M.popper,P=M.reference,z=I.split("-")[0],K=void 0;return et(+S)?K=[+S,0]:K=Dr(S,L,P,z),z==="left"?(L.top+=K[0],L.left-=K[1]):z==="right"?(L.top+=K[0],L.left+=K[1]):z==="top"?(L.left+=K[0],L.top-=K[1]):z==="bottom"&&(L.left+=K[0],L.top+=K[1]),p.popper=L,p}function Vu(p,w){var S=w.boundariesElement||b(p.instance.popper);p.instance.reference===S&&(S=b(S));var I=ne("transform"),M=p.instance.popper.style,L=M.top,P=M.left,z=M[I];M.top="",M.left="",M[I]="";var K=X(p.instance.popper,p.instance.reference,w.padding,S,p.positionFixed);M.top=L,M.left=P,M[I]=z,w.boundaries=K;var te=w.priority,re=p.offsets.popper,ee={primary:function(fe){var pe=re[fe];return re[fe]<K[fe]&&!w.escapeWithReference&&(pe=Math.max(re[fe],K[fe])),N({},fe,pe)},secondary:function(fe){var pe=fe==="right"?"left":"top",Ve=re[pe];return re[fe]>K[fe]&&!w.escapeWithReference&&(Ve=Math.min(re[pe],K[fe]-(fe==="right"?re.width:re.height))),N({},pe,Ve)}};return te.forEach(function(he){var fe=["left","top"].indexOf(he)!==-1?"primary":"secondary";re=W({},re,ee[fe](he))}),p.offsets.popper=re,p}function Fu(p){var w=p.placement,S=w.split("-")[0],I=w.split("-")[1];if(I){var M=p.offsets,L=M.reference,P=M.popper,z=["bottom","top"].indexOf(S)!==-1,K=z?"left":"top",te=z?"width":"height",re={start:N({},K,L[K]),end:N({},K,L[K]+L[te]-P[te])};p.offsets.popper=W({},P,re[I])}return p}function Bu(p){if(!Es(p.instance.modifiers,"hide","preventOverflow"))return p;var w=p.offsets.reference,S=Pe(p.instance.modifiers,function(I){return I.name==="preventOverflow"}).boundaries;if(w.bottom<S.top||w.left>S.right||w.top>S.bottom||w.right<S.left){if(p.hide===!0)return p;p.hide=!0,p.attributes["x-out-of-boundaries"]=""}else{if(p.hide===!1)return p;p.hide=!1,p.attributes["x-out-of-boundaries"]=!1}return p}function zu(p){var w=p.placement,S=w.split("-")[0],I=p.offsets,M=I.popper,L=I.reference,P=["left","right"].indexOf(S)!==-1,z=["top","left"].indexOf(S)===-1;return M[P?"left":"top"]=L[S]-(z?M[P?"width":"height"]:0),p.placement=_e(w),p.offsets.popper=J(M),p}var Uu={shift:{order:100,enabled:!0,fn:Fu},offset:{order:200,enabled:!0,fn:Du,offset:0},preventOverflow:{order:300,enabled:!0,fn:Vu,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Rr},arrow:{order:500,enabled:!0,fn:Ti,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:Hn,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:zu},hide:{order:800,enabled:!0,fn:Bu},computeStyle:{order:850,enabled:!0,fn:Oi,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Tt,onLoad:cn,gpuAcceleration:void 0}},qu={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Uu},Ei=function(){function p(w,S){var I=this,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x(this,p),this.scheduleUpdate=function(){return requestAnimationFrame(I.update)},this.update=o(this.update.bind(this)),this.options=W({},p.Defaults,M),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=w&&w.jquery?w[0]:w,this.popper=S&&S.jquery?S[0]:S,this.options.modifiers={},Object.keys(W({},p.Defaults.modifiers,M.modifiers)).forEach(function(P){I.options.modifiers[P]=W({},p.Defaults.modifiers[P]||{},M.modifiers?M.modifiers[P]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(P){return W({name:P},I.options.modifiers[P])}).sort(function(P,z){return P.order-z.order}),this.modifiers.forEach(function(P){P.enabled&&c(P.onLoad)&&P.onLoad(I.reference,I.popper,I.options,P,I.state)}),this.update();var L=this.options.eventsEnabled;L&&this.enableEventListeners(),this.state.eventsEnabled=L}return O(p,[{key:"update",value:function(){return Ae.call(this)}},{key:"destroy",value:function(){return xe.call(this)}},{key:"enableEventListeners",value:function(){return ln.call(this)}},{key:"disableEventListeners",value:function(){return Ce.call(this)}}]),p}();return Ei.Utils=(typeof window<"u"?window:Vs).PopperUtils,Ei.placements=wt,Ei.Defaults=qu,Ei})}(Wi)),Wi.exports}var _d=Sd();const Cd=oo(_d);let Ts=0,Hi=0;function wi(){Ts++}function Id(){Hi++}const Od={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let t={};return this.width&&(t.minWidth=`${this.width}px`),this.transfer&&(t["z-index"]=1060+this.tIndex),Object.assign({},this.styles,t)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){St(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new Cd(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),St(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(vd(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let t=this.popper.popper.getAttribute("x-placement"),e=t.split("-")[0],n=t.split("-")[1];t==="left"||t==="right"||(this.popper.popper.style.transformOrigin=e==="bottom"||e!=="top"&&n==="start"?"center top":"center bottom")},handleGetIndex(){return wi(),Ts},handleMouseenter(t){this.$emit("mouseenter",t)},handleMouseleave(t){this.$emit("mouseleave",t)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(t){this.$emit("click",t)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function Td(t,e,n,s,i,r){return R(),Fe(Wa,{to:"body",disabled:!n.transfer},[k(bn,{name:n.transitionName},{default:Ue(()=>[Xe(se("div",yr({class:["ivu-select-dropdown",r.mergedClass],ref:"drop",style:r.mergedStyle},t.$attrs,{onMouseenter:e[0]||(e[0]=(...a)=>r.handleMouseenter&&r.handleMouseenter(...a)),onMouseleave:e[1]||(e[1]=(...a)=>r.handleMouseleave&&r.handleMouseleave(...a)),onClick:e[2]||(e[2]=Be((...a)=>r.handleClick&&r.handleClick(...a),["stop"]))}),[Le(t.$slots,"default")],16),[[ot,n.visible]])]),_:3},8,["name"])],8,["disabled"])}const Ed=Je(Od,[["render",Td]]);function Ad(t){ke&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[t.i.locale]=t)}const Dc={i:{locale:"zh-CN",select:{placeholder:"请选择",noMatch:"无匹配数据",loading:"加载中"},table:{noDataText:"暂无数据",noFilteredDataText:"暂无筛选结果",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}},transfer:{titles:{source:"源列表",target:"目的列表"},filterPlaceholder:"请输入搜索内容",notFoundText:"列表为空"},modal:{okText:"确定",cancelText:"取消"},poptip:{okText:"确定",cancelText:"取消"},page:{prev:"上一页",next:"下一页",total:"共",item:"条",items:"条",prev5:"向前 5 页",next5:"向后 5 页",page:"条/页",goto:"跳至",p:"页"},rate:{star:"星",stars:"星"},time:{before:"前",after:"后",just:"刚刚",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"},tree:{emptyText:"暂无数据"},image:{zoomIn:"放大",zoomOut:"缩小",rotateLeft:"左旋转",rotateRight:"右旋转",fail:"失败",preview:"预览"}}};Ad(Dc);const Nd=/(%|)\{([0-9a-zA-Z_]+)\}/g;function $d(){function t(n,s){return Object.prototype.hasOwnProperty.call(n,s)}function e(n,...s){return s.length===1&&typeof s[0]=="object"&&(s=s[0]),(!s||!s.hasOwnProperty)&&(s={}),n===void 0?"":n.replace(Nd,(i,r,a,o)=>{let c;return n[o-1]==="{"&&n[o+i.length]==="}"?a:(c=t(s,a)?s[a]:null,c??"")})}return e}const Ld=$d();let Md=Dc,Pd=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments)};const jd=function(t,e){let n=Pd.apply(this,arguments);if(n!=null)return n;const s=t.split(".");let i=Md;for(let r=0,a=s.length;r<a;r++){const o=s[r];if(n=i[o],r===a-1)return Ld(n,e);if(!n)return"";i=n}return""},xi={methods:{t(...t){return jd.apply(this,t)}}},Rd={data(){return{globalConfig:{}}},created(){const t=He();this.globalConfig=t.appContext.config.globalProperties.$VIEWUI}},Ls="ivu-select",Dd={name:"iSelectHead",mixins:[xi,Rd],components:{Icon:st},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:Ls,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:t,multiple:e,showPlaceholder:n}=this;return[{[Ls+"-head-with-prefix"]:this.showPrefix,[Ls+"-placeholder"]:n&&!t,[Ls+"-selected-value"]:!n&&!e&&!t}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let t=!1;if(this.multiple)!this.values.length>0&&(t=!0);else{const e=this.values[0];(typeof e>"u"||String(e).trim()==="")&&(t=!this.remoteInitialLabel)}return t},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let t={};return this.multiple&&(this.showPlaceholder?t.width="100%":t.width=`${this.inputLength}px`),t},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const t=this.values[0];return t?t.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((e,n)=>this.maxTagCount===void 0||n<this.maxTagCount)},headCls(){return{[`${Ls}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const t=this.globalConfig;let e="ios-arrow-down";return t&&(t.select.customArrow?e="":t.select.arrow&&(e=t.select.arrow)),e},customArrowType(){const t=this.globalConfig;let e="";return t&&t.select.customArrow&&(e=t.select.customArrow),e},showPrefix(){const t=this.$slots.prefix&&this.$slots.prefix();let e=!1;return t&&(e=t[0].children.length>0),e||this.prefix},arrowSize(){const t=this.globalConfig;let e="";return t&&t.select.arrowSize&&(e=t.select.arrowSize),e}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(t){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(t)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(t){const e=t.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&e===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(t){this.$emit("on-enter"),this.showCreateItem&&t.stopPropagation()},onHeaderClick(t){this.filterable&&t.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([t]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof t>"u"||t===""||t===null?this.query="":this.query=t.label,St(()=>this.preventRemoteCall=!1)}},query(t){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",t)},queryProp(t){t!==this.query&&(this.query=t)}}},Vd={key:1,class:"ivu-tag ivu-tag-checked"},Fd={class:"ivu-tag-text ivu-select-max-tag"},Bd=["id","disabled","placeholder"];function zd(t,e,n,s,i,r){const a=mt("Icon");return R(),Z("div",{onClick:e[6]||(e[6]=(...o)=>r.onHeaderClick&&r.onHeaderClick(...o)),class:H(r.headCls)},[r.showPrefix?(R(),Z("span",{key:0,class:H([i.prefixCls+"-prefix"])},[Le(t.$slots,"prefix",{},()=>[n.prefix?(R(),Fe(a,{key:0,type:n.prefix},null,8,["type"])):ue("",!0)])],2)):ue("",!0),(R(!0),Z(gn,null,Fl(r.selectedMultiple,(o,c)=>(R(),Z("div",{class:"ivu-tag ivu-tag-checked",key:c},[se("span",{class:H(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":o.disabled}])},qe(o.tag!==void 0?o.tag:o.label),3),o.disabled?ue("",!0):(R(),Fe(a,{key:0,type:"ios-close",onClick:Be(l=>r.removeTag(o),["stop"])},null,8,["onClick"]))]))),128)),n.maxTagCount!==void 0&&n.values.length>n.maxTagCount?(R(),Z("div",Vd,[se("span",Fd,[n.maxTagPlaceholder?(R(),Z(gn,{key:0},[Wt(qe(n.maxTagPlaceholder(n.values.length-n.maxTagCount)),1)],64)):(R(),Z(gn,{key:1},[Wt("+ "+qe(n.values.length-n.maxTagCount)+"...",1)],64))])])):ue("",!0),Xe(se("span",{class:H(r.singleDisplayClasses)},qe(r.singleDisplayValue),3),[[ot,r.singleDisplayValue]]),n.filterable?Xe((R(),Z("input",{key:2,id:n.inputElementId,type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.query=o),disabled:n.disabled,class:H([i.prefixCls+"-input"]),placeholder:r.showPlaceholder?r.localePlaceholder:"",style:Qe(r.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[e[1]||(e[1]=(...o)=>r.resetInputState&&r.resetInputState(...o)),e[2]||(e[2]=Ft((...o)=>r.handleInputDelete&&r.handleInputDelete(...o),["delete"])),e[3]||(e[3]=Ft((...o)=>r.handleInputEnter&&r.handleInputEnter(...o),["enter"]))],onFocus:e[4]||(e[4]=(...o)=>r.onInputFocus&&r.onInputFocus(...o)),onBlur:e[5]||(e[5]=(...o)=>r.onInputBlur&&r.onInputBlur(...o)),ref:"input"},null,46,Bd)),[[Hu,i.query]]):ue("",!0),r.resetSelect?(R(),Fe(a,{key:3,type:"ios-close-circle",class:H([i.prefixCls+"-arrow"]),onClick:Be(r.onClear,["stop"])},null,8,["class","onClick"])):ue("",!0),!r.resetSelect&&!n.remote?(R(),Fe(a,{key:4,type:r.arrowType,custom:r.customArrowType,size:r.arrowSize,class:H([i.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):ue("",!0)],2)}const Ud=Je(Dd,[["render",zd]]),qd="click",Ws=Object.create(null),ir=Object.create(null),Wd=[Ws,ir],Vc=function(e,n,s){const{target:i}=s,r=function(c){const{el:l}=c;if(l!==i&&!l.contains(i)){const{binding:u}=c;u.modifiers.stop&&s.stopPropagation(),u.modifiers.prevent&&s.preventDefault(),u.value.call(e,s)}},a=function(c){return n[c].forEach(r)};Object.keys(n).forEach(a)},Fc=function(e){Vc(this,Ws,e)},Bc=function(e){Vc(this,ir,e)},Mo=function(e){return e?Fc:Bc},Hd=Object.defineProperties({},{$_captureInstances:{value:Ws},$_nonCaptureInstances:{value:ir},$_onCaptureEvent:{value:Fc},$_onNonCaptureEvent:{value:Bc},beforeMount:{value:function(e,n){if(typeof n.value!="function")throw new TypeError("Binding value must be a function.");let s;const i=n.modifiers;i.click?s="click":i.mousedown?s="mousedown":i.touchstart?s="touchstart":s=qd;const r=n.arg,a={...n,modifiers:{capture:!1,prevent:!1,stop:!1,...n.modifiers}},o=r?Ws:ir;Array.isArray(o[s])||(o[s]=[]),o[s].push({el:e,binding:a})===1&&typeof document=="object"&&document&&document.addEventListener(s,Mo(r),r)}},unmounted:{value:function(e){const n=function(r){return r.el!==e},s=function(r){const a=Object.keys(r);if(a.length){const o=r===Ws,c=function(u){const f=r[u].filter(n);f.length?r[u]=f:(typeof document=="object"&&document&&document.removeEventListener(u,Mo(o),o),delete r[u])};a.forEach(c)}};Wd.forEach(s)}},version:{enumerable:!0,value:"3.7.1"}}),qn={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let t=this.disabled;return!t&&this.FormInstance&&(t=this.FormInstance.disabled),t?!0:null}},methods:{handleFormItemChange(t,e){this.FormItemInstance&&(t==="blur"?this.FormItemInstance.formBlur(e):t==="change"&&this.FormItemInstance.formChange(e))}}},At="ivu-select",Kd=(t,e,n)=>{const s=JSON.stringify(t),i=JSON.stringify(e),r=JSON.stringify(n.map(a=>a.value));return s!==i||s!==r||r!==i},Po=300,Zd={name:"iSelect",mixins:[xi,qn],components:{Drop:Ed,SelectHead:Ud,Icon:st},directives:{clickOutside:Hd},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(t){return We(t,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.transfer===""?!1:t.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const t=He().appContext.config.globalProperties;return t.$VIEWUI?t.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(t=>typeof t!="number"&&!t?null:this.getOptionData(t)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const t=this.modelValue.map((e,n)=>({value:e,label:this.defaultLabel[n]}));setTimeout(()=>{this.values=t})}}},data(){return{prefixCls:At,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${At}`,{[`${At}-visible`]:this.visible,[`${At}-disabled`]:this.itemDisabled,[`${At}-multiple`]:this.multiple,[`${At}-single`]:!this.multiple,[`${At}-${this.size}`]:!!this.size}]},dropdownCls(){return{[At+"-dropdown-transfer"]:this.transfer,[At+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${At}-selection`]:!this.autoComplete,[`${At}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let t=!1;const{allowCreate:e,query:n,slotOptions:s}=this;return e&&n!==""&&(t=!0,(s||[]).find(r=>r.proxy&&r.proxy.showLabel===n)&&(t=!1)),t},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let t=!0;const e=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&e&&(t=!1),this.autoComplete&&e&&(t=!1),this.visible&&t},showNotFoundLabel(){const{loading:t,remote:e,slotOptions:n,hideNotFound:s}=this,i=n||[],r=i.find(a=>a.proxy.isShow);return(i.length===0||!r)&&(!e||e&&!t)&&!s},publicValue(){return this.multiple?this.values.map(t=>t.value):(this.values[0]||{}).value},canBeCleared(){const t=this.hasMouseHoverHead,e=!this.multiple&&!this.itemDisabled&&this.clearable;return t&&e&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(t){if(t){this.onQueryChange(t);return}t===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(t){const e=this.slotOptions.find(({props:i})=>i.value===t);if(!e)return null;const{optionLabel:n,disabled:s}=e.proxy||{};return{value:t,label:n,disabled:s}},getInitialValue(){const{multiple:t,remote:e,modelValue:n}=this;let s=Array.isArray(n)?n:[n];if(!t&&(typeof s[0]>"u"||String(s[0]).trim()===""&&!Number.isFinite(s[0]))&&(s=[]),e&&!t&&n){const i=this.getOptionData(n);this.query=i?i.label:String(n)}return s.filter(i=>!!i||i===0)},validateOption({children:t,elm:e,propsData:n}){const s=n.value,i=n.label||"",r=e&&e.textContent||(t||[]).reduce((c,l)=>{const u=l.elm?l.elm.textContent:l.text;return`${c} ${u}`},"")||"",a=this.filterByLabel?[i].toString():[s,i,r].toString(),o=this.query.toLowerCase().trim();return a.toLowerCase().includes(o)},toggleMenu(t,e){if(this.itemDisabled)return!1;this.visible=typeof e<"u"?e:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,Po)},onClickOutside(t){if(this.visible){if(t.type==="mousedown"){t.preventDefault();return}if(this.transfer){const e=this.$refs.dropdown.$refs.drop;if(e===t.target||e.contains(t.target))return}if(this.filterable){const e=this.$el.querySelector('input[type="text"]');this.caretPosition=e.selectionStart,St(()=>{const n=this.caretPosition===-1?e.value.length:this.caretPosition;e.setSelectionRange(n,n)})}this.autoComplete||t.stopPropagation(),t.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",t)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(t){const e=t.key||t.code,n=t.keyCode||t.which;if(!(e==="Backspace"||n===8))if(this.visible){if(t.preventDefault(),e==="Tab"&&t.stopPropagation(),e==="Escape"&&(t.stopPropagation(),this.hideMenu()),e==="ArrowUp"&&this.navigateOptions(-1),e==="ArrowDown"&&this.navigateOptions(1),e==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const s=this.slotOptions[this.focusIndex];if(s){const i=this.getOptionData(s.props.value);this.onOptionClick(i)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(t.key)&&this.toggleMenu(null,!0)},navigateOptions(t){const e=this.slotOptions,n=e.length-1;if(n<0)return;let s=this.focusIndex+t;s<0&&(s=n),s>n&&(s=0);let i,r=null;if(t>0){i=-1;for(let o=0;o<e.length;o++){const{proxy:c}=e[o];if(!c.disabled&&(i=o),c.isShow&&r===null)r=o;else if(!c.isShow){i=o;continue}if(i>=s)break}}else{i=e.length;for(let o=n;o>=0;o--){const{proxy:c}=e[o];if(!c.disabled&&(i=o),c.isShow&&r===null)r=o;else if(!c.isShow){i=o;continue}if(i<=s)break}}s=e[i].proxy.isShow?i:r,this.focusIndex=s},onOptionClick(t){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:n})=>n===t.value)?this.values=this.values.filter(({value:n})=>n!==t.value):this.values=this.values.concat(t),this.isFocused=!0):(this.query=String(t.label).trim(),this.values=[t],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(e=>e?e.props.value===t.value:!1),this.filterable){const e=this.$el.querySelector('input[type="text"]');this.autoComplete||St(()=>e.focus())}this.$emit("on-select",t),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},Po)},onQueryChange(t){if(this.isTyping=!0,t.length>0&&t!==this.query)if(ke&&this.autoComplete){let e=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=e}else this.visible=!0;this.query=t,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:t}){this.itemDisabled||(this.isFocused=t==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const t=this.query;this.$emit("on-create",t),this.query="";const e={value:t,label:t,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(e)})}},handleOnSelectSelected(t){this.onOptionClick(t)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(t){const{getInitialValue:e,isLocking:n,defaultLabel:s,remote:i,modelValue:r,values:a}=this,o=!!(s&&s.length);(r&&r.length||a.length||o)&&i&&t||n||(this.isLocking=!0,St(()=>{this.values=e().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(t){const{publicValue:e,values:n}=this;this.checkUpdateStatus(),t===""?(this.values=[],this.query=""):Kd(t,e,n)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(t,e){const n=JSON.stringify(t),s=JSON.stringify(e);let i=this.publicValue;if(n!==s&&i!==this.modelValue){let a=this.publicValue;this.labelInValue&&(this.multiple?a=this.values:a=this.values[0]),(Array.isArray(i)&&!i.length&&this.modelValue===null||i===void 0&&this.modelValue===null)&&(i=null),this.$emit("update:modelValue",i),this.$emit("on-change",a),this.handleFormItemChange("change",a)}},query(t){this.focusIndex=-1,this.$emit("on-query-change",t);const{remoteMethod:e,lastRemoteQuery:n}=this,i=e&&(t!==""&&(t!==n||!n))&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,i){const r=this.remoteMethod(t);this.initialLabel="",r&&r.then&&r.then(a=>{a&&(this.options=a)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),t!==""&&this.remote&&(this.lastRemoteQuery=t)},isFocused(t){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[n]=this.values;if(n&&this.filterable&&!this.multiple&&!t){const s=String(n.label||n.value).trim();s&&this.query!==s&&(this.preventRemoteCall=!0,this.query=s)}},focusIndex(t){if(!(t<0||this.autoComplete)&&this.slotOptions[t]){const n=this.slotOptions[t].proxy.$el,s=this.$refs.dropdown.$refs.drop;let i=n.getBoundingClientRect().bottom-s.getBoundingClientRect().bottom,r=n.getBoundingClientRect().top-s.getBoundingClientRect().top;i>0&&(s.scrollTop+=i),r<0&&(s.scrollTop+=r)}},dropVisible(t){t?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(t){this.$emit("on-open-change",t)}}},Gd=["tabindex"],Yd=["name","value"];function Jd(t,e,n,s,i,r){const a=mt("select-head"),o=mt("Icon"),c=mt("Drop"),l=Ku("click-outside");return Xe((R(),Z("div",{class:H(r.classes)},[se("div",{ref:"reference",class:H(r.selectionCls),tabindex:r.selectTabindex,onBlur:e[2]||(e[2]=(...u)=>r.toggleHeaderFocus&&r.toggleHeaderFocus(...u)),onFocus:e[3]||(e[3]=(...u)=>r.toggleHeaderFocus&&r.toggleHeaderFocus(...u)),onClick:e[4]||(e[4]=(...u)=>r.toggleMenu&&r.toggleMenu(...u)),onKeydown:[e[5]||(e[5]=Ft((...u)=>r.handleKeydown&&r.handleKeydown(...u),["esc"])),e[6]||(e[6]=Ft((...u)=>r.handleKeydown&&r.handleKeydown(...u),["enter"])),e[7]||(e[7]=Ft(Be((...u)=>r.handleKeydown&&r.handleKeydown(...u),["prevent"]),["up"])),e[8]||(e[8]=Ft(Be((...u)=>r.handleKeydown&&r.handleKeydown(...u),["prevent"]),["down"])),e[9]||(e[9]=Ft((...u)=>r.handleKeydown&&r.handleKeydown(...u),["tab"])),e[10]||(e[10]=Ft((...u)=>r.handleKeydown&&r.handleKeydown(...u),["delete"]))],onMouseenter:e[11]||(e[11]=u=>i.hasMouseHoverHead=!0),onMouseleave:e[12]||(e[12]=u=>i.hasMouseHoverHead=!1)},[Le(t.$slots,"input",{},()=>[se("input",{type:"hidden",name:n.name,value:r.publicValue},null,8,Yd),k(a,{ref:"selectHead",filterable:n.filterable,multiple:n.multiple,values:i.values,clearable:r.canBeCleared,prefix:n.prefix,disabled:t.itemDisabled,remote:r.remote,"input-element-id":n.elementId,"initial-label":i.initialLabel,placeholder:n.placeholder,"query-prop":i.query,"max-tag-count":n.maxTagCount,"max-tag-placeholder":n.maxTagPlaceholder,"allow-create":n.allowCreate,"show-create-item":r.showCreateItem,onOnQueryChange:r.onQueryChange,onOnInputFocus:e[0]||(e[0]=u=>i.isFocused=!0),onOnInputBlur:e[1]||(e[1]=u=>i.isFocused=!1),onOnClear:r.clearSingleSelect,onOnEnter:r.handleCreateItem},{prefix:Ue(()=>[Le(t.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,Gd),k(c,{ref:"dropdown",classes:r.dropdownCls,visible:r.dropVisible,placement:n.placement,eventsEnabled:n.eventsEnabled,transfer:n.transfer,"transition-name":"transition-drop"},{default:Ue(()=>[Xe(se("ul",{class:H([i.prefixCls+"-not-found"])},[se("li",null,qe(r.localeNotFoundText),1)],2),[[ot,r.showNotFoundLabel&&!n.allowCreate]]),!r.remote||r.remote&&!n.loading?(R(),Z("ul",{key:0,class:H(i.prefixCls+"-dropdown-list")},[r.showCreateItem?(R(),Z("li",{key:0,class:H(i.prefixCls+"-item"),onClick:e[13]||(e[13]=(...u)=>r.handleCreateItem&&r.handleCreateItem(...u))},[Wt(qe(i.query)+" ",1),k(o,{type:"md-return-left",class:H(i.prefixCls+"-item-enter")},null,8,["class"])],2)):ue("",!0),Le(t.$slots,"default")],2)):(R(),Z("ul",{key:1,class:H(i.prefixCls+"-dropdown-list")},[r.showCreateItem?(R(),Z("li",{key:0,class:H(i.prefixCls+"-item"),onClick:e[14]||(e[14]=(...u)=>r.handleCreateItem&&r.handleCreateItem(...u))},[Wt(qe(i.query)+" ",1),k(o,{type:"md-return-left",class:H(i.prefixCls+"-item-enter")},null,8,["class"])],2)):ue("",!0)],2)),Xe(se("ul",{class:H([i.prefixCls+"-loading"])},qe(r.localeLoadingText),3),[[ot,n.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[l,r.onClickOutside,n.capture],[l,r.onClickOutside,n.capture,{mousedown:!0}],[l,r.onClickOutside,n.capture,{touchstart:!0}]])}const is=Je(Zd,[["render",Jd]]),Pi="ivu-select-item",Qd={name:"iOption",componentName:"select-item",mixins:[qn],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:jc(6),instance:null}},computed:{classes(){return[`${Pi}`,{[`${Pi}-disabled`]:this.itemDisabled,[`${Pi}-selected`]:this.selected&&!this.autoComplete,[`${Pi}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const t=this.SelectInstance;let e=t.slotOptions||[];const n=t.focusIndex,s=t.$slots.default;if(this.autoComplete&&s){e=[];let r=s();for(;r.length>0;){const a=r.shift();a.type&&typeof a.type=="object"&&a.type.name==="iOption"?e.push(a):Array.isArray(a.children)&&(r=r.concat(a.children))}}const i=e[n];return i&&i.props&&i.props.value===this.value},isShow(){const t=this.SelectInstance,e=t.filterable,n=t.query.toLowerCase().trim(),s=t.filterByLabel,i=t.slotOptionsMap,{props:r}=i.get(this.value)||{props:{}},a=this.label||this.$el&&this.$el.textContent;let o=(a||r.value||"").toLowerCase();s&&(o=(a||"").toLowerCase());const c=o.includes(n);return!e||e&&(c||!t.filterQueryChange)||Aa(t.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(n=>n.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const t=this.SelectInstance,e=this.OptionGroupInstance,{id:n,value:s,instance:i}=this;if(e&&e.optionList.push({...i,id:n,tag:"option"}),t){t.slotOptions.push({...i,id:n,tag:"option"}),t.slotOptionsMap.set(s,i);const{modelValue:r}=t;(r&&r.length||Aa(r)==="number")&&t.lazyUpdateValue(!0)}},removeOption(){const t=this.OptionGroupInstance,e=this.SelectInstance,{id:n,value:s}=this;if(t){const i=t.optionList.findIndex(r=>r.id===n);i!==-1&&t.optionList.splice(i,1)}if(e){const i=this.SelectInstance,r=i.slotOptions.findIndex(a=>a.id===n);r!==-1&&i.slotOptions.splice(r,1),i.slotOptionsMap.has(s)&&i.slotOptionsMap.delete(s)}}},created(){this.instance=He()},mounted(){this.addOption();const t=Na(this,"iSelect");t&&(this.autoComplete=t.autoComplete)},beforeUnmount(){St(()=>{this.removeOption(),this.instance=null})}};function Xd(t,e,n,s,i,r){return Xe((R(),Z("li",{class:H(r.classes),onClick:e[0]||(e[0]=Be((...a)=>r.select&&r.select(...a),["stop"])),onMousedown:e[1]||(e[1]=Be(()=>{},["prevent"]))},[Le(t.$slots,"default",{},()=>[Wt(qe(r.showLabel),1)])],34)),[[ot,r.isShow]])}const Bt=Je(Qd,[["render",Xd]]),eh=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,th=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let Kr={},Dt;function nh(t,e=!1){if(!ke)return;const n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&Kr[n])return Kr[n];const s=window.getComputedStyle(t),i=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),r=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),a=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),c={sizingStyle:th.map(l=>`${l}:${s.getPropertyValue(l)}`).join(";"),paddingSize:r,borderSize:a,boxSizing:i};return e&&n&&(Kr[n]=c),c}function sh(t,e=null,n=null,s=!1){ke&&!Dt&&(Dt=document.createElement("textarea"),document.body.appendChild(Dt)),t.getAttribute("wrap")?Dt.setAttribute("wrap",t.getAttribute("wrap")):Dt.removeAttribute("wrap");let{paddingSize:i,borderSize:r,boxSizing:a,sizingStyle:o}=nh(t,s);Dt.setAttribute("style",`${o};${eh}`),Dt.value=t.value||t.placeholder||"";let c=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,u=Dt.scrollHeight,f;if(a==="border-box"?u=u+r:a==="content-box"&&(u=u-i),e!==null||n!==null){Dt.value=" ";let h=Dt.scrollHeight-i;e!==null&&(c=h*e,a==="border-box"&&(c=c+i+r),u=Math.max(c,u)),n!==null&&(l=h*n,a==="border-box"&&(l=l+i+r),f=u>l?"":"hidden",u=Math.min(l,u))}return n||(f="hidden"),{height:`${u}px`,minHeight:`${c}px`,maxHeight:`${l}px`,overflowY:f}}const Ge="ivu-input",ih={name:"Input",mixins:[qn],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(t){return We(t,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(t){return We(t,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:Ge,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let t=this.type;return t==="password"&&this.password&&this.showPassword&&(t="text"),t},prepend(){let t=!1;return this.type!=="textarea"&&(t=this.$slots.prepend!==void 0),t},append(){let t=!1;return this.type!=="textarea"&&(t=this.$slots.append!==void 0),t},showPrefix(){let t=!1;return this.type!=="textarea"&&(t=this.prefix!==""||this.$slots.prefix!==void 0),t},showSuffix(){let t=!1;return this.type!=="textarea"&&(t=this.suffix!==""||this.$slots.suffix!==void 0),t},wrapClasses(){return[`${Ge}-wrapper`,{[`${Ge}-wrapper-${this.size}`]:!!this.size,[`${Ge}-type-${this.type}`]:this.type,[`${Ge}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${Ge}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${Ge}-group-with-prepend`]:this.prepend,[`${Ge}-group-with-append`]:this.append||this.search&&this.enterButton,[`${Ge}-hide-icon`]:this.append,[`${Ge}-with-search`]:this.search&&this.enterButton,[`${Ge}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${Ge}`,{[`${Ge}-${this.size}`]:!!this.size,[`${Ge}-disabled`]:this.itemDisabled,[`${Ge}-no-border`]:!this.border,[`${Ge}-with-prefix`]:this.showPrefix,[`${Ge}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${Ge}`,{[`${Ge}-disabled`]:this.itemDisabled,[`${Ge}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const t={};let e=this.clearableIconOffset;return e&&(t.transform=`translateX(-${e}px)`),t}},methods:{handleEnter(t){this.$emit("on-enter",t),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(t){this.$emit("on-keydown",t)},handleKeypress(t){this.$emit("on-keypress",t)},handleKeyup(t){this.$emit("on-keyup",t)},handleIconClick(t){this.$emit("on-click",t)},handleFocus(t){this.$emit("on-focus",t)},handleBlur(t){this.$emit("on-blur",t),Na(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(t){t.type==="compositionstart"&&(this.isOnComposition=!0),t.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(t))},handleInput(t){if(this.isOnComposition)return;let e=t.target.value;this.number&&e!==""&&(e=Number.isNaN(Number(e))?e:Number(e)),this.$emit("update:modelValue",e),this.setCurrentValue(e),this.$emit("on-change",t)},handleChange(t){this.$emit("on-input-change",t)},setCurrentValue(t){t!==this.currentValue&&(St(()=>{this.resizeTextarea()}),this.currentValue=t,Na(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",t))},resizeTextarea(){const t=this.autosize;if(!t||this.type!=="textarea")return!1;const e=t.minRows,n=t.maxRows;this.textareaStyles=sh(this.$refs.textarea,e,n)},focus(t){const e=this.type==="textarea"?this.$refs.textarea:this.$refs.input;e.focus(t);const{cursor:n}=t||{};if(n){const s=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(s,s);break;default:e.setSelectionRange(0,s)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const t={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",t),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const t=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(t,t)},0)},handleCalcIconOffset(){const t=this.$el.querySelectorAll(".ivu-input-group-append")[0];t?this.clearableIconOffset=t.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(t){this.setCurrentValue(t)},type(){St(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){St(this.handleCalcIconOffset)}},rh={key:4,class:"ivu-input-suffix"},ah={key:5,class:"ivu-input-word-count"},oh={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},lh={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},ch=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],uh={key:0,class:"ivu-icon ivu-icon-ios-search"},fh={key:9,class:"ivu-input-prefix"},dh=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],hh={key:0,class:"ivu-input-word-count"};function ph(t,e,n,s,i,r){return R(),Z("div",{class:H(r.wrapClasses)},[n.type!=="textarea"?(R(),Z(gn,{key:0},[r.prepend?Xe((R(),Z("div",{key:0,class:H([i.prefixCls+"-group-prepend"])},[Le(t.$slots,"prepend")],2)),[[ot,i.slotReady]]):ue("",!0),n.clearable&&i.currentValue&&!t.itemDisabled?(R(),Z("i",{key:1,class:H(["ivu-icon",["ivu-icon-ios-close-circle",i.prefixCls+"-icon",i.prefixCls+"-icon-clear",i.prefixCls+"-icon-normal"]]),onClick:e[0]||(e[0]=(...a)=>r.handleClear&&r.handleClear(...a)),style:Qe(r.clearableStyles)},null,6)):n.icon?(R(),Z("i",{key:2,class:H(["ivu-icon",["ivu-icon-"+n.icon,i.prefixCls+"-icon",i.prefixCls+"-icon-normal"]]),onClick:e[1]||(e[1]=(...a)=>r.handleIconClick&&r.handleIconClick(...a))},null,2)):n.search&&n.enterButton===!1?(R(),Z("i",{key:3,class:H(["ivu-icon ivu-icon-ios-search",[i.prefixCls+"-icon",i.prefixCls+"-icon-normal",i.prefixCls+"-search-icon"]]),onClick:e[2]||(e[2]=(...a)=>r.handleSearch&&r.handleSearch(...a))},null,2)):r.showSuffix?(R(),Z("span",rh,[Le(t.$slots,"suffix",{},()=>[n.suffix?(R(),Z("i",{key:0,class:H(["ivu-icon",["ivu-icon-"+n.suffix]])},null,2)):ue("",!0)])])):n.showWordLimit?(R(),Z("span",ah,qe(r.textLength)+"/"+qe(r.upperLimit),1)):n.password?(R(),Z("span",{key:6,class:"ivu-input-suffix",onClick:e[3]||(e[3]=(...a)=>r.handleToggleShowPassword&&r.handleToggleShowPassword(...a))},[i.showPassword?(R(),Z("i",oh)):(R(),Z("i",lh))])):ue("",!0),k(bn,{name:"fade"},{default:Ue(()=>[n.icon?ue("",!0):(R(),Z("i",{key:0,class:H(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[i.prefixCls+"-icon",i.prefixCls+"-icon-validate"]])},null,2))]),_:1}),se("input",{id:n.elementId,autocomplete:n.autocomplete,spellcheck:n.spellcheck,ref:"input",type:r.currentType,class:H(r.inputClasses),placeholder:n.placeholder,disabled:t.itemDisabled,maxlength:n.maxlength,readonly:n.readonly,name:n.name,value:i.currentValue,number:n.number,autofocus:n.autofocus,onKeyup:[e[4]||(e[4]=Ft((...a)=>r.handleEnter&&r.handleEnter(...a),["enter"])),e[5]||(e[5]=(...a)=>r.handleKeyup&&r.handleKeyup(...a))],onKeypress:e[6]||(e[6]=(...a)=>r.handleKeypress&&r.handleKeypress(...a)),onKeydown:e[7]||(e[7]=(...a)=>r.handleKeydown&&r.handleKeydown(...a)),onFocus:e[8]||(e[8]=(...a)=>r.handleFocus&&r.handleFocus(...a)),onBlur:e[9]||(e[9]=(...a)=>r.handleBlur&&r.handleBlur(...a)),onCompositionstart:e[10]||(e[10]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onCompositionupdate:e[11]||(e[11]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onCompositionend:e[12]||(e[12]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onInput:e[13]||(e[13]=(...a)=>r.handleInput&&r.handleInput(...a)),onChange:e[14]||(e[14]=(...a)=>r.handleChange&&r.handleChange(...a))},null,42,ch),r.append?Xe((R(),Z("div",{key:7,class:H([i.prefixCls+"-group-append"])},[Le(t.$slots,"append")],2)),[[ot,i.slotReady]]):n.search&&n.enterButton?(R(),Z("div",{key:8,class:H([i.prefixCls+"-group-append",i.prefixCls+"-search"]),onClick:e[15]||(e[15]=(...a)=>r.handleSearch&&r.handleSearch(...a))},[n.enterButton===!0?(R(),Z("i",uh)):(R(),Z(gn,{key:1},[Wt(qe(n.enterButton),1)],64))],2)):r.showPrefix?(R(),Z("span",fh,[Le(t.$slots,"prefix",{},()=>[n.prefix?(R(),Z("i",{key:0,class:H(["ivu-icon",["ivu-icon-"+n.prefix]])},null,2)):ue("",!0)])])):ue("",!0)],64)):(R(),Z(gn,{key:1},[se("textarea",{id:n.elementId,wrap:n.wrap,autocomplete:n.autocomplete,spellcheck:n.spellcheck,ref:"textarea",class:H(r.textareaClasses),style:Qe(i.textareaStyles),placeholder:n.placeholder,disabled:t.itemDisabled,rows:n.rows,maxlength:n.maxlength,readonly:n.readonly,name:n.name,value:i.currentValue,autofocus:n.autofocus,onKeyup:[e[16]||(e[16]=Ft((...a)=>r.handleEnter&&r.handleEnter(...a),["enter"])),e[17]||(e[17]=(...a)=>r.handleKeyup&&r.handleKeyup(...a))],onKeypress:e[18]||(e[18]=(...a)=>r.handleKeypress&&r.handleKeypress(...a)),onKeydown:e[19]||(e[19]=(...a)=>r.handleKeydown&&r.handleKeydown(...a)),onFocus:e[20]||(e[20]=(...a)=>r.handleFocus&&r.handleFocus(...a)),onBlur:e[21]||(e[21]=(...a)=>r.handleBlur&&r.handleBlur(...a)),onCompositionstart:e[22]||(e[22]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onCompositionupdate:e[23]||(e[23]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onCompositionend:e[24]||(e[24]=(...a)=>r.handleComposition&&r.handleComposition(...a)),onInput:e[25]||(e[25]=(...a)=>r.handleInput&&r.handleInput(...a))},"            ",46,dh),n.showWordLimit?(R(),Z("span",hh,qe(r.textLength)+"/"+qe(r.upperLimit),1)):ue("",!0)],64))],2)}const gs=Je(ih,[["render",ph]]),fn="ivu-btn",me={name:"Button",mixins:[Rc,qn],components:{Icon:st},emits:["click"],props:{type:{validator(t){return We(t,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(t){return We(t,["circle","circle-outline"])}},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(t){return We(t,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${fn}`,`${fn}-${this.type}`,{[`${fn}-long`]:this.long,[`${fn}-${this.shape}`]:!!this.shape,[`${fn}-${this.size}`]:this.size!=="default",[`${fn}-loading`]:this.loading!=null&&this.loading,[`${fn}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${fn}-ghost`]:this.ghost}]},isHrefPattern(){const{to:t}=this;return!!t},tagName(){const{isHrefPattern:t}=this;return t?"a":"button"},tagProps(){const{isHrefPattern:t}=this;if(t){const{linkUrl:e,target:n}=this;return{href:e,target:n}}else{const{htmlType:e}=this;return{type:e}}}},methods:{handleClickLink(t){this.$emit("click",t);const e=t.ctrlKey||t.metaKey;this.handleCheckClick(t,e)}},render(){let t;this.tagName==="button"?t="button":this.tagName==="a"&&(t="a");let e=[];return this.loading&&e.push(Ne(st,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&e.push(Ne(st,{type:this.icon,custom:this.customIcon})),this.$slots.default&&e.push(Ne("span",{ref:"slot"},this.$slots.default())),Ne(t,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},e)}},ji="ivu-btn-group",mh={name:"ButtonGroup",props:{size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},shape:{validator(t){return We(t,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${ji}`,{[`${ji}-${this.size}`]:!!this.size,[`${ji}-${this.shape}`]:!!this.shape,[`${ji}-vertical`]:this.vertical}]}}};function gh(t,e,n,s,i,r){return R(),Z("div",{class:H(r.classes)},[Le(t.$slots,"default")],2)}const ht=Je(mh,[["render",gh]]),Ms="ivu-radio-group";let yh=0;const bh=Date.now(),vh=()=>`ivuRadioGroup_${bh}_${yh++}`,wh={name:"RadioGroup",mixins:[qn],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},type:{validator(t){return We(t,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:vh},buttonStyle:{validator(t){return We(t,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${Ms}`,{[`${Ms}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${Ms}-${this.type}`]:!!this.type,[`${Ms}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${Ms}-vertical`]:this.vertical}]}},methods:{change(t){this.currentValue=t.value,this.$emit("update:modelValue",t.value),this.$emit("on-change",t.value),this.handleFormItemChange("change",t.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},xh=["name"];function kh(t,e,n,s,i,r){return R(),Z("div",{class:H(r.classes),name:n.name},[Le(t.$slots,"default")],10,xh)}const jo=Je(wh,[["render",kh]]),ft="ivu-radio",Sh={name:"Radio",mixins:[qn],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${ft}-wrapper`,{[`${ft}-group-item`]:this.group,[`${ft}-wrapper-checked`]:this.currentValue,[`${ft}-wrapper-disabled`]:this.itemDisabled,[`${ft}-${this.size}`]:!!this.size,[`${ft}-focus`]:this.focusWrapper,[`${ft}-border`]:this.border}]},radioClasses(){return[`${ft}`,{[`${ft}-checked`]:this.currentValue,[`${ft}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${ft}-inner`,{[`${ft}-focus`]:this.focusInner}]},inputClasses(){return`${ft}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(t){if(this.itemDisabled)return!1;const n=t.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",n),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",n),this.handleFormItemChange("change",n))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(t){if(!(t===this.trueValue||t===this.falseValue))throw"Value should be trueValue or falseValue."}}},_h=["disabled","checked","name"];function Ch(t,e,n,s,i,r){return R(),Z("label",{class:H(r.wrapClasses)},[se("span",{class:H(r.radioClasses)},[se("span",{class:H(r.innerClasses)},null,2),se("input",{type:"radio",class:H(r.inputClasses),disabled:t.itemDisabled,checked:r.currentValue,name:i.groupName,onChange:e[0]||(e[0]=(...a)=>r.change&&r.change(...a)),onFocus:e[1]||(e[1]=(...a)=>r.onFocus&&r.onFocus(...a)),onBlur:e[2]||(e[2]=(...a)=>r.onBlur&&r.onBlur(...a))},null,42,_h)],2),Le(t.$slots,"default",{},()=>[Wt(qe(n.label),1)])],2)}const Gn=Je(Sh,[["render",Ch]]);var Ki={exports:{}},Ih=Ki.exports,Ro;function Oh(){return Ro||(Ro=1,function(t,e){(function(n,s){t.exports=s()})(Ih,function(){var n=1e3,s=6e4,i=36e5,r="millisecond",a="second",o="minute",c="hour",l="day",u="week",f="month",h="quarter",m="year",v="date",d="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G){var F=["th","st","nd","rd"],U=G%100;return"["+G+(F[(U-20)%10]||F[U]||F[0])+"]"}},A=function(G,F,U){var B=String(G);return!B||B.length>=F?G:""+Array(F+1-B.length).join(U)+G},$={s:A,z:function(G){var F=-G.utcOffset(),U=Math.abs(F),B=Math.floor(U/60),D=U%60;return(F<=0?"+":"-")+A(B,2,"0")+":"+A(D,2,"0")},m:function G(F,U){if(F.date()<U.date())return-G(U,F);var B=12*(U.year()-F.year())+(U.month()-F.month()),D=F.clone().add(B,f),X=U-D<0,ie=F.clone().add(B+(X?-1:1),f);return+(-(B+(U-D)/(X?D-ie:ie-D))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:f,y:m,w:u,d:l,D:v,h:c,m:o,s:a,ms:r,Q:h}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},y="en",g={};g[y]=T;var C="$isDayjsObject",_=function(G){return G instanceof W||!(!G||!G[C])},x=function G(F,U,B){var D;if(!F)return y;if(typeof F=="string"){var X=F.toLowerCase();g[X]&&(D=X),U&&(g[X]=U,D=X);var ie=F.split("-");if(!D&&ie.length>1)return G(ie[0])}else{var ye=F.name;g[ye]=F,D=ye}return!B&&D&&(y=D),D||!B&&y},O=function(G,F){if(_(G))return G.clone();var U=typeof F=="object"?F:{};return U.date=G,U.args=arguments,new W(U)},N=$;N.l=x,N.i=_,N.w=function(G,F){return O(G,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var W=function(){function G(U){this.$L=x(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[C]=!0}var F=G.prototype;return F.parse=function(U){this.$d=function(B){var D=B.date,X=B.utc;if(D===null)return new Date(NaN);if(N.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var ie=D.match(b);if(ie){var ye=ie[2]-1||0,be=(ie[7]||"0").substring(0,3);return X?new Date(Date.UTC(ie[1],ye,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,be)):new Date(ie[1],ye,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,be)}}return new Date(D)}(U),this.init()},F.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==d},F.isSame=function(U,B){var D=O(U);return this.startOf(B)<=D&&D<=this.endOf(B)},F.isAfter=function(U,B){return O(U)<this.startOf(B)},F.isBefore=function(U,B){return this.endOf(B)<O(U)},F.$g=function(U,B,D){return N.u(U)?this[B]:this.set(D,U)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(U,B){var D=this,X=!!N.u(B)||B,ie=N.p(U),ye=function(Ae,V){var ne=N.w(D.$u?Date.UTC(D.$y,V,Ae):new Date(D.$y,V,Ae),D);return X?ne:ne.endOf(l)},be=function(Ae,V){return N.w(D.toDate()[Ae].apply(D.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(V)),D)},we=this.$W,_e=this.$M,Ie=this.$D,Pe="set"+(this.$u?"UTC":"");switch(ie){case m:return X?ye(1,0):ye(31,11);case f:return X?ye(1,_e):ye(0,_e+1);case u:var Se=this.$locale().weekStart||0,oe=(we<Se?we+7:we)-Se;return ye(X?Ie-oe:Ie+(6-oe),_e);case l:case v:return be(Pe+"Hours",0);case c:return be(Pe+"Minutes",1);case o:return be(Pe+"Seconds",2);case a:return be(Pe+"Milliseconds",3);default:return this.clone()}},F.endOf=function(U){return this.startOf(U,!1)},F.$set=function(U,B){var D,X=N.p(U),ie="set"+(this.$u?"UTC":""),ye=(D={},D[l]=ie+"Date",D[v]=ie+"Date",D[f]=ie+"Month",D[m]=ie+"FullYear",D[c]=ie+"Hours",D[o]=ie+"Minutes",D[a]=ie+"Seconds",D[r]=ie+"Milliseconds",D)[X],be=X===l?this.$D+(B-this.$W):B;if(X===f||X===m){var we=this.clone().set(v,1);we.$d[ye](be),we.init(),this.$d=we.set(v,Math.min(this.$D,we.daysInMonth())).$d}else ye&&this.$d[ye](be);return this.init(),this},F.set=function(U,B){return this.clone().$set(U,B)},F.get=function(U){return this[N.p(U)]()},F.add=function(U,B){var D,X=this;U=Number(U);var ie=N.p(B),ye=function(_e){var Ie=O(X);return N.w(Ie.date(Ie.date()+Math.round(_e*U)),X)};if(ie===f)return this.set(f,this.$M+U);if(ie===m)return this.set(m,this.$y+U);if(ie===l)return ye(1);if(ie===u)return ye(7);var be=(D={},D[o]=s,D[c]=i,D[a]=n,D)[ie]||1,we=this.$d.getTime()+U*be;return N.w(we,this)},F.subtract=function(U,B){return this.add(-1*U,B)},F.format=function(U){var B=this,D=this.$locale();if(!this.isValid())return D.invalidDate||d;var X=U||"YYYY-MM-DDTHH:mm:ssZ",ie=N.z(this),ye=this.$H,be=this.$m,we=this.$M,_e=D.weekdays,Ie=D.months,Pe=D.meridiem,Se=function(V,ne,xe,Ke){return V&&(V[ne]||V(B,X))||xe[ne].slice(0,Ke)},oe=function(V){return N.s(ye%12||12,V,"0")},Ae=Pe||function(V,ne,xe){var Ke=V<12?"AM":"PM";return xe?Ke.toLowerCase():Ke};return X.replace(E,function(V,ne){return ne||function(xe){switch(xe){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return we+1;case"MM":return N.s(we+1,2,"0");case"MMM":return Se(D.monthsShort,we,Ie,3);case"MMMM":return Se(Ie,we);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return Se(D.weekdaysMin,B.$W,_e,2);case"ddd":return Se(D.weekdaysShort,B.$W,_e,3);case"dddd":return _e[B.$W];case"H":return String(ye);case"HH":return N.s(ye,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return Ae(ye,be,!0);case"A":return Ae(ye,be,!1);case"m":return String(be);case"mm":return N.s(be,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return ie}return null}(V)||ie.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(U,B,D){var X,ie=this,ye=N.p(B),be=O(U),we=(be.utcOffset()-this.utcOffset())*s,_e=this-be,Ie=function(){return N.m(ie,be)};switch(ye){case m:X=Ie()/12;break;case f:X=Ie();break;case h:X=Ie()/3;break;case u:X=(_e-we)/6048e5;break;case l:X=(_e-we)/864e5;break;case c:X=_e/i;break;case o:X=_e/s;break;case a:X=_e/n;break;default:X=_e}return D?X:N.a(X)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return g[this.$L]},F.locale=function(U,B){if(!U)return this.$L;var D=this.clone(),X=x(U,B,!0);return X&&(D.$L=X),D},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},G}(),J=W.prototype;return O.prototype=J,[["$ms",r],["$s",a],["$m",o],["$H",c],["$W",l],["$M",f],["$y",m],["$D",v]].forEach(function(G){J[G[1]]=function(F){return this.$g(F,G[0],G[1])}}),O.extend=function(G,F){return G.$i||(G(F,W,O),G.$i=!0),O},O.locale=x,O.isDayjs=_,O.unix=function(G){return O(1e3*G)},O.en=g[y],O.Ls=g,O.p={},O})}(Ki)),Ki.exports}Oh();const Yt="ivu-col";function Th(t){return typeof t=="number"?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}const Eh={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let t=[`${Yt}`,{[`${Yt}-span-${this.span}`]:this.span,[`${Yt}-order-${this.order}`]:this.order,[`${Yt}-offset-${this.offset}`]:this.offset,[`${Yt}-push-${this.push}`]:this.push,[`${Yt}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(e=>{if(typeof this[e]=="number")t.push(`${Yt}-span-${e}-${this[e]}`);else if(typeof this[e]=="object"){let n=this[e];Object.keys(n).forEach(s=>{t.push(s!=="span"?`${Yt}-${e}-${s}-${n[s]}`:`${Yt}-span-${e}-${n[s]}`)})}}),t},styles(){let t={};return this.gutter!==0&&(t={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(t.flex=Th(this.flex)),t}}};function Ah(t,e,n,s,i,r){return R(),Z("div",{class:H(r.classes),style:Qe(r.styles)},[Le(t.$slots,"default")],6)}const Ut=Je(Eh,[["render",Ah]]),On="ivu-row",Nh={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(t){return We(t,["flex"])}},align:{validator(t){return We(t,["top","middle","bottom"])}},justify:{validator(t){return We(t,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${On}`,{[`${On}-${this.type}`]:!!this.type,[`${On}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${On}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${On}-${this.align}`]:!!this.align,[`${On}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${On}-no-wrap`]:!this.wrap}]},styles(){let t={};return this.gutter!==0&&(t={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),t}}};function $h(t,e,n,s,i,r){return R(),Z("div",{class:H(r.classes),style:Qe(r.styles)},[Le(t.$slots,"default")],6)}const ki=Je(Nh,[["render",$h]]),Tn="ivu-card",Do=16,Lh={name:"Card",mixins:[Rc],components:{Icon:st},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:Do},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${Tn}`,{[`${Tn}-bordered`]:this.bordered&&!this.shadow,[`${Tn}-dis-hover`]:this.disHover||this.shadow,[`${Tn}-shadow`]:this.shadow}]},headClasses(){return`${Tn}-head`},extraClasses(){return`${Tn}-extra`},bodyClasses(){return`${Tn}-body`},bodyStyles(){return this.padding!==Do?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:t}=this;return!!t},tagName(){const{isHrefPattern:t}=this;return t?"a":"div"},tagProps(){const{isHrefPattern:t}=this;if(t){const{linkUrl:e,target:n}=this;return{href:e,target:n}}else return{}}},methods:{handleClickLink(t){if(!this.isHrefPattern)return;const e=t.ctrlKey||t.metaKey;this.handleCheckClick(t,e)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},Mh={key:0};function Ph(t,e,n,s,i,r){const a=mt("Icon");return R(),Fe(Zu(r.tagName),yr({class:r.classes},r.tagProps,{onClick:r.handleClickLink}),{default:Ue(()=>[i.showHead?(R(),Z("div",{key:0,class:H(r.headClasses)},[Le(t.$slots,"title",{},()=>[n.title?(R(),Z("p",Mh,[n.icon?(R(),Fe(a,{key:0,type:n.icon},null,8,["type"])):ue("",!0),se("span",null,qe(n.title),1)])):ue("",!0)])],2)):ue("",!0),i.showExtra?(R(),Z("div",{key:1,class:H(r.extraClasses)},[Le(t.$slots,"extra")],2)):ue("",!0),se("div",{class:H(r.bodyClasses),style:Qe(r.bodyStyles)},[Le(t.$slots,"default")],6)]),_:3},16,["class","onClick"])}const yt=Je(Lh,[["render",Ph]]),dt="ivu-checkbox",jh={name:"Checkbox",mixins:[qn],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${dt}-wrapper`,{[`${dt}-group-item`]:this.group,[`${dt}-wrapper-checked`]:this.currentValue,[`${dt}-wrapper-disabled`]:this.itemDisabled,[`${dt}-${this.size}`]:!!this.size,[`${dt}-border`]:this.border}]},checkboxClasses(){return[`${dt}`,{[`${dt}-checked`]:this.currentValue,[`${dt}-disabled`]:this.itemDisabled,[`${dt}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${dt}-inner`,{[`${dt}-focus`]:this.focusInner}]},inputClasses(){return`${dt}-input`},currentValue(){if(this.CheckboxGroupInstance){let t=this.CheckboxGroupInstance.modelValue;return t=Array.isArray(t)?t:[],t.indexOf(this.label)>=0}else return this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(t){if(this.itemDisabled)return!1;const n=t.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",n),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",n),this.handleFormItemChange("change",n))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(t){if(!(t===this.trueValue||t===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(t){this.model=t||[]},immediate:!0}}},Rh=["disabled","value","name"],Dh=["disabled","checked","name"],Vh={key:0,class:"ivu-checkbox-label-text"};function Fh(t,e,n,s,i,r){return R(),Z("label",{class:H(r.wrapClasses)},[se("span",{class:H(r.checkboxClasses)},[se("span",{class:H(r.innerClasses)},null,2),r.group?Xe((R(),Z("input",{key:0,type:"checkbox",class:H(r.inputClasses),disabled:t.itemDisabled,value:n.label,"onUpdate:modelValue":e[0]||(e[0]=a=>i.model=a),name:n.name,onChange:e[1]||(e[1]=(...a)=>r.change&&r.change(...a)),onFocus:e[2]||(e[2]=(...a)=>r.onFocus&&r.onFocus(...a)),onBlur:e[3]||(e[3]=(...a)=>r.onBlur&&r.onBlur(...a))},null,42,Rh)),[[Gu,i.model]]):(R(),Z("input",{key:1,type:"checkbox",class:H(r.inputClasses),disabled:t.itemDisabled,checked:r.currentValue,name:n.name,onChange:e[4]||(e[4]=(...a)=>r.change&&r.change(...a)),onFocus:e[5]||(e[5]=(...a)=>r.onFocus&&r.onFocus(...a)),onBlur:e[6]||(e[6]=(...a)=>r.onBlur&&r.onBlur(...a))},null,42,Dh))],2),i.showSlot?(R(),Z("span",Vh,[Le(t.$slots,"default",{},()=>[Wt(qe(n.label),1)])])):ue("",!0)],2)}const zc=Je(jh,[["render",Fh]]);var Bh={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};zh(Bh);function zh(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}const Uh={name:"RenderCell",props:{render:Function},render(){return this.render(Ne)}},qh={components:{RenderCell:Uh},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(t){this.type==="message"&&(t.style.height=t.scrollHeight+"px")},handleLeave(t){this.type==="message"&&ke&&document.getElementsByClassName("ivu-message-notice").length!==1&&(t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let t=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:t?t.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},Wh=["innerHTML"],Hh=["innerHTML"];function Kh(t,e,n,s,i,r){const a=mt("render-cell");return R(),Z("div",{class:H(r.classes),style:Qe(n.styles)},[n.type==="notice"?(R(),Z(gn,{key:0},[se("div",{class:H(r.contentClasses),ref:"content",innerHTML:n.content},null,10,Wh),se("div",{class:H(r.contentWithIcon)},[k(a,{render:r.renderFunc},null,8,["render"])],2),n.closable?(R(),Z("a",{key:0,class:H([r.baseClass+"-close"]),onClick:e[0]||(e[0]=(...o)=>r.close&&r.close(...o))},e[2]||(e[2]=[se("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)]),2)):ue("",!0)],64)):ue("",!0),n.type==="message"?(R(),Z("div",{key:1,class:H(r.messageContentClasses),ref:"content"},[se("div",{class:H([r.baseClass+"-content-text"]),innerHTML:n.content},null,10,Hh),se("div",{class:H([r.baseClass+"-content-text"])},[k(a,{render:r.renderFunc},null,8,["render"])],2),n.closable?(R(),Z("a",{key:0,class:H([r.baseClass+"-close"]),onClick:e[1]||(e[1]=(...o)=>r.close&&r.close(...o))},e[3]||(e[3]=[se("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)]),2)):ue("",!0)],2)):ue("",!0)],6)}const Zh=Je(qh,[["render",Kh]]),Gh="ivu-notification";let Yh=0;const Jh=Date.now();function Qh(){return"ivuNotification_"+Jh+"_"+Yh++}const Xh={components:{Notice:Zh},props:{prefixCls:{type:String,default:Gh},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let t=Object.assign({},this.styles);return t["z-index"]=1010+this.tIndex,t}},methods:{add(t){const e=t.name||Qh();let n=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:e},t);this.notices.push(n),this.tIndex=this.handleGetIndex()},close(t){const e=this.notices;for(let n=0;n<e.length;n++)if(e[n].name===t){this.notices.splice(n,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return wi(),Ts}}};function ep(t,e,n,s,i,r){const a=mt("Notice");return R(),Z("div",{class:H(r.classes),style:Qe(r.wrapStyles)},[k(Yu,{name:n.transitionName,appear:""},{default:Ue(()=>[(R(!0),Z(gn,null,Fl(i.notices,o=>(R(),Fe(a,{key:o.name,"prefix-cls":n.prefixCls,styles:o.styles,type:o.type,content:o.content,duration:o.duration,render:o.render,"has-title":o.hasTitle,withIcon:o.withIcon,closable:o.closable,name:o.name,"transition-name":o.transitionName,background:o.background,"msg-type":o.msgType,"on-close":o.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}const $a=Je(Xh,[["render",ep]]);$a.newInstance=t=>{if(!ke)return;const e=t||{};let n=null;const s=mi({render(){return Ne($a,Object.assign({ref:"notification"},e))},created(){n=He()}}),i=document.createElement("div");document.body.appendChild(i),s.mount(i);const r=n.refs.notification;return{notice(a){r.add(a)},remove(a){r.close(a)},component:r,destroy(a){r.closeAll(),ke&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(a)[0])},500)}}};const La="ivu-message",Vo="ivu-icon",Fo="ivu_message_key_",fs={top:24,duration:1.5,background:!1};let Zi,Bo=1;const tp={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},Uc="move-up";function qc(){return Zi=Zi||$a.newInstance({prefixCls:La,styles:{top:`${fs.top}px`},transitionName:Uc}),Zi}function np(t="",e=fs.duration,n,s=function(){},i=!1,r=function(){},a=fs.background){const o=tp[n],c=n==="loading"?" ivu-load-loop":"";let l=qc();return l.notice({name:`${Fo}${Bo}`,duration:e,styles:{},transitionName:Uc,content:`
            <div class="${La}-custom-content ${La}-${n}">
                <i class="${Vo} ${Vo}-${o} ${c}"></i>
                <span>${t}</span>
            </div>
        `,render:r,onClose:s,closable:i,type:"message",msgType:n,background:a}),function(){let u=Bo++;return function(){l.remove(`${Fo}${u}`)}}()}const kt={name:"Message",info(t){return this.message("info",t)},success(t){return this.message("success",t)},warning(t){return this.message("warning",t)},error(t){return this.message("error",t)},loading(t){return this.message("loading",t)},message(t,e){return typeof e=="string"&&(e={content:e}),np(e.content,e.duration,t,e.onClose,e.closable,e.render,e.background)},config(t){(t.top||t.top===0)&&(fs.top=t.top),(t.duration||t.duration===0)&&(fs.duration=t.duration),t.background&&(fs.background=t.background)},destroy(){let t=qc();Zi=null,t.destroy("ivu-message")}};function sp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fs={exports:{}},ip=Fs.exports,zo;function rp(){return zo||(zo=1,function(t,e){(function(n,s){t.exports=s(sp,e,t)})(ip,function(n,s,i){var r=function(a,o,c,l,u,f){function h($){var y,g,C,_,x,O,N=$<0;if($=Math.abs($).toFixed(d.decimals),$+="",y=$.split("."),g=y[0],C=y.length>1?d.options.decimal+y[1]:"",d.options.useGrouping){for(_="",x=0,O=g.length;x<O;++x)x!==0&&x%3===0&&(_=d.options.separator+_),_=g[O-x-1]+_;g=_}return d.options.numerals.length&&(g=g.replace(/[0-9]/g,function(W){return d.options.numerals[+W]}),C=C.replace(/[0-9]/g,function(W){return d.options.numerals[+W]})),(N?"-":"")+d.options.prefix+g+C+d.options.suffix}function m($,y,g,C){return g*(-Math.pow(2,-10*$/C)+1)*1024/1023+y}function v($){return typeof $=="number"&&!isNaN($)}var d=this;if(d.version=function(){return"1.9.3"},d.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:m,formattingFn:h,prefix:"",suffix:"",numerals:[]},f&&typeof f=="object")for(var b in d.options)f.hasOwnProperty(b)&&f[b]!==null&&(d.options[b]=f[b]);d.options.separator===""?d.options.useGrouping=!1:d.options.separator=""+d.options.separator;for(var E=0,T=["webkit","moz","ms","o"],A=0;A<T.length&&!window.requestAnimationFrame;++A)window.requestAnimationFrame=window[T[A]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[T[A]+"CancelAnimationFrame"]||window[T[A]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function($,y){var g=new Date().getTime(),C=Math.max(0,16-(g-E)),_=window.setTimeout(function(){$(g+C)},C);return E=g+C,_}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function($){clearTimeout($)}),d.initialize=function(){return!!d.initialized||(d.error="",d.d=typeof a=="string"?document.getElementById(a):a,d.d?(d.startVal=Number(o),d.endVal=Number(c),v(d.startVal)&&v(d.endVal)?(d.decimals=Math.max(0,l||0),d.dec=Math.pow(10,d.decimals),d.duration=1e3*Number(u)||2e3,d.countDown=d.startVal>d.endVal,d.frameVal=d.startVal,d.initialized=!0,!0):(d.error="[CountUp] startVal ("+o+") or endVal ("+c+") is not a number",!1)):(d.error="[CountUp] target is null or undefined",!1))},d.printValue=function($){var y=d.options.formattingFn($);d.d.tagName==="INPUT"?this.d.value=y:d.d.tagName==="text"||d.d.tagName==="tspan"?this.d.textContent=y:this.d.innerHTML=y},d.count=function($){d.startTime||(d.startTime=$),d.timestamp=$;var y=$-d.startTime;d.remaining=d.duration-y,d.options.useEasing?d.countDown?d.frameVal=d.startVal-d.options.easingFn(y,0,d.startVal-d.endVal,d.duration):d.frameVal=d.options.easingFn(y,d.startVal,d.endVal-d.startVal,d.duration):d.countDown?d.frameVal=d.startVal-(d.startVal-d.endVal)*(y/d.duration):d.frameVal=d.startVal+(d.endVal-d.startVal)*(y/d.duration),d.countDown?d.frameVal=d.frameVal<d.endVal?d.endVal:d.frameVal:d.frameVal=d.frameVal>d.endVal?d.endVal:d.frameVal,d.frameVal=Math.round(d.frameVal*d.dec)/d.dec,d.printValue(d.frameVal),y<d.duration?d.rAF=requestAnimationFrame(d.count):d.callback&&d.callback()},d.start=function($){d.initialize()&&(d.callback=$,d.rAF=requestAnimationFrame(d.count))},d.pauseResume=function(){d.paused?(d.paused=!1,delete d.startTime,d.duration=d.remaining,d.startVal=d.frameVal,requestAnimationFrame(d.count)):(d.paused=!0,cancelAnimationFrame(d.rAF))},d.reset=function(){d.paused=!1,delete d.startTime,d.initialized=!1,d.initialize()&&(cancelAnimationFrame(d.rAF),d.printValue(d.startVal))},d.update=function($){if(d.initialize()){if($=Number($),!v($))return void(d.error="[CountUp] update() - new endVal is not a number: "+$);d.error="",$!==d.frameVal&&(cancelAnimationFrame(d.rAF),d.paused=!1,delete d.startTime,d.startVal=d.frameVal,d.endVal=$,d.countDown=d.startVal>d.endVal,d.rAF=requestAnimationFrame(d.count))}},d.initialize()&&d.printValue(d.startVal)};return r})}(Fs,Fs.exports)),Fs.exports}rp();function Wc(t,e){for(var n=[],s=0,i=t.length;s<i;s++)n.push(t[s].substr(0,e));return n}var ap=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],op=["January","February","March","April","May","June","July","August","September","October","November","December"];Wc(op,3);Wc(ap,3);var Zr,Uo;function lp(){if(Uo)return Zr;Uo=1;var t=1e3*60*60*24;function e(r,a){return new Date(r,a+1,0).getDate()}function n(r,a,o){return a===0&&o>50?r-1:a===11&&o<10?r+1:r}function s(r,a,o,c){a>11&&(a=0,r++);var l=new Date(r,a,o);c&&l.setDate(l.getDate()+4-(l.getDay()||7));var u=c?l.getFullYear():r,f=new Date(u,0,1),h=1+Math.round((l-f)/t);c||(h+=f.getDay());var m=Math.ceil(h/7);if(!c){var v=new Date(r,a,o),d=new Date(r+1,0,1),b=d.getDay();v.getTime()>=d.getTime()-t*b&&(m=1)}return m}function i(r,a,o){for(var c=this.lang||"en",l=this.onlyDays,u=typeof this.weekStart>"u"?1:this.weekStart,f=u===1,h=[],m=new Date(r,a,1),v=m.getDay()||(f?7:0),d=u-v,b=s(r,a,1,f),E=e(r,a),T=e(r,a-1),A,$,y,g=n(r,a,b),C={month:a,year:r,daysInMonth:E},_=0;_<7;_++){y=d;for(var x=0;x<8;x++){_>0&&x>0&&d++,d>E||d<1?($=d>E?d-E:T+d,A=d>E?a+1:a-1):($=d,A=a);var O=function(){return x===0?"weekLabel":_===0?"dayLabel":d<1?"prevMonth":d>E?"nextMonth":"monthDay"}(),N=y!==d&&_>0,W={desc:N?$:b,week:b,type:O,format:f?"ISO 8601":"US",date:N?new Date(Date.UTC(r,A,$)):!1,year:g,index:h.length};o&&(typeof o=="function"?W=o.call(C,W,c):o.forEach(function(J){W=J.call(C,W,c)})),l&&N?h.push(W):l||h.push(W)}_>0&&(b=s(r,A,$+1,f)),g=n(r,a,b)}return C.cells=h,C}return Zr=function(r){return i.bind(r)},Zr}var Gr,qo;function cp(){return qo||(qo=1,Gr={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}}),Gr}var Yr,Wo;function up(){if(Wo)return Yr;Wo=1;var t=cp();function e(i){return i==null?!1:i.constructor===Array||i.constructor===Object}function n(i,r){for(var a in i)r[a]?e(i[a])&&n(i[a],r[a]):r[a]=i[a]}function s(i,r){var a=[t.classes[i.type]];return i.class?i.class=(typeof i.class=="string"?[i.class]:i.class).concat(a):i.class=a,i.type.indexOf("Label")>0&&(i.index==0&&t.weekPlaceholder?i.desc=t.weekPlaceholder:i.index<8?i.desc=t.columnNames[r][i.index]:i.index%8==0&&(i.desc=i.week)),i.date&&(i.monthName=t.monthNames[r][i.date.getMonth()]),this.monthName||(this.monthName=t.monthNames[r][this.month]),this.labels||(this.labels={monthNames:t.monthNames[r],columnNames:t.columnNames[r],classes:t.classes}),i}return s.setLabels=function(i){n(i,t)},Yr=s,Yr}var Jr,Ho;function fp(){return Ho||(Ho=1,Jr={Generator:lp(),addLabels:up()}),Jr}fp();const Hc={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!ke)return;let t=window.innerWidth;if(!t){const e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.bodyIsOverflowing&&(this.scrollBarWidth=md())},checkMaskInVisible(){let t=ke?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(t).every(e=>e.style.display==="none"||e.classList.contains("fade-leave-to"))},setScrollBar(){ke&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){ke&&(document.body.style.paddingRight="")},addScrollEffect(){this.lockScroll&&(this.checkScrollBar(),this.setScrollBar(),ke&&(document.body.style.overflow="hidden"))},removeScrollEffect(){this.lockScroll&&ke&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};var Qr={exports:{}},Ko;function Kc(){if(Ko)return Qr.exports;Ko=1;var t=Qr.exports={};return t.forEach=function(e,n){for(var s=0;s<e.length;s++){var i=n(e[s]);if(i)return i}},Qr.exports}var Xr,Zo;function dp(){return Zo||(Zo=1,Xr=function(t){var e=t.stateHandler.getState;function n(a){var o=e(a);return o&&!!o.isDetectable}function s(a){e(a).isDetectable=!0}function i(a){return!!e(a).busy}function r(a,o){e(a).busy=!!o}return{isDetectable:n,markAsDetectable:s,isBusy:i,markBusy:r}}),Xr}var ea,Go;function hp(){return Go||(Go=1,ea=function(t){var e={};function n(a){var o=t.get(a);return o===void 0?[]:e[o]||[]}function s(a,o){var c=t.get(a);e[c]||(e[c]=[]),e[c].push(o)}function i(a,o){for(var c=n(a),l=0,u=c.length;l<u;++l)if(c[l]===o){c.splice(l,1);break}}function r(a){var o=n(a);o&&(o.length=0)}return{get:n,add:s,removeListener:i,removeAllListeners:r}}),ea}var ta,Yo;function pp(){return Yo||(Yo=1,ta=function(){var t=1;function e(){return t++}return{generate:e}}),ta}var na,Jo;function mp(){return Jo||(Jo=1,na=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function s(r){var a=n(r);return a&&a.id!==void 0?a.id:null}function i(r){var a=n(r);if(!a)throw new Error("setId required the element to have a resize detection state.");var o=e.generate();return a.id=o,o}return{get:s,set:i}}),na}var sa,Qo;function gp(){return Qo||(Qo=1,sa=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var s=function(i,r){i[r]=function(){var o=console[r];if(o.apply)o.apply(console,arguments);else for(var c=0;c<arguments.length;c++)o(arguments[c])}};s(n,"log"),s(n,"warn"),s(n,"error")}return n}),sa}var ia={exports:{}},Xo;function Zc(){if(Xo)return ia.exports;Xo=1;var t=ia.exports={};return t.isIE=function(e){function n(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!n())return!1;if(!e)return!0;var s=function(){var i,r=3,a=document.createElement("div"),o=a.getElementsByTagName("i");do a.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(o[0]);return r>4?r:i}();return e===s},t.isLegacyOpera=function(){return!!window.opera},ia.exports}var ra={exports:{}},el;function yp(){if(el)return ra.exports;el=1;var t=ra.exports={};t.getOption=e;function e(n,s,i){var r=n[s];return r==null&&i!==void 0?i:r}return ra.exports}var aa,tl;function bp(){if(tl)return aa;tl=1;var t=yp();aa=function(s){s=s||{};var i=s.reporter,r=t.getOption(s,"async",!0),a=t.getOption(s,"auto",!0);a&&!r&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),r=!0);var o=e(),c,l=!1;function u(b,E){!l&&a&&r&&o.size()===0&&m(),o.add(b,E)}function f(){for(l=!0;o.size();){var b=o;o=e(),b.process()}l=!1}function h(b){l||(b===void 0&&(b=r),c&&(v(c),c=null),b?m():f())}function m(){c=d(f)}function v(b){var E=clearTimeout;return E(b)}function d(b){var E=function(T){return setTimeout(T,0)};return E(b)}return{add:u,force:h}};function e(){var n={},s=0,i=0,r=0;function a(l,u){u||(u=l,l=0),l>i?i=l:l<r&&(r=l),n[l]||(n[l]=[]),n[l].push(u),s++}function o(){for(var l=r;l<=i;l++)for(var u=n[l],f=0;f<u.length;f++){var h=u[f];h()}}function c(){return s}return{add:a,process:o,size:c}}return aa}var oa,nl;function vp(){if(nl)return oa;nl=1;var t="_erd";function e(i){return i[t]={},n(i)}function n(i){return i[t]}function s(i){delete i[t]}return oa={initState:e,getState:n,cleanState:s},oa}var la,sl;function wp(){if(sl)return la;sl=1;var t=Zc();return la=function(e){e=e||{};var n=e.reporter,s=e.batchProcessor,i=e.stateHandler.getState;if(!n)throw new Error("Missing required dependency: reporter.");function r(u,f){function h(){f(u)}if(t.isIE(8))i(u).object={proxy:h},u.attachEvent("onresize",h);else{var m=c(u);if(!m)throw new Error("Element is not detectable by this strategy.");m.contentDocument.defaultView.addEventListener("resize",h)}}function a(u){var f=e.important?" !important; ":"; ";return(u.join(f)+f).trim()}function o(u,f,h){h||(h=f,f=u,u=null),u=u||{},u.debug;function m(v,d){var b=a(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),E=!1,T=window.getComputedStyle(v),A=v.offsetWidth,$=v.offsetHeight;i(v).startSize={width:A,height:$};function y(){function g(){if(T.position==="static"){v.style.setProperty("position","relative",u.important?"important":"");var x=function(O,N,W,J){function G(U){return U.replace(/[^-\d\.]/g,"")}var F=W[J];F!=="auto"&&G(F)!=="0"&&(O.warn("An element that is positioned static has style."+J+"="+F+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+J+" will be set to 0. Element: ",N),N.style.setProperty(J,"0",u.important?"important":""))};x(n,v,T,"top"),x(n,v,T,"right"),x(n,v,T,"bottom"),x(n,v,T,"left")}}function C(){E||g();function x(N,W){if(!N.contentDocument){var J=i(N);J.checkForObjectDocumentTimeoutId&&window.clearTimeout(J.checkForObjectDocumentTimeoutId),J.checkForObjectDocumentTimeoutId=setTimeout(function(){J.checkForObjectDocumentTimeoutId=0,x(N,W)},100);return}W(N.contentDocument)}var O=this;x(O,function(W){d(v)})}T.position!==""&&(g(),E=!0);var _=document.createElement("object");_.style.cssText=b,_.tabIndex=-1,_.type="text/html",_.setAttribute("aria-hidden","true"),_.onload=C,t.isIE()||(_.data="about:blank"),i(v)&&(v.appendChild(_),i(v).object=_,t.isIE()&&(_.data="about:blank"))}s?s.add(y):y()}t.isIE(8)?h(f):m(f,h)}function c(u){return i(u).object}function l(u){if(i(u)){var f=c(u);f&&(t.isIE(8)?u.detachEvent("onresize",f.proxy):u.removeChild(f),i(u).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(u).checkForObjectDocumentTimeoutId),delete i(u).object)}}return{makeDetectable:o,addListener:r,uninstall:l}},la}var ca,il;function xp(){if(il)return ca;il=1;var t=Kc().forEach;return ca=function(e){e=e||{};var n=e.reporter,s=e.batchProcessor,i=e.stateHandler.getState;e.stateHandler.hasState;var r=e.idHandler;if(!s)throw new Error("Missing required dependency: batchProcessor");if(!n)throw new Error("Missing required dependency: reporter.");var a=f(),o="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function l(y){h(y,o,c)}l(window.document);function u(y){var g=e.important?" !important; ":"; ";return(y.join(g)+g).trim()}function f(){var y=500,g=500,C=document.createElement("div");C.style.cssText=u(["position: absolute","width: "+y*2+"px","height: "+g*2+"px","visibility: hidden","margin: 0","padding: 0"]);var _=document.createElement("div");_.style.cssText=u(["position: absolute","width: "+y+"px","height: "+g+"px","overflow: scroll","visibility: none","top: "+-500*3+"px","left: "+-500*3+"px","visibility: hidden","margin: 0","padding: 0"]),_.appendChild(C),document.body.insertBefore(_,document.body.firstChild);var x=y-_.clientWidth,O=g-_.clientHeight;return document.body.removeChild(_),{width:x,height:O}}function h(y,g,C){function _(W,J){J=J||function(F){y.head.appendChild(F)};var G=y.createElement("style");return G.innerHTML=W,G.id=g,J(G),G}if(!y.getElementById(g)){var x=C+"_animation",O=C+"_animation_active",N=`/* Created by the element-resize-detector library. */
`;N+="."+C+" > div::-webkit-scrollbar { "+u(["display: none"])+` }

`,N+="."+O+" { "+u(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+x,"animation-name: "+x])+` }
`,N+="@-webkit-keyframes "+x+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,N+="@keyframes "+x+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",_(N)}}function m(y){y.className+=" "+c+"_animation_active"}function v(y,g,C){if(y.addEventListener)y.addEventListener(g,C);else if(y.attachEvent)y.attachEvent("on"+g,C);else return n.error("[scroll] Don't know how to add event listeners.")}function d(y,g,C){if(y.removeEventListener)y.removeEventListener(g,C);else if(y.detachEvent)y.detachEvent("on"+g,C);else return n.error("[scroll] Don't know how to remove event listeners.")}function b(y){return i(y).container.childNodes[0].childNodes[0].childNodes[0]}function E(y){return i(y).container.childNodes[0].childNodes[0].childNodes[1]}function T(y,g){var C=i(y).listeners;if(!C.push)throw new Error("Cannot add listener to an element that is not detectable.");i(y).listeners.push(g)}function A(y,g,C){C||(C=g,g=y,y=null),y=y||{};function _(){if(y.debug){var V=Array.prototype.slice.call(arguments);if(V.unshift(r.get(g),"Scroll: "),n.log.apply)n.log.apply(null,V);else for(var ne=0;ne<V.length;ne++)n.log(V[ne])}}function x(V){function ne(xe){var Ke=xe.getRootNode&&xe.getRootNode().contains(xe);return xe===xe.ownerDocument.body||xe.ownerDocument.body.contains(xe)||Ke}return!ne(V)||window.getComputedStyle(V)===null}function O(V){var ne=i(V).container.childNodes[0],xe=window.getComputedStyle(ne);return!xe.width||xe.width.indexOf("px")===-1}function N(){var V=window.getComputedStyle(g),ne={};return ne.position=V.position,ne.width=g.offsetWidth,ne.height=g.offsetHeight,ne.top=V.top,ne.right=V.right,ne.bottom=V.bottom,ne.left=V.left,ne.widthCSS=V.width,ne.heightCSS=V.height,ne}function W(){var V=N();i(g).startSize={width:V.width,height:V.height},_("Element start size",i(g).startSize)}function J(){i(g).listeners=[]}function G(){if(_("storeStyle invoked."),!i(g)){_("Aborting because element has been uninstalled");return}var V=N();i(g).style=V}function F(V,ne,xe){i(V).lastWidth=ne,i(V).lastHeight=xe}function U(V){return b(V).childNodes[0]}function B(){return 2*a.width+1}function D(){return 2*a.height+1}function X(V){return V+10+B()}function ie(V){return V+10+D()}function ye(V){return V*2+B()}function be(V){return V*2+D()}function we(V,ne,xe){var Ke=b(V),vt=E(V),on=X(ne),ln=ie(xe),rt=ye(ne),Ce=be(xe);Ke.scrollLeft=on,Ke.scrollTop=ln,vt.scrollLeft=rt,vt.scrollTop=Ce}function _e(){var V=i(g).container;if(!V){V=document.createElement("div"),V.className=c,V.style.cssText=u(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(g).container=V,m(V),g.appendChild(V);var ne=function(){i(g).onRendered&&i(g).onRendered()};v(V,"animationstart",ne),i(g).onAnimationStart=ne}return V}function Ie(){function V(){var Ze=i(g).style;if(Ze.position==="static"){g.style.setProperty("position","relative",y.important?"important":"");var wt=function(jt,Rt,As,Hn){function Rr(Dr){return Dr.replace(/[^-\d\.]/g,"")}var Ns=As[Hn];Ns!=="auto"&&Rr(Ns)!=="0"&&(jt.warn("An element that is positioned static has style."+Hn+"="+Ns+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Hn+" will be set to 0. Element: ",Rt),Rt.style[Hn]=0)};wt(n,g,Ze,"top"),wt(n,g,Ze,"right"),wt(n,g,Ze,"bottom"),wt(n,g,Ze,"left")}}function ne(Ze,wt,jt,Rt){return Ze=Ze?Ze+"px":"0",wt=wt?wt+"px":"0",jt=jt?jt+"px":"0",Rt=Rt?Rt+"px":"0",["left: "+Ze,"top: "+wt,"right: "+Rt,"bottom: "+jt]}if(_("Injecting elements"),!i(g)){_("Aborting because element has been uninstalled");return}V();var xe=i(g).container;xe||(xe=_e());var Ke=a.width,vt=a.height,on=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ln=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(ne(-(1+Ke),-(1+vt),-vt,-Ke))),rt=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Ce=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),et=u(["position: absolute","left: 0","top: 0"]),It=u(["position: absolute","width: 200%","height: 200%"]),Ot=document.createElement("div"),Tt=document.createElement("div"),cn=document.createElement("div"),Ii=document.createElement("div"),Wn=document.createElement("div"),Oi=document.createElement("div");Ot.dir="ltr",Ot.style.cssText=on,Ot.className=c,Tt.className=c,Tt.style.cssText=ln,cn.style.cssText=rt,Ii.style.cssText=et,Wn.style.cssText=Ce,Oi.style.cssText=It,cn.appendChild(Ii),Wn.appendChild(Oi),Tt.appendChild(cn),Tt.appendChild(Wn),Ot.appendChild(Tt),xe.appendChild(Ot);function Es(){var Ze=i(g);Ze&&Ze.onExpand?Ze.onExpand():_("Aborting expand scroll handler: element has been uninstalled")}function Ti(){var Ze=i(g);Ze&&Ze.onShrink?Ze.onShrink():_("Aborting shrink scroll handler: element has been uninstalled")}v(cn,"scroll",Es),v(Wn,"scroll",Ti),i(g).onExpandScroll=Es,i(g).onShrinkScroll=Ti}function Pe(){function V(rt,Ce,et){var It=U(rt),Ot=X(Ce),Tt=ie(et);It.style.setProperty("width",Ot+"px",y.important?"important":""),It.style.setProperty("height",Tt+"px",y.important?"important":"")}function ne(rt){var Ce=g.offsetWidth,et=g.offsetHeight,It=Ce!==i(g).lastWidth||et!==i(g).lastHeight;_("Storing current size",Ce,et),F(g,Ce,et),s.add(0,function(){if(It){if(!i(g)){_("Aborting because element has been uninstalled");return}if(!xe()){_("Aborting because element container has not been initialized");return}if(y.debug){var Tt=g.offsetWidth,cn=g.offsetHeight;(Tt!==Ce||cn!==et)&&n.warn(r.get(g),"Scroll: Size changed before updating detector elements.")}V(g,Ce,et)}}),s.add(1,function(){if(!i(g)){_("Aborting because element has been uninstalled");return}if(!xe()){_("Aborting because element container has not been initialized");return}we(g,Ce,et)}),It&&rt&&s.add(2,function(){if(!i(g)){_("Aborting because element has been uninstalled");return}if(!xe()){_("Aborting because element container has not been initialized");return}rt()})}function xe(){return!!i(g).container}function Ke(){function rt(){return i(g).lastNotifiedWidth===void 0}_("notifyListenersIfNeeded invoked");var Ce=i(g);if(rt()&&Ce.lastWidth===Ce.startSize.width&&Ce.lastHeight===Ce.startSize.height)return _("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Ce.lastWidth===Ce.lastNotifiedWidth&&Ce.lastHeight===Ce.lastNotifiedHeight)return _("Not notifying: Size already notified");_("Current size not notified, notifying..."),Ce.lastNotifiedWidth=Ce.lastWidth,Ce.lastNotifiedHeight=Ce.lastHeight,t(i(g).listeners,function(et){et(g)})}function vt(){if(_("startanimation triggered."),O(g)){_("Ignoring since element is still unrendered...");return}_("Element rendered.");var rt=b(g),Ce=E(g);(rt.scrollLeft===0||rt.scrollTop===0||Ce.scrollLeft===0||Ce.scrollTop===0)&&(_("Scrollbars out of sync. Updating detector elements..."),ne(Ke))}function on(){if(_("Scroll detected."),O(g)){_("Scroll event fired while unrendered. Ignoring...");return}ne(Ke)}if(_("registerListenersAndPositionElements invoked."),!i(g)){_("Aborting because element has been uninstalled");return}i(g).onRendered=vt,i(g).onExpand=on,i(g).onShrink=on;var ln=i(g).style;V(g,ln.width,ln.height)}function Se(){if(_("finalizeDomMutation invoked."),!i(g)){_("Aborting because element has been uninstalled");return}var V=i(g).style;F(g,V.width,V.height),we(g,V.width,V.height)}function oe(){C(g)}function Ae(){_("Installing..."),J(),W(),s.add(0,G),s.add(1,Ie),s.add(2,Pe),s.add(3,Se),s.add(4,oe)}_("Making detectable..."),x(g)?(_("Element is detached"),_e(),_("Waiting until element is attached..."),i(g).onRendered=function(){_("Element is now attached"),Ae()}):Ae()}function $(y){var g=i(y);g&&(g.onExpandScroll&&d(b(y),"scroll",g.onExpandScroll),g.onShrinkScroll&&d(E(y),"scroll",g.onShrinkScroll),g.onAnimationStart&&d(g.container,"animationstart",g.onAnimationStart),g.container&&y.removeChild(g.container))}return{makeDetectable:A,addListener:T,uninstall:$,initDocument:l}},ca}var ua,rl;function kp(){if(rl)return ua;rl=1;var t=Kc().forEach,e=dp(),n=hp(),s=pp(),i=mp(),r=gp(),a=Zc(),o=bp(),c=vp(),l=wp(),u=xp();function f(d){return Array.isArray(d)||d.length!==void 0}function h(d){if(Array.isArray(d))return d;var b=[];return t(d,function(E){b.push(E)}),b}function m(d){return d&&d.nodeType===1}ua=function(d){d=d||{};var b;if(d.idHandler)b={get:function(B){return d.idHandler.get(B,!0)},set:d.idHandler.set};else{var E=s(),T=i({idGenerator:E,stateHandler:c});b=T}var A=d.reporter;if(!A){var $=A===!1;A=r($)}var y=v(d,"batchProcessor",o({reporter:A})),g={};g.callOnAdd=!!v(d,"callOnAdd",!0),g.debug=!!v(d,"debug",!1);var C=n(b),_=e({stateHandler:c}),x,O=v(d,"strategy","object"),N=v(d,"important",!1),W={reporter:A,batchProcessor:y,stateHandler:c,idHandler:b,important:N};if(O==="scroll"&&(a.isLegacyOpera()?(A.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),O="object"):a.isIE(9)&&(A.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),O="object")),O==="scroll")x=u(W);else if(O==="object")x=l(W);else throw new Error("Invalid strategy name: "+O);var J={};function G(B,D,X){function ie(Pe){var Se=C.get(Pe);t(Se,function(Ae){Ae(Pe)})}function ye(Pe,Se,oe){C.add(Se,oe),Pe&&oe(Se)}if(X||(X=D,D=B,B={}),!D)throw new Error("At least one element required.");if(!X)throw new Error("Listener required.");if(m(D))D=[D];else if(f(D))D=h(D);else return A.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var be=0,we=v(B,"callOnAdd",g.callOnAdd),_e=v(B,"onReady",function(){}),Ie=v(B,"debug",g.debug);t(D,function(Se){c.getState(Se)||(c.initState(Se),b.set(Se));var oe=b.get(Se);if(Ie&&A.log("Attaching listener to element",oe,Se),!_.isDetectable(Se)){if(Ie&&A.log(oe,"Not detectable."),_.isBusy(Se)){Ie&&A.log(oe,"System busy making it detectable"),ye(we,Se,X),J[oe]=J[oe]||[],J[oe].push(function(){be++,be===D.length&&_e()});return}return Ie&&A.log(oe,"Making detectable..."),_.markBusy(Se,!0),x.makeDetectable({debug:Ie,important:N},Se,function(V){if(Ie&&A.log(oe,"onElementDetectable"),c.getState(V)){_.markAsDetectable(V),_.markBusy(V,!1),x.addListener(V,ie),ye(we,V,X);var ne=c.getState(V);if(ne&&ne.startSize){var xe=V.offsetWidth,Ke=V.offsetHeight;(ne.startSize.width!==xe||ne.startSize.height!==Ke)&&ie(V)}J[oe]&&t(J[oe],function(vt){vt()})}else Ie&&A.log(oe,"Element uninstalled before being detectable.");delete J[oe],be++,be===D.length&&_e()})}Ie&&A.log(oe,"Already detecable, adding listener."),ye(we,Se,X),be++}),be===D.length&&_e()}function F(B){if(!B)return A.error("At least one element is required.");if(m(B))B=[B];else if(f(B))B=h(B);else return A.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t(B,function(D){C.removeAllListeners(D),x.uninstall(D),c.cleanState(D)})}function U(B){x.initDocument&&x.initDocument(B)}return{listenTo:G,removeListener:C.removeListener,removeAllListeners:C.removeAllListeners,uninstall:F,initDocument:U}};function v(d,b,E){var T=d[b];return T==null&&E!==void 0?E:T}return ua}kp();var fa,al;function Sp(){if(al)return fa;al=1;var t="Expected a function",e=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,c=typeof Vs=="object"&&Vs&&Vs.Object===Object&&Vs,l=typeof self=="object"&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),f=Object.prototype,h=f.toString,m=Math.max,v=Math.min,d=function(){return u.Date.now()};function b(g,C,_){var x,O,N,W,J,G,F=0,U=!1,B=!1,D=!0;if(typeof g!="function")throw new TypeError(t);C=y(C)||0,T(_)&&(U=!!_.leading,B="maxWait"in _,N=B?m(y(_.maxWait)||0,C):N,D="trailing"in _?!!_.trailing:D);function X(oe){var Ae=x,V=O;return x=O=void 0,F=oe,W=g.apply(V,Ae),W}function ie(oe){return F=oe,J=setTimeout(we,C),U?X(oe):W}function ye(oe){var Ae=oe-G,V=oe-F,ne=C-Ae;return B?v(ne,N-V):ne}function be(oe){var Ae=oe-G,V=oe-F;return G===void 0||Ae>=C||Ae<0||B&&V>=N}function we(){var oe=d();if(be(oe))return _e(oe);J=setTimeout(we,ye(oe))}function _e(oe){return J=void 0,D&&x?X(oe):(x=O=void 0,W)}function Ie(){J!==void 0&&clearTimeout(J),F=0,x=G=O=J=void 0}function Pe(){return J===void 0?W:_e(d())}function Se(){var oe=d(),Ae=be(oe);if(x=arguments,O=this,G=oe,Ae){if(J===void 0)return ie(G);if(B)return J=setTimeout(we,C),X(G)}return J===void 0&&(J=setTimeout(we,C)),W}return Se.cancel=Ie,Se.flush=Pe,Se}function E(g,C,_){var x=!0,O=!0;if(typeof g!="function")throw new TypeError(t);return T(_)&&(x="leading"in _?!!_.leading:x,O="trailing"in _?!!_.trailing:O),b(g,C,{leading:x,maxWait:C,trailing:O})}function T(g){var C=typeof g;return!!g&&(C=="object"||C=="function")}function A(g){return!!g&&typeof g=="object"}function $(g){return typeof g=="symbol"||A(g)&&h.call(g)==n}function y(g){if(typeof g=="number")return g;if($(g))return e;if(T(g)){var C=typeof g.valueOf=="function"?g.valueOf():g;g=T(C)?C+"":C}if(typeof g!="string")return g===0?g:+g;g=g.replace(s,"");var _=r.test(g);return _||a.test(g)?o(g.slice(2),_?2:8):i.test(g)?e:+g}return fa=E,fa}var _p=Sp();const Cp=oo(_p),Yn={ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},dn="ivu-spin",Ip={name:"Spin",mixins:[Hc],props:{size:{validator(t){return We(t,["small","large","default"])},default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.size===""?"default":t.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${dn}`,{[`${dn}-${this.size}`]:!!this.size,[`${dn}-fix`]:this.fix,[`${dn}-show-text`]:this.showText,[`${dn}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${dn}-main`},dotClasses(){return`${dn}-dot`},textClasses(){return`${dn}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(t){t?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(t=>t.children&&t.children.length)}};function Op(t,e,n,s,i,r){return R(),Fe(bn,{name:"fade"},{default:Ue(()=>[r.fullscreenVisible&&n.show?(R(),Z("div",{key:0,class:H(r.classes)},[se("div",{class:H(r.mainClasses)},[se("span",{class:H(r.dotClasses)},null,2),se("div",{class:H(r.textClasses)},[Le(t.$slots,"default")],2)],2)],2)):ue("",!0)]),_:3})}const Ln=Je(Ip,[["render",Op]]),Tp={name:"ImagePreview",mixins:[xi],components:{Icon:st,Spin:Ln,Row:ki,Col:Ut},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.transfer===""?!1:t.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||!t.$VIEWUI.image||t.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:t.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let t=this.translate.x/this.scale,e=this.translate.y/this.scale;const n=this.degree%360;return[90,-270].includes(n)&&([t,e]=[e,-t]),[180,-180].includes(n)&&([t,e]=[-t,-e]),[270,-90].includes(n)&&([t,e]=[-e,t]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${t}px, ${e}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:t,infinite:e,previewList:n}=this,s=n.length;return e?!1:t>=s-1},hasLeftSwitchEnd(){const{currentIndex:t,infinite:e}=this;return e?!1:t===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){this.maskClosable&&this.handleClose()},handleSwitch(t){t?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(t){t==="zoomIn"&&this.scale<6&&(this.scale+=.25),t==="zoomOut"&&this.scale>.25&&(this.scale-=.25),t==="rotateLeft"&&(this.degree-=90),t==="rotateRight"&&(this.degree+=90),t==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),t==="download"&&(this.downloading=!0,xd(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(t){if(!this.modelValue)return;const{keyCode:e}=t;e===Yn.LEFT&&this.handleSwitch(!1),e===Yn.RIGHT&&this.handleSwitch(!0),e===Yn.UP&&this.handleOperation("zoomIn"),e===Yn.DOWN&&this.handleOperation("zoomOut"),e===Yn.SPACE&&(t.preventDefault(),this.original=!this.original)},handleKeyup(t){if(!this.modelValue)return;const{keyCode:e}=t;e===Yn.ESC&&this.handleClose()},handleWheel(t){if(!this.modelValue)return;const{deltaY:e}=t;this.handleOperation(e<0?"zoomIn":"zoomOut")},handleMousedown(t){const{pageX:e,pageY:n,which:s}=t;s===1&&(this.startX=e,this.startY=n,this.transition=!1,en(document,"mousemove",this.handleMousemove),en(document,"mouseup",this.handleMouseup))},handleMousemove:Cp(function(t){t.stopPropagation();const{pageX:e,pageY:n}=t;this.translate.x+=e-this.startX,this.translate.y+=n-this.startY,this.startX=e,this.startY=n}),handleMouseup(){this.transition=!0,tn(document,"mousemove",this.handleMousemove),tn(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return ke?document.body.style.overflow:""},setBodyOverflow(t){ke&&(document.body.style.overflow=t)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return wi(),Ts}},watch:{modelValue(t){t?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){en(document,"keydown",this.handleKeydown),en(document,"keyup",this.handleKeyup),en(document,"wheel",this.handleWheel)},beforeUnmount(){tn(document,"keydown",this.handleKeydown),tn(document,"keyup",this.handleKeyup),tn(document,"wheel",this.handleWheel)}},Ep={key:1,class:"ivu-image-preview-fail"},Ap=["src"],Np={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"};function $p(t,e,n,s,i,r){const a=mt("Spin"),o=mt("Col"),c=mt("Row"),l=mt("Icon");return R(),Fe(Wa,{to:"body",disabled:!n.transfer},[k(bn,{name:"fade"},{default:Ue(()=>[n.modelValue?(R(),Z("div",{key:0,class:"ivu-image-preview-mask",style:Qe(r.maskStyle)},null,4)):ue("",!0)]),_:1}),k(bn,{name:"fade"},{default:Ue(()=>[n.modelValue?(R(),Z("div",{key:0,class:"ivu-image-preview-wrap",style:Qe(r.maskStyle)},[se("div",yr({class:"ivu-image-preview"},t.$attrs,{onClick:e[14]||(e[14]=Be((...u)=>r.handleClickMask&&r.handleClickMask(...u),["stop"]))}),[i.status==="loading"?(R(),Fe(a,{key:0,size:"large",class:"ivu-image-preview-loading"})):i.status==="failed"?(R(),Z("div",Ep,[se("span",null,qe(r.failLang),1)])):ue("",!0),(R(),Z("img",{class:H(r.imgClasses),style:Qe(r.imageStyle),src:r.currentSrc,key:i.currentIndex.toString(),onClick:e[0]||(e[0]=Be(()=>{},["stop"])),onMousedown:e[1]||(e[1]=Be((...u)=>r.handleMousedown&&r.handleMousedown(...u),["stop","prevent"])),onLoad:e[2]||(e[2]=(...u)=>r.handleImageLoad&&r.handleImageLoad(...u)),onError:e[3]||(e[3]=(...u)=>r.handleImageError&&r.handleImageError(...u))},null,46,Ap)),n.toolbar&&n.toolbar.length>0?(R(),Fe(c,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:e[11]||(e[11]=Be(()=>{},["stop"]))},{default:Ue(()=>[n.toolbar.indexOf("zoomIn")>-1?(R(),Fe(o,{key:0,flex:"1",order:n.toolbar.indexOf("zoomIn")+1},{default:Ue(()=>[(R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[4]||(e[4]=Be(u=>r.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},e[15]||(e[15]=[se("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),se("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)])))]),_:1},8,["order"])):ue("",!0),n.toolbar.indexOf("zoomOut")>-1?(R(),Fe(o,{key:1,flex:"1",order:n.toolbar.indexOf("zoomOut")+1},{default:Ue(()=>[(R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[5]||(e[5]=Be(u=>r.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},e[16]||(e[16]=[se("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),se("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)])))]),_:1},8,["order"])):ue("",!0),n.toolbar.indexOf("original")>-1?(R(),Fe(o,{key:2,flex:"1",order:n.toolbar.indexOf("original")+1},{default:Ue(()=>[Xe((R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[6]||(e[6]=Be(u=>r.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},e[17]||(e[17]=[se("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)]),512)),[[ot,!this.original]]),Xe((R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[7]||(e[7]=Be(u=>r.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},e[18]||(e[18]=[se("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),se("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),se("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),se("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)]),512)),[[ot,this.original]])]),_:1},8,["order"])):ue("",!0),n.toolbar.indexOf("rotateLeft")>-1?(R(),Fe(o,{key:3,flex:"1",order:n.toolbar.indexOf("rotateLeft")+1},{default:Ue(()=>[(R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[8]||(e[8]=Be(u=>r.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},e[19]||(e[19]=[se("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)])))]),_:1},8,["order"])):ue("",!0),n.toolbar.indexOf("rotateRight")>-1?(R(),Fe(o,{key:4,flex:"1",order:n.toolbar.indexOf("rotateRight")+1},{default:Ue(()=>[(R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[9]||(e[9]=Be(u=>r.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},e[20]||(e[20]=[se("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)])))]),_:1},8,["order"])):ue("",!0),n.toolbar.indexOf("download")>-1?(R(),Fe(o,{key:5,flex:"1",order:n.toolbar.indexOf("download")+1},{default:Ue(()=>[Xe((R(),Z("svg",{class:"ivu-image-preview-operations-item",onClick:e[10]||(e[10]=Be(u=>r.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},e[21]||(e[21]=[se("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),se("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)]),512)),[[ot,!i.downloading]]),Xe((R(),Z("svg",Np,e[22]||(e[22]=[se("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)]),512)),[[ot,i.downloading]])]),_:1},8,["order"])):ue("",!0)]),_:1})):ue("",!0),n.previewList.length>1?(R(),Fe(l,{key:3,class:H(r.leftClasses),type:"ios-arrow-back",onClick:e[12]||(e[12]=Be(u=>r.handleSwitch(!1),["stop"]))},null,8,["class"])):ue("",!0),n.previewList.length>1?(R(),Fe(l,{key:4,class:H(r.rightClasses),type:"ios-arrow-forward",onClick:e[13]||(e[13]=Be(u=>r.handleSwitch(!0),["stop"]))},null,8,["class"])):ue("",!0),k(l,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:Be(r.handleClose,["stop"])},null,8,["onClick"])],16)],4)):ue("",!0)]),_:1})],8,["disabled"])}const rr=Je(Tp,[["render",$p]]);rr.newInstance=t=>{if(!ke)return;const e=t||{};let n=null;const s=mi({data(){return Object.assign({},e,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return Ne(rr,Object.assign({},e,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){s.unmount(),document.body.removeChild(i)},onRemove(){}},created(){n=He()}}),i=document.createElement("div");document.body.appendChild(i),s.mount(i);const r=n.refs.imagePreview;return{show(a){Object.keys(a).forEach(o=>{r.$parent[o]=a[o]}),r.$parent.visible=!0},component:r}};let Gi;function Lp(){return Gi=Gi||rr.newInstance(),Gi}rr.show=function(t={}){const e=Lp();t.onRemove=function(){Gi=null},e.show(t)};function Gc(){return wi(),Ts}let ol=Gc();Ln.newInstance=t=>{if(!ke)return;const e=t||{};let n=null;const s=mi({data(){return Object.assign({},e,{})},render(){let a="";return this.render?a=Ne(Ln,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(Ne)]):a=Ne(Ln,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),Ne("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+ol}},[a])},created(){n=He()}}),i=document.createElement("div");document.body.appendChild(i),s.mount(i);const r=n.refs.spin;return{show(){St(()=>{n.refs.spin.visible=!0,ol=Gc()})},remove(a){n.refs.spin.visible=!1,setTimeout(function(){s.unmount(),document.body.removeChild(i),a()},500)},component:r}};let Hs;function Yc(t=void 0){return Hs=Hs||Ln.newInstance({render:t}),Hs}function Mp(t){const e="render"in t?t.render:void 0;Yc(e).show(t)}Ln.show=function(t={}){return Mp(t)};Ln.hide=function(){if(!Hs)return!1;Yc().remove(()=>{Hs=null})};const Ri="ivu-loading-bar",Pp={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${Ri}`},innerClasses(){return[`${Ri}-inner`,{[`${Ri}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${Ri}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let t={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(t.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(t.backgroundColor=this.failedColor),t}}};function jp(t,e,n,s,i,r){return R(),Fe(bn,{name:"fade"},{default:Ue(()=>[Xe(se("div",{class:H(r.classes),style:Qe(r.outerStyles)},[se("div",{class:H(r.innerClasses),style:Qe(r.styles)},null,6)],6),[[ot,i.show]])]),_:1})}const ll=Je(Pp,[["render",jp]]);ll.newInstance=t=>{if(!ke)return;const e=t||{};let n=null;const s=mi({data(){return e},render(){return Ne(ll,Object.assign({ref:"loadingBar"},e))},created(){n=He()}}),i=document.createElement("div");document.body.appendChild(i),s.mount(i);const r=n.refs.loadingBar;return{update(a){"percent"in a&&(r.percent=a.percent),a.status&&(r.status=a.status),"show"in a&&(r.show=a.show)},component:r,destroy(){s.unmount(),document.body.removeChild(i)}}};const ct="ivu-modal",cl={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},Rp={inheritAttrs:!1,name:"Modal",mixins:[xi,Hc],components:{Icon:st,iButton:me},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.modal.maskClosable===""?!0:t.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const t=He().appContext.config.globalProperties;return!t.$VIEWUI||t.$VIEWUI.transfer===""?!0:t.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:ct,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:sr(cl),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:jc(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${ct}-wrap`,{[`${ct}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${ct}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${ct}-mask`},classes(){return[`${ct}`,{[`${ct}-fullscreen`]:this.fullscreen,[`${ct}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${ct}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${ct}-content`,{[`${ct}-content-no-mask`]:!this.showMask,[`${ct}-content-drag`]:this.draggable&&!this.fullscreen,[`${ct}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let t={};const e=parseInt(this.width),n=this.dragData.x!==null?{top:0}:{width:e<=100?`${e}%`:`${e}px`},s=this.styles?this.styles:{};return Object.assign(t,n,s),t},contentStyles(){let t={};if(this.draggable&&!this.fullscreen){const e=this.styles.top?parseFloat(this.styles.top):0,n=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(t.left=`${this.dragData.x-n}px`),this.dragData.y!==null&&(t.top=`${this.dragData.y}px`),this.dragData.y!==null&&(t.top=`${this.dragData.y-e}px`);const s=parseInt(this.width),i={width:s<=100?`${s}%`:`${s}px`};Object.assign(t,i)}return t},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const t=this.beforeClose();t&&t.then?t.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(t){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const e=t.target.getAttribute("class");e&&e.indexOf(`${ct}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(t){if(this.visible&&this.closable&&t.keyCode===27){const n=this.$root.modalList.map(s=>s.modal).filter(s=>s.$data.visible&&s.$props.closable).sort((s,i)=>s.$data.modalIndex<i.$data.modalIndex?1:-1)[0];setTimeout(()=>{n.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(t){if(!this.draggable||this.fullscreen)return!1;const n=this.$refs.content.getBoundingClientRect();this.dragData.rect=n,this.dragData.x=n.x||n.left,this.dragData.y=n.y||n.top;const s={x:t.clientX,y:t.clientY};this.dragData.dragX=s.x,this.dragData.dragY=s.y,this.dragData.dragging=!0,en(window,"mousemove",this.handleMoveMove),en(window,"mouseup",this.handleMoveEnd)},handleMoveMove(t){if(!this.dragData.dragging||this.fullscreen)return!1;const e={x:t.clientX,y:t.clientY},n={x:e.x-this.dragData.dragX,y:e.y-this.dragData.dragY};if(ke&&this.sticky){const s=document.documentElement.clientWidth,i=document.documentElement.clientHeight;this.dragData.x+n.x<=this.stickyDistance&&n.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-s>-this.stickyDistance&&n.x>0?this.dragData.x=s-this.dragData.rect.width:this.dragData.x+=n.x,this.dragData.y+n.y<=this.stickyDistance&&n.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-i>-this.stickyDistance&&n.y>0?this.dragData.y=i-this.dragData.rect.height:this.dragData.y+=n.y}else this.dragData.x+=n.x,this.dragData.y+=n.y;this.dragData.dragX=e.x,this.dragData.dragY=e.y},handleMoveEnd(){this.dragData.dragging=!1,tn(window,"mousemove",this.handleMoveMove),tn(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return wi(),Ts},handleClickModal(){if(this.draggable){if(Hi!==this.lastVisibleIndex){this.lastVisibleIndex=Hi;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const t=this.$root;t.modalList||(t.modalList=[]),t.modalList.push({id:this.id,modal:this})},removeModal(){const t=this.$root;if(!t.modalList)return;const e=t.modalList.findIndex(n=>n.id===this.id);t.modalList.splice(e,1)}},watch:{modelValue(t){this.visible=t},visible(t){t===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==t&&(this.modalIndex=this.handleGetModalIndex(),Id()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(e=>{e.table.handleOnVisibleChange(t)}),this.sliderList.forEach(e=>{e.slider.handleOnVisibleChange(t)}),this.$emit("on-visible-change",t),this.lastVisible=t,this.lastVisibleIndex=Hi,t&&this.resetDragPosition&&(this.dragData=sr(cl))},loading(t){t||(this.buttonLoading=!1)},scrollable(t){t?this.removeScrollEffect():this.addScrollEffect()},title(t){this.$slots.header===void 0&&(this.showHead=!!t)}},mounted(){this.visible&&(this.wrapShow=!0);let t=!0;this.$slots.header===void 0&&!this.title&&(t=!1),this.showHead=t,this.addModal(),ke&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),ke&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function Dp(t,e,n,s,i,r){const a=mt("Icon"),o=mt("i-button");return R(),Fe(Wa,{to:"body",disabled:!n.transfer},[k(bn,{name:n.transitionNames[1]},{default:Ue(()=>[r.showMask?Xe((R(),Z("div",{key:0,class:H(r.maskClasses),style:Qe(r.wrapStyles),onClick:e[0]||(e[0]=(...c)=>r.handleMask&&r.handleMask(...c))},null,6)),[[ot,i.visible]]):ue("",!0)]),_:1},8,["name"]),se("div",{class:H(r.wrapClasses),style:Qe(r.wrapStyles),onClick:e[5]||(e[5]=(...c)=>r.handleWrapClick&&r.handleWrapClick(...c))},[k(bn,{name:n.transitionNames[0],onAfterLeave:r.animationFinish},{default:Ue(()=>[Xe(se("div",yr(t.$attrs,{class:r.classes,style:r.mainStyles,onMousedown:e[4]||(e[4]=(...c)=>r.handleMousedown&&r.handleMousedown(...c))}),[se("div",{class:H(r.contentClasses),ref:"content",style:Qe(r.contentStyles),onClick:e[3]||(e[3]=(...c)=>r.handleClickModal&&r.handleClickModal(...c))},[n.closable?(R(),Z("a",{key:0,class:H([i.prefixCls+"-close"]),onClick:e[1]||(e[1]=(...c)=>r.close&&r.close(...c))},[Le(t.$slots,"close",{},()=>[k(a,{type:"ios-close"})])],2)):ue("",!0),i.showHead?(R(),Z("div",{key:1,class:H([i.prefixCls+"-header"]),onMousedown:e[2]||(e[2]=(...c)=>r.handleMoveStart&&r.handleMoveStart(...c))},[Le(t.$slots,"header",{},()=>[se("div",{class:H([i.prefixCls+"-header-inner"])},qe(n.title),3)])],34)):ue("",!0),se("div",{class:H([i.prefixCls+"-body"])},[Le(t.$slots,"default")],2),n.footerHide?ue("",!0):(R(),Z("div",{key:2,class:H([i.prefixCls+"-footer"])},[Le(t.$slots,"footer",{},()=>[k(o,{type:"text",onClick:r.cancel},{default:Ue(()=>[Wt(qe(r.localeCancelText),1)]),_:1},8,["onClick"]),k(o,{type:"primary",loading:i.buttonLoading,onClick:r.ok},{default:Ue(()=>[Wt(qe(r.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[ot,i.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}const rn=Je(Rp,[["render",Dp]]),Jt="ivu-modal-confirm";rn.newInstance=t=>{if(!ke)return;const e=t||{},n=document.createElement("div");document.body.appendChild(n);let s=null;const i=mi({mixins:[xi],data(){return Object.assign({},e,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let a=[];this.showCancel&&a.push(Ne(me,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),a.push(Ne(me,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let o;this.render?o=Ne("div",{class:`${Jt}-body ${Jt}-body-render`},[this.render(Ne)]):o=Ne("div",{class:`${Jt}-body`},[Ne("div",{innerHTML:this.body})]);let c;return this.title&&(c=Ne("div",{class:`${Jt}-head`},[Ne("div",{class:this.iconTypeCls},[Ne("i",{class:this.iconNameCls})]),Ne("div",{class:`${Jt}-head-title`,innerHTML:this.title})])),Ne(rn,Object.assign({},e,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":l=>this.visible=l,"onOn-cancel":this.cancel}),()=>Ne("div",{class:Jt},[c,o,Ne("div",{class:`${Jt}-footer`},a)]))},computed:{iconTypeCls(){return[`${Jt}-head-icon`,`${Jt}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){i.unmount(),document.body.removeChild(n),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){s=He()}});i.mount(n);const r=s.refs.modal;return{show(a){switch(r.$parent.showCancel=a.showCancel,r.$parent.iconType=a.icon,a.icon){case"info":r.$parent.iconName="ios-information-circle";break;case"success":r.$parent.iconName="ios-checkmark-circle";break;case"warning":r.$parent.iconName="ios-alert";break;case"error":r.$parent.iconName="ios-close-circle";break;case"confirm":r.$parent.iconName="ios-help-circle";break}"width"in a&&(r.$parent.width=a.width),"closable"in a&&(r.$parent.closable=a.closable),"title"in a&&(r.$parent.title=a.title),"content"in a&&(r.$parent.body=a.content),"okText"in a&&(r.$parent.okText=a.okText),"cancelText"in a&&(r.$parent.cancelText=a.cancelText),"onCancel"in a&&(r.$parent.onCancel=a.onCancel),"onOk"in a&&(r.$parent.onOk=a.onOk),"loading"in a&&(r.$parent.loading=a.loading),"scrollable"in a&&(r.$parent.scrollable=a.scrollable),r.$parent.onRemove=a.onRemove,r.visible=!0},remove(){r.visible=!1,r.$parent.buttonLoading=!1,r.$parent.remove()},component:r}};let Ks;function Jc(t=void 0,e=!0){return Ks=Ks||rn.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:t,lockScroll:e}),Ks}function Si(t){const e="render"in t?t.render:void 0,n="lockScroll"in t?t.lockScroll:!0;let s=Jc(e,n);t.onRemove=function(){Ks=null},s.show(t)}rn.info=function(t={}){return t.icon="info",t.showCancel=!1,Si(t)};rn.success=function(t={}){return t.icon="success",t.showCancel=!1,Si(t)};rn.warning=function(t={}){return t.icon="warning",t.showCancel=!1,Si(t)};rn.error=function(t={}){return t.icon="error",t.showCancel=!1,Si(t)};rn.confirm=function(t={}){return t.icon="confirm",t.showCancel=!0,Si(t)};rn.remove=function(){if(!Ks)return!1;Jc().remove()};var Yi={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */var Vp=Yi.exports,ul;function Fp(){return ul||(ul=1,function(t){(function(e,n){t.exports?t.exports=n():e.numeral=n()})(Vp,function(){var e,n,s="2.0.6",i={},r={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},o={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat,scalePercentBy100:a.scalePercentBy100};function c(l,u){this._input=l,this._value=u}return e=function(l){var u,f,h,m;if(e.isNumeral(l))u=l.value();else if(l===0||typeof l>"u")u=0;else if(l===null||n.isNaN(l))u=null;else if(typeof l=="string")if(o.zeroFormat&&l===o.zeroFormat)u=0;else if(o.nullFormat&&l===o.nullFormat||!l.replace(/[^0-9]+/g,"").length)u=null;else{for(f in i)if(m=typeof i[f].regexps.unformat=="function"?i[f].regexps.unformat():i[f].regexps.unformat,m&&l.match(m)){h=i[f].unformat;break}h=h||e._.stringToNumber,u=h(l)}else u=Number(l)||null;return new c(l,u)},e.version=s,e.isNumeral=function(l){return l instanceof c},e._=n={numberToFormat:function(l,u,f){var h=r[e.options.currentLocale],m=!1,v=!1,d=0,b="",E=1e12,T=1e9,A=1e6,$=1e3,y="",g=!1,C,_,x,O,N,W,J;if(l=l||0,_=Math.abs(l),e._.includes(u,"(")?(m=!0,u=u.replace(/[\(|\)]/g,"")):(e._.includes(u,"+")||e._.includes(u,"-"))&&(N=e._.includes(u,"+")?u.indexOf("+"):l<0?u.indexOf("-"):-1,u=u.replace(/[\+|\-]/g,"")),e._.includes(u,"a")&&(C=u.match(/a(k|m|b|t)?/),C=C?C[1]:!1,e._.includes(u," a")&&(b=" "),u=u.replace(new RegExp(b+"a[kmbt]?"),""),_>=E&&!C||C==="t"?(b+=h.abbreviations.trillion,l=l/E):_<E&&_>=T&&!C||C==="b"?(b+=h.abbreviations.billion,l=l/T):_<T&&_>=A&&!C||C==="m"?(b+=h.abbreviations.million,l=l/A):(_<A&&_>=$&&!C||C==="k")&&(b+=h.abbreviations.thousand,l=l/$)),e._.includes(u,"[.]")&&(v=!0,u=u.replace("[.]",".")),x=l.toString().split(".")[0],O=u.split(".")[1],W=u.indexOf(","),d=(u.split(".")[0].split(",")[0].match(/0/g)||[]).length,O?(e._.includes(O,"[")?(O=O.replace("]",""),O=O.split("["),y=e._.toFixed(l,O[0].length+O[1].length,f,O[1].length)):y=e._.toFixed(l,O.length,f),x=y.split(".")[0],e._.includes(y,".")?y=h.delimiters.decimal+y.split(".")[1]:y="",v&&Number(y.slice(1))===0&&(y="")):x=e._.toFixed(l,0,f),b&&!C&&Number(x)>=1e3&&b!==h.abbreviations.trillion)switch(x=String(Number(x)/1e3),b){case h.abbreviations.thousand:b=h.abbreviations.million;break;case h.abbreviations.million:b=h.abbreviations.billion;break;case h.abbreviations.billion:b=h.abbreviations.trillion;break}if(e._.includes(x,"-")&&(x=x.slice(1),g=!0),x.length<d)for(var G=d-x.length;G>0;G--)x="0"+x;return W>-1&&(x=x.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h.delimiters.thousands)),u.indexOf(".")===0&&(x=""),J=x+y+(b||""),m?J=(m&&g?"(":"")+J+(m&&g?")":""):N>=0?J=N===0?(g?"-":"+")+J:J+(g?"-":"+"):g&&(J="-"+J),J},stringToNumber:function(l){var u=r[o.currentLocale],f=l,h={thousand:3,million:6,billion:9,trillion:12},m,v,d;if(o.zeroFormat&&l===o.zeroFormat)v=0;else if(o.nullFormat&&l===o.nullFormat||!l.replace(/[^0-9]+/g,"").length)v=null;else{v=1,u.delimiters.decimal!=="."&&(l=l.replace(/\./g,"").replace(u.delimiters.decimal,"."));for(m in h)if(d=new RegExp("[^a-zA-Z]"+u.abbreviations[m]+"(?:\\)|(\\"+u.currency.symbol+")?(?:\\))?)?$"),f.match(d)){v*=Math.pow(10,h[m]);break}v*=(l.split("-").length+Math.min(l.split("(").length-1,l.split(")").length-1))%2?1:-1,l=l.replace(/[^0-9\.]+/g,""),v*=Number(l)}return v},isNaN:function(l){return typeof l=="number"&&isNaN(l)},includes:function(l,u){return l.indexOf(u)!==-1},insert:function(l,u,f){return l.slice(0,f)+u+l.slice(f)},reduce:function(l,u){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof u!="function")throw new TypeError(u+" is not a function");var f=Object(l),h=f.length>>>0,m=0,v;if(arguments.length===3)v=arguments[2];else{for(;m<h&&!(m in f);)m++;if(m>=h)throw new TypeError("Reduce of empty array with no initial value");v=f[m++]}for(;m<h;m++)m in f&&(v=u(v,f[m],m,f));return v},multiplier:function(l){var u=l.toString().split(".");return u.length<2?1:Math.pow(10,u[1].length)},correctionFactor:function(){var l=Array.prototype.slice.call(arguments);return l.reduce(function(u,f){var h=n.multiplier(f);return u>h?u:h},1)},toFixed:function(l,u,f,h){var m=l.toString().split("."),v=u-(h||0),d,b,E,T;return m.length===2?d=Math.min(Math.max(m[1].length,v),u):d=v,E=Math.pow(10,d),T=(f(l+"e+"+d)/E).toFixed(d),h>u-d&&(b=new RegExp("\\.?0{1,"+(h-(u-d))+"}$"),T=T.replace(b,"")),T}},e.options=o,e.formats=i,e.locales=r,e.locale=function(l){return l&&(o.currentLocale=l.toLowerCase()),o.currentLocale},e.localeData=function(l){if(!l)return r[o.currentLocale];if(l=l.toLowerCase(),!r[l])throw new Error("Unknown locale : "+l);return r[l]},e.reset=function(){for(var l in a)o[l]=a[l]},e.zeroFormat=function(l){o.zeroFormat=typeof l=="string"?l:null},e.nullFormat=function(l){o.nullFormat=typeof l=="string"?l:null},e.defaultFormat=function(l){o.defaultFormat=typeof l=="string"?l:"0.0"},e.register=function(l,u,f){if(u=u.toLowerCase(),this[l+"s"][u])throw new TypeError(u+" "+l+" already registered.");return this[l+"s"][u]=f,f},e.validate=function(l,u){var f,h,m,v,d,b,E,T;if(typeof l!="string"&&(l+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",l)),l=l.trim(),l.match(/^\d+$/))return!0;if(l==="")return!1;try{E=e.localeData(u)}catch{E=e.localeData(e.locale())}return m=E.currency.symbol,d=E.abbreviations,f=E.delimiters.decimal,E.delimiters.thousands==="."?h="\\.":h=E.delimiters.thousands,T=l.match(/^[^\d]+/),T!==null&&(l=l.substr(1),T[0]!==m)||(T=l.match(/[^\d]+$/),T!==null&&(l=l.slice(0,-1),T[0]!==d.thousand&&T[0]!==d.million&&T[0]!==d.billion&&T[0]!==d.trillion))?!1:(b=new RegExp(h+"{2}"),l.match(/[^\d.,]/g)?!1:(v=l.split(f),v.length>2?!1:v.length<2?!!v[0].match(/^\d+.*\d$/)&&!v[0].match(b):v[0].length===1?!!v[0].match(/^\d+$/)&&!v[0].match(b)&&!!v[1].match(/^\d+$/):!!v[0].match(/^\d+.*\d$/)&&!v[0].match(b)&&!!v[1].match(/^\d+$/)))},e.fn=c.prototype={clone:function(){return e(this)},format:function(l,u){var f=this._value,h=l||o.defaultFormat,m,v,d;if(u=u||Math.round,f===0&&o.zeroFormat!==null)v=o.zeroFormat;else if(f===null&&o.nullFormat!==null)v=o.nullFormat;else{for(m in i)if(h.match(i[m].regexps.format)){d=i[m].format;break}d=d||e._.numberToFormat,v=d(f,h,u)}return v},value:function(){return this._value},input:function(){return this._input},set:function(l){return this._value=Number(l),this},add:function(l){var u=n.correctionFactor.call(null,this._value,l);function f(h,m,v,d){return h+Math.round(u*m)}return this._value=n.reduce([this._value,l],f,0)/u,this},subtract:function(l){var u=n.correctionFactor.call(null,this._value,l);function f(h,m,v,d){return h-Math.round(u*m)}return this._value=n.reduce([l],f,Math.round(this._value*u))/u,this},multiply:function(l){function u(f,h,m,v){var d=n.correctionFactor(f,h);return Math.round(f*d)*Math.round(h*d)/Math.round(d*d)}return this._value=n.reduce([this._value,l],u,1),this},divide:function(l){function u(f,h,m,v){var d=n.correctionFactor(f,h);return Math.round(f*d)/Math.round(h*d)}return this._value=n.reduce([this._value,l],u),this},difference:function(l){return Math.abs(e(this._value).subtract(l).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(l){var u=l%10;return~~(l%100/10)===1?"th":u===1?"st":u===2?"nd":u===3?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(l,u,f){var h=e._.includes(u," BPS")?" ":"",m;return l=l*1e4,u=u.replace(/\s?BPS/,""),m=e._.numberToFormat(l,u,f),e._.includes(m,")")?(m=m.split(""),m.splice(-1,0,h+"BPS"),m=m.join("")):m=m+h+"BPS",m},unformat:function(l){return+(e._.stringToNumber(l)*1e-4).toFixed(15)}})}(),function(){var l={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},u={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},f=l.suffixes.concat(u.suffixes.filter(function(m){return l.suffixes.indexOf(m)<0})),h=f.join("|");h="("+h.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(h)},format:function(m,v,d){var b,E=e._.includes(v,"ib")?u:l,T=e._.includes(v," b")||e._.includes(v," ib")?" ":"",A,$,y;for(v=v.replace(/\s?i?b/,""),A=0;A<=E.suffixes.length;A++)if($=Math.pow(E.base,A),y=Math.pow(E.base,A+1),m===null||m===0||m>=$&&m<y){T+=E.suffixes[A],$>0&&(m=m/$);break}return b=e._.numberToFormat(m,v,d),b+T},unformat:function(m){var v=e._.stringToNumber(m),d,b;if(v){for(d=l.suffixes.length-1;d>=0;d--){if(e._.includes(m,l.suffixes[d])){b=Math.pow(l.base,d);break}if(e._.includes(m,u.suffixes[d])){b=Math.pow(u.base,d);break}}v*=b||1}return v}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(l,u,f){var h=e.locales[e.options.currentLocale],m={before:u.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:u.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,d,b;for(u=u.replace(/\s?\$\s?/,""),v=e._.numberToFormat(l,u,f),l>=0?(m.before=m.before.replace(/[\-\(]/,""),m.after=m.after.replace(/[\-\)]/,"")):l<0&&!e._.includes(m.before,"-")&&!e._.includes(m.before,"(")&&(m.before="-"+m.before),b=0;b<m.before.length;b++)switch(d=m.before[b],d){case"$":v=e._.insert(v,h.currency.symbol,b);break;case" ":v=e._.insert(v," ",b+h.currency.symbol.length-1);break}for(b=m.after.length-1;b>=0;b--)switch(d=m.after[b],d){case"$":v=b===m.after.length-1?v+h.currency.symbol:e._.insert(v,h.currency.symbol,-(m.after.length-(1+b)));break;case" ":v=b===m.after.length-1?v+" ":e._.insert(v," ",-(m.after.length-(1+b)+h.currency.symbol.length-1));break}return v}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(l,u,f){var h,m=typeof l=="number"&&!e._.isNaN(l)?l.toExponential():"0e+0",v=m.split("e");return u=u.replace(/e[\+|\-]{1}0/,""),h=e._.numberToFormat(Number(v[0]),u,f),h+"e"+v[1]},unformat:function(l){var u=e._.includes(l,"e+")?l.split("e+"):l.split("e-"),f=Number(u[0]),h=Number(u[1]);h=e._.includes(l,"e-")?h*=-1:h;function m(v,d,b,E){var T=e._.correctionFactor(v,d),A=v*T*(d*T)/(T*T);return A}return e._.reduce([f,Math.pow(10,h)],m,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(l,u,f){var h=e.locales[e.options.currentLocale],m,v=e._.includes(u," o")?" ":"";return u=u.replace(/\s?o/,""),v+=h.ordinal(l),m=e._.numberToFormat(l,u,f),m+v}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(l,u,f){var h=e._.includes(u," %")?" ":"",m;return e.options.scalePercentBy100&&(l=l*100),u=u.replace(/\s?\%/,""),m=e._.numberToFormat(l,u,f),e._.includes(m,")")?(m=m.split(""),m.splice(-1,0,h+"%"),m=m.join("")):m=m+h+"%",m},unformat:function(l){var u=e._.stringToNumber(l);return e.options.scalePercentBy100?u*.01:u}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(l,u,f){var h=Math.floor(l/60/60),m=Math.floor((l-h*60*60)/60),v=Math.round(l-h*60*60-m*60);return h+":"+(m<10?"0"+m:m)+":"+(v<10?"0"+v:v)},unformat:function(l){var u=l.split(":"),f=0;return u.length===3?(f=f+Number(u[0])*60*60,f=f+Number(u[1])*60,f=f+Number(u[2])):u.length===2&&(f=f+Number(u[0])*60,f=f+Number(u[1])),Number(f)}})}(),e})}(Yi)),Yi.exports}Fp();wd();const Bp=`<h2 id="koharu-label">Koharu Label<a target="_blank" style="float:right" href="https://github.com/bolanxian/koharu-label"><i class="ivu-icon ivu-icon-logo-github" style="font-size:1.2em"></i></a></h2>
<p>将标注文件和音高组合为 Synthesizer V Studio 工程文件或 OpenUtau 工程文件。</p>
<h3 id="从-neutrino">从 NEUTRINO</h3>
<p><code>NEUTRINO/score/label/timing/*.lab</code><br><code>NEUTRINO/output/*.f0</code>  </p>
<h3 id="从-voicevox">从 VOICEVOX</h3>
<p>首先在 设置＞保存 打开 <code>labファイルを書き出し</code>  </p>
<h3 id="world">WORLD</h3>
<p>WORLD声码器提供了 <code>DIO</code> 和 <code>Harvest</code> 两个基频估计方法<br>在本页面控制台执行 <code>vm.useHarvest=true</code> 可切换为 <code>Harvest</code>  </p>
<h3 id="koharu-label-syncer"><a target="_blank" href="#syncer">Koharu Label Syncer</a></h3>
<h3 id="koharu-label-syncer-legacy"><a target="_blank" href="#syncer-legacy">Koharu Label Syncer (Legacy)</a></h3>
<h3 id="歌词转换工具"><a target="_blank" href="#lyric">歌词转换工具</a></h3>
`,da={hu:"ふ,フ",kwa:"くぁ,クァ,クヮ,くゎ",kwi:"くぃ,クィ",kwu:"くぅ,クゥ",kwe:"くぇ,クェ",kwo:"くぉ,クォ",gwa:"ぐぁ,グァ,グヮ,ぐゎ",gwi:"ぐぃ,グィ",gwu:"ぐぅ,グゥ",gwe:"ぐぇ,グェ",gwo:"ぐぉ,グォ",byo:"びょ,ヴョ,ゔょ,ヴょ,ビョ",byu:"びゅ,ヴュ,ゔゅ,ヴゅ,ビュ",bya:"びゃ,ヴャ,ゔゃ,ヴゃ,ビャ",vo:"ゔぉ,ヴォ,ヴぉ",ve:"ゔぇ,ヴェ,ヴぇ",vi:"ゔぃ,ヴィ,ヴぃ",va:"ゔぁ,ヴァ,ヴぁ",vu:"ゔ,ヴ",N:"ん,ン",n:"ん,ン",o:"お,オ,を,ヲ,ぉ,ォ",e:"え,エ,ゑ,ヱ,ぇ,ェ",i:"い,イ,ゐ,ヰ,ぃ,ィ",wa:"わ,ワ,ゎ,ヮ",ro:"ろ,ロ",re:"れ,レ",ru:"る,ル",ryo:"りょ,リョ",ryu:"りゅ,リュ",rya:"りゃ,リャ",rye:"りぇ,リェ",ri:"り,リ",ra:"ら,ラ",yo:"よ,ヨ,ょ,ョ",yu:"ゆ,ユ,ゅ,ュ",ya:"や,ヤ,ゃ,ャ",mo:"も,モ",me:"め,メ",mu:"む,ム",myo:"みょ,ミョ",myu:"みゅ,ミュ",mya:"みゃ,ミャ",mye:"みぇ,ミェ",mi:"み,ミ",ma:"ま,マ",po:"ぽ,ポ",bo:"ぼ,ボ",ho:"ほ,ホ",pe:"ぺ,ペ",be:"べ,ベ",he:"へ,ヘ",pu:"ぷ,プ",bu:"ぶ,ブ",fo:"ふぉ,フォ",fe:"ふぇ,フェ",fi:"ふぃ,フィ",fa:"ふぁ,ファ",fu:"ふ,フ",pyo:"ぴょ,ピョ",pyu:"ぴゅ,ピュ",pya:"ぴゃ,ピャ",pye:"ぴぇ,ピェ",pi:"ぴ,ピ",bye:"びぇ,ビェ",bi:"び,ビ",hyo:"ひょ,ヒョ",hyu:"ひゅ,ヒュ",hya:"ひゃ,ヒャ",hye:"ひぇ,ヒェ",hi:"ひ,ヒ",pa:"ぱ,パ",ba:"ば,バ",ha:"は,ハ",no:"の,ノ",ne:"ね,ネ",nu:"ぬ,ヌ",nyo:"にょ,ニョ",nyu:"にゅ,ニュ",nya:"にゃ,ニャ",nye:"にぇ,ニェ",ni:"に,ニ",na:"な,ナ",du:"どぅ,ドゥ",do:"ど,ド",tu:"とぅ,トゥ",to:"と,ト",dyo:"でょ,デョ",dyu:"でゅ,デュ",dya:"でゃ,デャ",dye:"でぇ,デェ",di:"でぃ,ディ",de:"で,デ",tyo:"てょ,テョ",tyu:"てゅ,テュ",tya:"てゃ,テャ",ti:"てぃ,ティ",te:"て,テ",zu:"ず,ズ,づ,ヅ",tso:"つぉ,ツォ",tse:"つぇ,ツェ",tsi:"つぃ,ツィ",tsa:"つぁ,ツァ",tsu:"つ,ツ",cl:"っ,ッ",ji:"じ,ジ,ぢ,ヂ",cho:"ちょ,チョ",chu:"ちゅ,チュ",cha:"ちゃ,チャ",che:"ちぇ,チェ",chi:"ち,チ",da:"だ,ダ",ta:"た,タ",zo:"ぞ,ゾ",so:"そ,ソ",ze:"ぜ,ゼ",se:"せ,セ",zi:"ずぃ,ズィ",si:"すぃ,スィ,しぃ,シィ",su:"す,ス",jo:"じょ,ジョ",ju:"じゅ,ジュ",ja:"じゃ,ジャ",je:"じぇ,ジェ",sho:"しょ,ショ",shu:"しゅ,シュ",sha:"しゃ,シャ",she:"しぇ,シェ",shi:"し,シ",za:"ざ,ザ",sa:"さ,サ",go:"ご,ゴ",ko:"こ,コ",ge:"げ,ゲ",ke:"け,ケ",gu:"ぐ,グ",ku:"く,ク",gyo:"ぎょ,ギョ",gyu:"ぎゅ,ギュ",gya:"ぎゃ,ギャ",gye:"ぎぇ,ギェ",gi:"ぎ,ギ",kyo:"きょ,キョ",kyu:"きゅ,キュ",kya:"きゃ,キャ",kye:"きぇ,キェ",ki:"き,キ",ga:"が,ガ",ka:"か,カ",wo:"うぉ,ウォ",we:"うぇ,ウェ",wi:"うぃ,ウィ",u:"う,ウ,ぅ,ゥ",ye:"いぇ,イェ",a:"あ,ア,ぁ,ァ","-":"ー,ー","\\'":"’,’"},Qc="kwa|kwi|kwu|kwe|kwo|gwa|gwi|gwu|gwe|gwo|byo|byu|bya|ryo|ryu|rya|rye|myo|myu|mya|mye|pyo|pyu|pya|pye|bye|hyo|hyu|hya|hye|nyo|nyu|nya|nye|dyo|dyu|dya|dye|tyo|tyu|tya|tso|tse|tsi|tsa|tsu|cho|chu|cha|che|chi|sho|shu|sha|she|shi|gyo|gyu|gya|gye|kyo|kyu|kya|kye|hu|vo|ve|vi|va|vu|wa|ro|re|ru|ri|ra|yo|yu|ya|mo|me|mu|mi|ma|po|bo|ho|pe|be|he|pu|bu|fo|fe|fi|fa|fu|pi|bi|hi|pa|ba|ha|no|ne|nu|ni|na|du|do|tu|to|di|de|ti|te|zu|cl|ji|da|ta|zo|so|ze|se|zi|si|su|jo|ju|ja|je|za|sa|go|ko|ge|ke|gu|ku|gi|ki|ga|ka|wo|we|wi|ye|\\\\'|N|n|o|e|i|u|a|-",zp={ふ:"fu",フ:"fu",くぁ:"kwa",クァ:"kwa",クヮ:"kwa",くゎ:"kwa",くぃ:"kwi",クィ:"kwi",くぅ:"kwu",クゥ:"kwu",くぇ:"kwe",クェ:"kwe",くぉ:"kwo",クォ:"kwo",ぐぁ:"gwa",グァ:"gwa",グヮ:"gwa",ぐゎ:"gwa",ぐぃ:"gwi",グィ:"gwi",ぐぅ:"gwu",グゥ:"gwu",ぐぇ:"gwe",グェ:"gwe",ぐぉ:"gwo",グォ:"gwo",びょ:"byo",ヴョ:"byo",ゔょ:"byo",ヴょ:"byo",ビョ:"byo",びゅ:"byu",ヴュ:"byu",ゔゅ:"byu",ヴゅ:"byu",ビュ:"byu",びゃ:"bya",ヴャ:"bya",ゔゃ:"bya",ヴゃ:"bya",ビャ:"bya",ゔぉ:"vo",ヴォ:"vo",ヴぉ:"vo",ゔぇ:"ve",ヴェ:"ve",ヴぇ:"ve",ゔぃ:"vi",ヴィ:"vi",ヴぃ:"vi",ゔぁ:"va",ヴァ:"va",ヴぁ:"va",ゔ:"vu",ヴ:"vu",ん:"n",ン:"n",お:"o",オ:"o",を:"o",ヲ:"o",ぉ:"o",ォ:"o",え:"e",エ:"e",ゑ:"e",ヱ:"e",ぇ:"e",ェ:"e",い:"i",イ:"i",ゐ:"i",ヰ:"i",ぃ:"i",ィ:"i",わ:"wa",ワ:"wa",ゎ:"wa",ヮ:"wa",ろ:"ro",ロ:"ro",れ:"re",レ:"re",る:"ru",ル:"ru",りょ:"ryo",リョ:"ryo",りゅ:"ryu",リュ:"ryu",りゃ:"rya",リャ:"rya",りぇ:"rye",リェ:"rye",り:"ri",リ:"ri",ら:"ra",ラ:"ra",よ:"yo",ヨ:"yo",ょ:"yo",ョ:"yo",ゆ:"yu",ユ:"yu",ゅ:"yu",ュ:"yu",や:"ya",ヤ:"ya",ゃ:"ya",ャ:"ya",も:"mo",モ:"mo",め:"me",メ:"me",む:"mu",ム:"mu",みょ:"myo",ミョ:"myo",みゅ:"myu",ミュ:"myu",みゃ:"mya",ミャ:"mya",みぇ:"mye",ミェ:"mye",み:"mi",ミ:"mi",ま:"ma",マ:"ma",ぽ:"po",ポ:"po",ぼ:"bo",ボ:"bo",ほ:"ho",ホ:"ho",ぺ:"pe",ペ:"pe",べ:"be",ベ:"be",へ:"he",ヘ:"he",ぷ:"pu",プ:"pu",ぶ:"bu",ブ:"bu",ふぉ:"fo",フォ:"fo",ふぇ:"fe",フェ:"fe",ふぃ:"fi",フィ:"fi",ふぁ:"fa",ファ:"fa",ぴょ:"pyo",ピョ:"pyo",ぴゅ:"pyu",ピュ:"pyu",ぴゃ:"pya",ピャ:"pya",ぴぇ:"pye",ピェ:"pye",ぴ:"pi",ピ:"pi",びぇ:"bye",ビェ:"bye",び:"bi",ビ:"bi",ひょ:"hyo",ヒョ:"hyo",ひゅ:"hyu",ヒュ:"hyu",ひゃ:"hya",ヒャ:"hya",ひぇ:"hye",ヒェ:"hye",ひ:"hi",ヒ:"hi",ぱ:"pa",パ:"pa",ば:"ba",バ:"ba",は:"ha",ハ:"ha",の:"no",ノ:"no",ね:"ne",ネ:"ne",ぬ:"nu",ヌ:"nu",にょ:"nyo",ニョ:"nyo",にゅ:"nyu",ニュ:"nyu",にゃ:"nya",ニャ:"nya",にぇ:"nye",ニェ:"nye",に:"ni",ニ:"ni",な:"na",ナ:"na",どぅ:"du",ドゥ:"du",ど:"do",ド:"do",とぅ:"tu",トゥ:"tu",と:"to",ト:"to",でょ:"dyo",デョ:"dyo",でゅ:"dyu",デュ:"dyu",でゃ:"dya",デャ:"dya",でぇ:"dye",デェ:"dye",でぃ:"di",ディ:"di",で:"de",デ:"de",てょ:"tyo",テョ:"tyo",てゅ:"tyu",テュ:"tyu",てゃ:"tya",テャ:"tya",てぃ:"ti",ティ:"ti",て:"te",テ:"te",ず:"zu",ズ:"zu",づ:"zu",ヅ:"zu",つぉ:"tso",ツォ:"tso",つぇ:"tse",ツェ:"tse",つぃ:"tsi",ツィ:"tsi",つぁ:"tsa",ツァ:"tsa",つ:"tsu",ツ:"tsu",っ:"cl",ッ:"cl",じ:"ji",ジ:"ji",ぢ:"ji",ヂ:"ji",ちょ:"cho",チョ:"cho",ちゅ:"chu",チュ:"chu",ちゃ:"cha",チャ:"cha",ちぇ:"che",チェ:"che",ち:"chi",チ:"chi",だ:"da",ダ:"da",た:"ta",タ:"ta",ぞ:"zo",ゾ:"zo",そ:"so",ソ:"so",ぜ:"ze",ゼ:"ze",せ:"se",セ:"se",ずぃ:"zi",ズィ:"zi",すぃ:"si",スィ:"si",しぃ:"si",シィ:"si",す:"su",ス:"su",じょ:"jo",ジョ:"jo",じゅ:"ju",ジュ:"ju",じゃ:"ja",ジャ:"ja",じぇ:"je",ジェ:"je",しょ:"sho",ショ:"sho",しゅ:"shu",シュ:"shu",しゃ:"sha",シャ:"sha",しぇ:"she",シェ:"she",し:"shi",シ:"shi",ざ:"za",ザ:"za",さ:"sa",サ:"sa",ご:"go",ゴ:"go",こ:"ko",コ:"ko",げ:"ge",ゲ:"ge",け:"ke",ケ:"ke",ぐ:"gu",グ:"gu",く:"ku",ク:"ku",ぎょ:"gyo",ギョ:"gyo",ぎゅ:"gyu",ギュ:"gyu",ぎゃ:"gya",ギャ:"gya",ぎぇ:"gye",ギェ:"gye",ぎ:"gi",ギ:"gi",きょ:"kyo",キョ:"kyo",きゅ:"kyu",キュ:"kyu",きゃ:"kya",キャ:"kya",きぇ:"kye",キェ:"kye",き:"ki",キ:"ki",が:"ga",ガ:"ga",か:"ka",カ:"ka",うぉ:"wo",ウォ:"wo",うぇ:"we",ウェ:"we",うぃ:"wi",ウィ:"wi",う:"u",ウ:"u",ぅ:"u",ゥ:"u",いぇ:"ye",イェ:"ye",あ:"a",ア:"a",ぁ:"a",ァ:"a",ー:"-","’":"\\'"},Up="くぁ|クァ|クヮ|くゎ|くぃ|クィ|くぅ|クゥ|くぇ|クェ|くぉ|クォ|ぐぁ|グァ|グヮ|ぐゎ|ぐぃ|グィ|ぐぅ|グゥ|ぐぇ|グェ|ぐぉ|グォ|びょ|ヴョ|ゔょ|ヴょ|ビョ|びゅ|ヴュ|ゔゅ|ヴゅ|ビュ|びゃ|ヴャ|ゔゃ|ヴゃ|ビャ|ゔぉ|ヴォ|ヴぉ|ゔぇ|ヴェ|ヴぇ|ゔぃ|ヴィ|ヴぃ|ゔぁ|ヴァ|ヴぁ|りょ|リョ|りゅ|リュ|りゃ|リャ|りぇ|リェ|みょ|ミョ|みゅ|ミュ|みゃ|ミャ|みぇ|ミェ|ふぉ|フォ|ふぇ|フェ|ふぃ|フィ|ふぁ|ファ|ぴょ|ピョ|ぴゅ|ピュ|ぴゃ|ピャ|ぴぇ|ピェ|びぇ|ビェ|ひょ|ヒョ|ひゅ|ヒュ|ひゃ|ヒャ|ひぇ|ヒェ|にょ|ニョ|にゅ|ニュ|にゃ|ニャ|にぇ|ニェ|どぅ|ドゥ|とぅ|トゥ|でょ|デョ|でゅ|デュ|でゃ|デャ|でぇ|デェ|でぃ|ディ|てょ|テョ|てゅ|テュ|てゃ|テャ|てぃ|ティ|つぉ|ツォ|つぇ|ツェ|つぃ|ツィ|つぁ|ツァ|ちょ|チョ|ちゅ|チュ|ちゃ|チャ|ちぇ|チェ|ずぃ|ズィ|すぃ|スィ|しぃ|シィ|じょ|ジョ|じゅ|ジュ|じゃ|ジャ|じぇ|ジェ|しょ|ショ|しゅ|シュ|しゃ|シャ|しぇ|シェ|ぎょ|ギョ|ぎゅ|ギュ|ぎゃ|ギャ|ぎぇ|ギェ|きょ|キョ|きゅ|キュ|きゃ|キャ|きぇ|キェ|うぉ|ウォ|うぇ|ウェ|うぃ|ウィ|いぇ|イェ|ふ|フ|ゔ|ヴ|ん|ン|お|オ|を|ヲ|ぉ|ォ|え|エ|ゑ|ヱ|ぇ|ェ|い|イ|ゐ|ヰ|ぃ|ィ|わ|ワ|ゎ|ヮ|ろ|ロ|れ|レ|る|ル|り|リ|ら|ラ|よ|ヨ|ょ|ョ|ゆ|ユ|ゅ|ュ|や|ヤ|ゃ|ャ|も|モ|め|メ|む|ム|み|ミ|ま|マ|ぽ|ポ|ぼ|ボ|ほ|ホ|ぺ|ペ|べ|ベ|へ|ヘ|ぷ|プ|ぶ|ブ|ぴ|ピ|び|ビ|ひ|ヒ|ぱ|パ|ば|バ|は|ハ|の|ノ|ね|ネ|ぬ|ヌ|に|ニ|な|ナ|ど|ド|と|ト|で|デ|て|テ|ず|ズ|づ|ヅ|つ|ツ|っ|ッ|じ|ジ|ぢ|ヂ|ち|チ|だ|ダ|た|タ|ぞ|ゾ|そ|ソ|ぜ|ゼ|せ|セ|す|ス|し|シ|ざ|ザ|さ|サ|ご|ゴ|こ|コ|げ|ゲ|け|ケ|ぐ|グ|く|ク|ぎ|ギ|き|キ|が|ガ|か|カ|う|ウ|ぅ|ゥ|あ|ア|ぁ|ァ|ー|’",qp={ｶﾞ:"ガ",ｷﾞ:"ギ",ｸﾞ:"グ",ｹﾞ:"ゲ",ｺﾞ:"ゴ",ｻﾞ:"ザ",ｼﾞ:"ジ",ｽﾞ:"ズ",ｾﾞ:"ゼ",ｿﾞ:"ゾ",ﾀﾞ:"ダ",ﾁﾞ:"ヂ",ﾂﾞ:"ヅ",ﾃﾞ:"デ",ﾄﾞ:"ド",ﾊﾞ:"バ",ﾋﾞ:"ビ",ﾌﾞ:"ブ",ﾍﾞ:"ベ",ﾎﾞ:"ボ",ﾊﾟ:"パ",ﾋﾟ:"ピ",ﾌﾟ:"プ",ﾍﾟ:"ペ",ﾎﾟ:"ポ",ｳﾞ:"ヴ",ｱ:"ア",ｲ:"イ",ｳ:"ウ",ｴ:"エ",ｵ:"オ",ｶ:"カ",ｷ:"キ",ｸ:"ク",ｹ:"ケ",ｺ:"コ",ｻ:"サ",ｼ:"シ",ｽ:"ス",ｾ:"セ",ｿ:"ソ",ﾀ:"タ",ﾁ:"チ",ﾂ:"ツ",ﾃ:"テ",ﾄ:"ト",ﾅ:"ナ",ﾆ:"ニ",ﾇ:"ヌ",ﾈ:"ネ",ﾉ:"ノ",ﾊ:"ハ",ﾋ:"ヒ",ﾌ:"フ",ﾍ:"ヘ",ﾎ:"ホ",ﾏ:"マ",ﾐ:"ミ",ﾑ:"ム",ﾒ:"メ",ﾓ:"モ",ﾔ:"ヤ",ﾕ:"ユ",ﾖ:"ヨ",ﾗ:"ラ",ﾘ:"リ",ﾙ:"ル",ﾚ:"レ",ﾛ:"ロ",ﾜ:"ワ",ｦ:"ヲ",ﾝ:"ン",ｧ:"ァ",ｨ:"ィ",ｩ:"ゥ",ｪ:"ェ",ｫ:"ォ",ｬ:"ャ",ｭ:"ュ",ｮ:"ョ",ｯ:"ッ","｡":"。","｢":"「","｣":"」","､":"、","･":"・",ｰ:"ー"},Wp="ｶﾞ|ｷﾞ|ｸﾞ|ｹﾞ|ｺﾞ|ｻﾞ|ｼﾞ|ｽﾞ|ｾﾞ|ｿﾞ|ﾀﾞ|ﾁﾞ|ﾂﾞ|ﾃﾞ|ﾄﾞ|ﾊﾞ|ﾋﾞ|ﾌﾞ|ﾍﾞ|ﾎﾞ|ﾊﾟ|ﾋﾟ|ﾌﾟ|ﾍﾟ|ﾎﾟ|ｳﾞ|ｱ|ｲ|ｳ|ｴ|ｵ|ｶ|ｷ|ｸ|ｹ|ｺ|ｻ|ｼ|ｽ|ｾ|ｿ|ﾀ|ﾁ|ﾂ|ﾃ|ﾄ|ﾅ|ﾆ|ﾇ|ﾈ|ﾉ|ﾊ|ﾋ|ﾌ|ﾍ|ﾎ|ﾏ|ﾐ|ﾑ|ﾒ|ﾓ|ﾔ|ﾕ|ﾖ|ﾗ|ﾘ|ﾙ|ﾚ|ﾛ|ﾜ|ｦ|ﾝ|ｧ|ｨ|ｩ|ｪ|ｫ|ｬ|ｭ|ｮ|ｯ|｡|｢|｣|､|･|ｰ",Hp={ガ:"ｶﾞ",ギ:"ｷﾞ",グ:"ｸﾞ",ゲ:"ｹﾞ",ゴ:"ｺﾞ",ザ:"ｻﾞ",ジ:"ｼﾞ",ズ:"ｽﾞ",ゼ:"ｾﾞ",ゾ:"ｿﾞ",ダ:"ﾀﾞ",ヂ:"ﾁﾞ",ヅ:"ﾂﾞ",デ:"ﾃﾞ",ド:"ﾄﾞ",バ:"ﾊﾞ",ビ:"ﾋﾞ",ブ:"ﾌﾞ",ベ:"ﾍﾞ",ボ:"ﾎﾞ",パ:"ﾊﾟ",ピ:"ﾋﾟ",プ:"ﾌﾟ",ペ:"ﾍﾟ",ポ:"ﾎﾟ",ヴ:"ｳﾞ",ア:"ｱ",イ:"ｲ",ウ:"ｳ",エ:"ｴ",オ:"ｵ",カ:"ｶ",キ:"ｷ",ク:"ｸ",ケ:"ｹ",コ:"ｺ",サ:"ｻ",シ:"ｼ",ス:"ｽ",セ:"ｾ",ソ:"ｿ",タ:"ﾀ",チ:"ﾁ",ツ:"ﾂ",テ:"ﾃ",ト:"ﾄ",ナ:"ﾅ",ニ:"ﾆ",ヌ:"ﾇ",ネ:"ﾈ",ノ:"ﾉ",ハ:"ﾊ",ヒ:"ﾋ",フ:"ﾌ",ヘ:"ﾍ",ホ:"ﾎ",マ:"ﾏ",ミ:"ﾐ",ム:"ﾑ",メ:"ﾒ",モ:"ﾓ",ヤ:"ﾔ",ユ:"ﾕ",ヨ:"ﾖ",ラ:"ﾗ",リ:"ﾘ",ル:"ﾙ",レ:"ﾚ",ロ:"ﾛ",ワ:"ﾜ",ヲ:"ｦ",ン:"ﾝ",ァ:"ｧ",ィ:"ｨ",ゥ:"ｩ",ェ:"ｪ",ォ:"ｫ",ャ:"ｬ",ュ:"ｭ",ョ:"ｮ",ッ:"ｯ","。":"｡","「":"｢","」":"｣","、":"､","・":"･",ー:"ｰ"},Kp="ガ|ギ|グ|ゲ|ゴ|ザ|ジ|ズ|ゼ|ゾ|ダ|ヂ|ヅ|デ|ド|バ|ビ|ブ|ベ|ボ|パ|ピ|プ|ペ|ポ|ヴ|ア|イ|ウ|エ|オ|カ|キ|ク|ケ|コ|サ|シ|ス|セ|ソ|タ|チ|ツ|テ|ト|ナ|ニ|ヌ|ネ|ノ|ハ|ヒ|フ|ヘ|ホ|マ|ミ|ム|メ|モ|ヤ|ユ|ヨ|ラ|リ|ル|レ|ロ|ワ|ヲ|ン|ァ|ィ|ゥ|ェ|ォ|ャ|ュ|ョ|ッ|。|「|」|、|・|ー",ha=RegExp(Qc,"ig"),fl=RegExp(Up,"ig"),Zp=RegExp(Wp,"g"),Gp=RegExp(Kp,"g"),{fromCharCode:Yp}=String,{toLowerCase:dl,charCodeAt:Jp,replace:lo,split:hl}=String.prototype,Mn=t=>{const e=n=>{for(const s of e.map)n=gt(lo,n,s[0],s[1]);return n};return e.map=new Map(t),e},Qp=t=>{const e=n=>{for(const s of e.map){const i=gt(lo,n,s[0],s[1]);if(i!==n)return i;n=i}return n};return e.map=new Map(t),e},pl=[[RegExp(`(.)(?=\\1)(?=${gt(lo,Qc,/\|(?:.|\\\\')(?=\||$)/g,"")})`,"ig"),"cl"]],ds=Object.freeze({__proto__:null,table:da,reg:ha,fromReg:fl,from:Mn([[fl,t=>zp[t]??t]]),toHiragana:Mn([...pl,[ha,t=>{const e=da[gt(dl,t)];return e!=null?gt(hl,e,",",1)[0]:t}]]),toKatakana:Mn([...pl,[ha,t=>{const e=da[gt(dl,t)];return e!=null?gt(hl,e,",",2)[1]:t}]])}),Xc=(t,e)=>Mn([[t,n=>Yp(gt(Jp,n,0)+e)]]),Ma=Xc(/[\u30a1-\u30f6]/g,-96),eu=Xc(/[\u3041-\u3096]/g,96),tu=Mn([[Zp,t=>qp[t]]]),nu=Mn([[Gp,t=>Hp[t]]]),Xp=Object.freeze(Object.defineProperty({__proto__:null,replacer:Mn,replacerShort:Qp,romaji:ds,toFullKana:tu,toHalfKana:nu,toHiragana:Ma,toKatakana:eu},Symbol.toStringTag,{value:"Module"})),{isArray:em}=Array,tm=xs({emits:{dragover:null,drop:null},methods:{handle(t){this.$emit(t.type,t)}},beforeMount(){xo(document,"dragover",this.handle),xo(document,"drop",this.handle)},beforeUnmount(){wo(document,"dragover",this.handle),wo(document,"drop",this.handle)},render(){return ue("global")}}),$r=xs({name:"DropFile",emits:{change(t){return em(t)}},props:{accept:{type:String,default:""},global:{type:Boolean,default:!1},reason:{type:String,default:""},multiple:{type:Boolean,default:!0},paste:{type:Boolean,default:!1}},setup(t,e){const n=Te(null),s=Te(null);return{textarea:n,file:s}},methods:{handleClick(t){t.target!==this.file&&(this.file.click(),t.preventDefault()),t.stopPropagation()},handleChange(t){const e=this.file.files;e?.length>0&&this.$emit("change",Array.from(e))},handleDragover(t){t.preventDefault(),t.stopPropagation()},handleDrop(t){const e=t.target;if(this.global&&!this.$el.contains(e)&&t.type!=="paste"){const s=e.tagName.toUpperCase(),i=e.getAttribute("contenteditable");if(s==="INPUT"||s==="TEXTAREA"||i===""||i==="true")return}t.preventDefault(),t.stopPropagation();const n=(t.dataTransfer??t.clipboardData)?.files;n?.length>0&&this.$emit("change",Array.from(n))}},render(){const t=this,e=t.$slots.default;return k("div",{class:"ivu-upload ivu-upload-drag",onDragover:t.handleDragover,onDrop:t.handleDrop,onClick:t.handleClick},[t.global?k(tm,{onDragover:t.handleDragover,onDrop:t.handleDrop}):null,k("input",{ref:"file",type:"file",accept:t.accept,multiple:t.multiple,onChange:t.handleChange}),k("textarea",{ref:"textarea",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0 none",resize:"none",cursor:"pointer",opacity:"0"},onCopy:t.handleDragover,onPaste:t.handleDrop}),e!=null?e():[k("div",{class:"ivu-card-head",style:{"text-align":"left"}},[k("p",{},[k(st,{type:"ios-folder-open",size:20}),`单击或拖动${t.reason}文件到此${t.global?"页面":"处"}`])]),k("div",{class:"ivu-card-body"})]])}});var ve;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const r={};for(const a of i)r[a]=a;return r},t.getValidEnumValues=i=>{const r=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of r)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(r){return i[r]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.push(a);return r},t.find=(i,r)=>{for(const a of i)if(r(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}t.joinValues=s,t.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(ve||(ve={}));var Pa;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Pa||(Pa={}));const Y=ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xt=t=>{switch(typeof t){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return isNaN(t)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(t)?Y.array:t===null?Y.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Y.promise:typeof Map<"u"&&t instanceof Map?Y.map:typeof Set<"u"&&t instanceof Set?Y.set:typeof Date<"u"&&t instanceof Date?Y.date:Y.object;default:return Y.unknown}},j=ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nm=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class bt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)s._errors.push(n(a));else{let o=s,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(n(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return i(this),s}static assert(e){if(!(e instanceof bt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}bt.create=t=>new bt(t);const ys=(t,e)=>{let n;switch(t.code){case j.invalid_type:t.received===Y.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case j.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ve.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:n=`Unrecognized key(s) in object: ${ve.joinValues(t.keys,", ")}`;break;case j.invalid_union:n="Invalid input";break;case j.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ve.joinValues(t.options)}`;break;case j.invalid_enum_value:n=`Invalid enum value. Expected ${ve.joinValues(t.options)}, received '${t.received}'`;break;case j.invalid_arguments:n="Invalid function arguments";break;case j.invalid_return_type:n="Invalid function return type";break;case j.invalid_date:n="Invalid date";break;case j.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ve.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case j.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case j.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case j.custom:n="Invalid input";break;case j.invalid_intersection_types:n="Intersection results could not be merged";break;case j.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case j.not_finite:n="Number must be finite";break;default:n=e.defaultError,ve.assertNever(t)}return{message:n}};let su=ys;function sm(t){su=t}function ar(){return su}const or=t=>{const{data:e,path:n,errorMaps:s,issueData:i}=t,r=[...n,...i.path||[]],a={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...i,path:r,message:o}},im=[];function q(t,e){const n=ar(),s=or({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ys?void 0:ys].filter(i=>!!i)});t.common.issues.push(s)}class it{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const i of n){if(i.status==="aborted")return le;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const i of n){const r=await i.key,a=await i.value;s.push({key:r,value:a})}return it.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const i of n){const{key:r,value:a}=i;if(r.status==="aborted"||a.status==="aborted")return le;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(s[r.value]=a.value)}return{status:e.value,value:s}}}const le=Object.freeze({status:"aborted"}),rs=t=>({status:"dirty",value:t}),lt=t=>({status:"valid",value:t}),ja=t=>t.status==="aborted",Ra=t=>t.status==="dirty",Vn=t=>t.status==="valid",Qs=t=>typeof Promise<"u"&&t instanceof Promise;function lr(t,e,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function iu(t,e,n,s,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Q;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Q||(Q={}));var Bs,zs;class Kt{constructor(e,n,s,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ml=(t,e)=>{if(Vn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new bt(t.common.issues);return this._error=n,this._error}}};function de(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:i}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var c,l;const{message:u}=t;return a.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u??n)!==null&&l!==void 0?l:o.defaultError}},description:i}}class ge{get description(){return this._def.description}_getType(e){return Xt(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new it,ctx:{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Qs(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){var s;const i={common:{issues:[],async:(s=n?.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},r=this._parseSync({data:e,path:i.path,parent:i});return ml(i,r)}"~validate"(e){var n,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:i});return Vn(r)?{value:r.value}:{issues:i.common.issues}}catch(r){!((s=(n=r?.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(r=>Vn(r)?{value:r.value}:{issues:i.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(Qs(i)?i:Promise.resolve(i));return ml(s,r)}refine(e,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,r)=>{const a=e(i),o=()=>r.addIssue({code:j.custom,...s(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(e){return new Mt({schema:this,typeName:ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return qt.create(this,this._def)}nullable(){return _n.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $t.create(this)}promise(){return vs.create(this,this._def)}or(e){return ni.create([this,e],this._def)}and(e){return si.create(this,e,this._def)}transform(e){return new Mt({...de(this._def),schema:this,typeName:ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new li({...de(this._def),innerType:this,defaultValue:n,typeName:ae.ZodDefault})}brand(){return new co({typeName:ae.ZodBranded,type:this,...de(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ci({...de(this._def),innerType:this,catchValue:n,typeName:ae.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return _i.create(this,e)}readonly(){return ui.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rm=/^c[^\s-]{8,}$/i,am=/^[0-9a-z]+$/,om=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lm=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cm=/^[a-z0-9_-]{21}$/i,um=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fm=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dm=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hm="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pa;const pm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gm=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ym=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bm=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vm=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ru="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wm=new RegExp(`^${ru}$`);function au(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function xm(t){return new RegExp(`^${au(t)}$`)}function ou(t){let e=`${ru}T${au(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function km(t,e){return!!((e==="v4"||!e)&&pm.test(t)||(e==="v6"||!e)&&gm.test(t))}function Sm(t,e){if(!um.test(t))return!1;try{const[n]=t.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function _m(t,e){return!!((e==="v4"||!e)&&mm.test(t)||(e==="v6"||!e)&&ym.test(t))}class Nt extends ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Y.string){const r=this._getOrReturnCtx(e);return q(r,{code:j.invalid_type,expected:Y.string,received:r.parsedType}),le}const s=new it;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),q(i,{code:j.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),q(i,{code:j.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,o=e.data.length<r.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?q(i,{code:j.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&q(i,{code:j.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")dm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"email",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")pa||(pa=new RegExp(hm,"u")),pa.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"emoji",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")lm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"uuid",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")cm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"nanoid",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")rm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"cuid",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")am.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"cuid2",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")om.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"ulid",code:j.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),q(i,{validation:"url",code:j.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"regex",code:j.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?ou(r).test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?wm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?xm(r).test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{code:j.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?fm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"duration",code:j.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?km(e.data,r.version)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"ip",code:j.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?Sm(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"jwt",code:j.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?_m(e.data,r.version)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"cidr",code:j.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?bm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"base64",code:j.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?vm.test(e.data)||(i=this._getOrReturnCtx(e,i),q(i,{validation:"base64url",code:j.invalid_string,message:r.message}),s.dirty()):ve.assertNever(r);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(i=>e.test(i),{validation:n,code:j.invalid_string,...Q.errToObj(s)})}_addCheck(e){return new Nt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Q.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Q.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Q.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Q.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Q.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Q.errToObj(e)})}datetime(e){var n,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(s=e?.local)!==null&&s!==void 0?s:!1,...Q.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Q.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Q.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Q.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Q.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Q.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Q.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Q.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Q.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Q.errToObj(n)})}nonempty(e){return this.min(1,Q.errToObj(e))}trim(){return new Nt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Nt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Nt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Nt.create=t=>{var e;return new Nt({checks:[],typeName:ae.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...de(t)})};function Cm(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=n>s?n:s,r=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return r%a/Math.pow(10,i)}class xn extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Y.number){const r=this._getOrReturnCtx(e);return q(r,{code:j.invalid_type,expected:Y.number,received:r.parsedType}),le}let s;const i=new it;for(const r of this._def.checks)r.kind==="int"?ve.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:j.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?Cm(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:j.not_finite,message:r.message}),i.dirty()):ve.assertNever(r);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Q.toString(n))}setLimit(e,n,s,i){return new xn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:Q.toString(i)}]})}_addCheck(e){return new xn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Q.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Q.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ve.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}xn.create=t=>new xn({checks:[],typeName:ae.ZodNumber,coerce:t?.coerce||!1,...de(t)});class kn extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Y.bigint)return this._getInvalidInput(e);let s;const i=new it;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),q(s,{code:j.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):ve.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return q(n,{code:j.invalid_type,expected:Y.bigint,received:n.parsedType}),le}gte(e,n){return this.setLimit("min",e,!0,Q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Q.toString(n))}setLimit(e,n,s,i){return new kn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:Q.toString(i)}]})}_addCheck(e){return new kn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Q.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}kn.create=t=>{var e;return new kn({checks:[],typeName:ae.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...de(t)})};class Xs extends ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Y.boolean){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.boolean,received:s.parsedType}),le}return lt(e.data)}}Xs.create=t=>new Xs({typeName:ae.ZodBoolean,coerce:t?.coerce||!1,...de(t)});class Fn extends ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Y.date){const r=this._getOrReturnCtx(e);return q(r,{code:j.invalid_type,expected:Y.date,received:r.parsedType}),le}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return q(r,{code:j.invalid_date}),le}const s=new it;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),q(i,{code:j.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),q(i,{code:j.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):ve.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Q.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Q.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Fn.create=t=>new Fn({checks:[],coerce:t?.coerce||!1,typeName:ae.ZodDate,...de(t)});class cr extends ge{_parse(e){if(this._getType(e)!==Y.symbol){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.symbol,received:s.parsedType}),le}return lt(e.data)}}cr.create=t=>new cr({typeName:ae.ZodSymbol,...de(t)});class ei extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.undefined,received:s.parsedType}),le}return lt(e.data)}}ei.create=t=>new ei({typeName:ae.ZodUndefined,...de(t)});class ti extends ge{_parse(e){if(this._getType(e)!==Y.null){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.null,received:s.parsedType}),le}return lt(e.data)}}ti.create=t=>new ti({typeName:ae.ZodNull,...de(t)});class bs extends ge{constructor(){super(...arguments),this._any=!0}_parse(e){return lt(e.data)}}bs.create=t=>new bs({typeName:ae.ZodAny,...de(t)});class Pn extends ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lt(e.data)}}Pn.create=t=>new Pn({typeName:ae.ZodUnknown,...de(t)});class an extends ge{_parse(e){const n=this._getOrReturnCtx(e);return q(n,{code:j.invalid_type,expected:Y.never,received:n.parsedType}),le}}an.create=t=>new an({typeName:ae.ZodNever,...de(t)});class ur extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.void,received:s.parsedType}),le}return lt(e.data)}}ur.create=t=>new ur({typeName:ae.ZodVoid,...de(t)});class $t extends ge{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),i=this._def;if(n.parsedType!==Y.array)return q(n,{code:j.invalid_type,expected:Y.array,received:n.parsedType}),le;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(q(n,{code:a?j.too_big:j.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(q(n,{code:j.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(q(n,{code:j.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new Kt(n,a,n.path,o)))).then(a=>it.mergeArray(s,a));const r=[...n.data].map((a,o)=>i.type._parseSync(new Kt(n,a,n.path,o)));return it.mergeArray(s,r)}get element(){return this._def.type}min(e,n){return new $t({...this._def,minLength:{value:e,message:Q.toString(n)}})}max(e,n){return new $t({...this._def,maxLength:{value:e,message:Q.toString(n)}})}length(e,n){return new $t({...this._def,exactLength:{value:e,message:Q.toString(n)}})}nonempty(e){return this.min(1,e)}}$t.create=(t,e)=>new $t({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ae.ZodArray,...de(e)});function Qn(t){if(t instanceof je){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=qt.create(Qn(s))}return new je({...t._def,shape:()=>e})}else return t instanceof $t?new $t({...t._def,type:Qn(t.element)}):t instanceof qt?qt.create(Qn(t.unwrap())):t instanceof _n?_n.create(Qn(t.unwrap())):t instanceof Zt?Zt.create(t.items.map(e=>Qn(e))):t}class je extends ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ve.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Y.object){const l=this._getOrReturnCtx(e);return q(l,{code:j.invalid_type,expected:Y.object,received:l.parsedType}),le}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof an&&this._def.unknownKeys==="strip"))for(const l in i.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=r[l],f=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Kt(i,f,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof an){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")o.length>0&&(q(i,{code:j.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const f=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Kt(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const f=await u.key,h=await u.value;l.push({key:f,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>it.mergeObjectSync(s,l)):it.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return Q.errToObj,new je({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var i,r,a,o;const c=(a=(r=(i=this._def).errorMap)===null||r===void 0?void 0:r.call(i,n,s).message)!==null&&a!==void 0?a:s.defaultError;return n.code==="unrecognized_keys"?{message:(o=Q.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new je({...this._def,unknownKeys:"strip"})}passthrough(){return new je({...this._def,unknownKeys:"passthrough"})}extend(e){return new je({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new je({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ae.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new je({...this._def,catchall:e})}pick(e){const n={};return ve.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new je({...this._def,shape:()=>n})}omit(e){const n={};return ve.objectKeys(this.shape).forEach(s=>{e[s]||(n[s]=this.shape[s])}),new je({...this._def,shape:()=>n})}deepPartial(){return Qn(this)}partial(e){const n={};return ve.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];e&&!e[s]?n[s]=i:n[s]=i.optional()}),new je({...this._def,shape:()=>n})}required(e){const n={};return ve.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])n[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof qt;)r=r._def.innerType;n[s]=r}}),new je({...this._def,shape:()=>n})}keyof(){return lu(ve.objectKeys(this.shape))}}je.create=(t,e)=>new je({shape:()=>t,unknownKeys:"strip",catchall:an.create(),typeName:ae.ZodObject,...de(e)});je.strictCreate=(t,e)=>new je({shape:()=>t,unknownKeys:"strict",catchall:an.create(),typeName:ae.ZodObject,...de(e)});je.lazycreate=(t,e)=>new je({shape:t,unknownKeys:"strip",catchall:an.create(),typeName:ae.ZodObject,...de(e)});class ni extends ge{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function i(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(o=>new bt(o.ctx.common.issues));return q(n,{code:j.invalid_union,unionErrors:a}),le}if(n.common.async)return Promise.all(s.map(async r=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await r._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let r;const a=[];for(const c of s){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!r&&(r={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(r)return n.common.issues.push(...r.ctx.common.issues),r.result;const o=a.map(c=>new bt(c));return q(n,{code:j.invalid_union,unionErrors:o}),le}}get options(){return this._def.options}}ni.create=(t,e)=>new ni({options:t,typeName:ae.ZodUnion,...de(e)});const Qt=t=>t instanceof ri?Qt(t.schema):t instanceof Mt?Qt(t.innerType()):t instanceof ai?[t.value]:t instanceof Sn?t.options:t instanceof oi?ve.objectValues(t.enum):t instanceof li?Qt(t._def.innerType):t instanceof ei?[void 0]:t instanceof ti?[null]:t instanceof qt?[void 0,...Qt(t.unwrap())]:t instanceof _n?[null,...Qt(t.unwrap())]:t instanceof co||t instanceof ui?Qt(t.unwrap()):t instanceof ci?Qt(t._def.innerType):[];class Lr extends ge{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.object)return q(n,{code:j.invalid_type,expected:Y.object,received:n.parsedType}),le;const s=this.discriminator,i=n.data[s],r=this.optionsMap.get(i);return r?n.common.async?r._parseAsync({data:n.data,path:n.path,parent:n}):r._parseSync({data:n.data,path:n.path,parent:n}):(q(n,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,s){const i=new Map;for(const r of n){const a=Qt(r.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,r)}}return new Lr({typeName:ae.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...de(s)})}}function Da(t,e){const n=Xt(t),s=Xt(e);if(t===e)return{valid:!0,data:t};if(n===Y.object&&s===Y.object){const i=ve.objectKeys(e),r=ve.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of r){const c=Da(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(n===Y.array&&s===Y.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<t.length;r++){const a=t[r],o=e[r],c=Da(a,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Y.date&&s===Y.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class si extends ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),i=(r,a)=>{if(ja(r)||ja(a))return le;const o=Da(r.value,a.value);return o.valid?((Ra(r)||Ra(a))&&n.dirty(),{status:n.value,value:o.data}):(q(s,{code:j.invalid_intersection_types}),le)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,a])=>i(r,a)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}si.create=(t,e,n)=>new si({left:t,right:e,typeName:ae.ZodIntersection,...de(n)});class Zt extends ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.array)return q(s,{code:j.invalid_type,expected:Y.array,received:s.parsedType}),le;if(s.data.length<this._def.items.length)return q(s,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),le;!this._def.rest&&s.data.length>this._def.items.length&&(q(s,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const r=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Kt(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(r).then(a=>it.mergeArray(n,a)):it.mergeArray(n,r)}get items(){return this._def.items}rest(e){return new Zt({...this._def,rest:e})}}Zt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zt({items:t,typeName:ae.ZodTuple,rest:null,...de(e)})};class ii extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.object)return q(s,{code:j.invalid_type,expected:Y.object,received:s.parsedType}),le;const i=[],r=this._def.keyType,a=this._def.valueType;for(const o in s.data)i.push({key:r._parse(new Kt(s,o,s.path,o)),value:a._parse(new Kt(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?it.mergeObjectAsync(n,i):it.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof ge?new ii({keyType:e,valueType:n,typeName:ae.ZodRecord,...de(s)}):new ii({keyType:Nt.create(),valueType:e,typeName:ae.ZodRecord,...de(n)})}}class fr extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.map)return q(s,{code:j.invalid_type,expected:Y.map,received:s.parsedType}),le;const i=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([o,c],l)=>({key:i._parse(new Kt(s,o,s.path,[l,"key"])),value:r._parse(new Kt(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return le;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return le;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}}}}fr.create=(t,e,n)=>new fr({valueType:e,keyType:t,typeName:ae.ZodMap,...de(n)});class Bn extends ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.set)return q(s,{code:j.invalid_type,expected:Y.set,received:s.parsedType}),le;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(q(s,{code:j.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(q(s,{code:j.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const r=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return le;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const o=[...s.data.values()].map((c,l)=>r._parse(new Kt(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,n){return new Bn({...this._def,minSize:{value:e,message:Q.toString(n)}})}max(e,n){return new Bn({...this._def,maxSize:{value:e,message:Q.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Bn.create=(t,e)=>new Bn({valueType:t,minSize:null,maxSize:null,typeName:ae.ZodSet,...de(e)});class hs extends ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.function)return q(n,{code:j.invalid_type,expected:Y.function,received:n.parsedType}),le;function s(o,c){return or({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ar(),ys].filter(l=>!!l),issueData:{code:j.invalid_arguments,argumentsError:c}})}function i(o,c){return or({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ar(),ys].filter(l=>!!l),issueData:{code:j.invalid_return_type,returnTypeError:c}})}const r={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof vs){const o=this;return lt(async function(...c){const l=new bt([]),u=await o._def.args.parseAsync(c,r).catch(m=>{throw l.addIssue(s(c,m)),l}),f=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(f,r).catch(m=>{throw l.addIssue(i(f,m)),l})})}else{const o=this;return lt(function(...c){const l=o._def.args.safeParse(c,r);if(!l.success)throw new bt([s(c,l.error)]);const u=Reflect.apply(a,this,l.data),f=o._def.returns.safeParse(u,r);if(!f.success)throw new bt([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new hs({...this._def,args:Zt.create(e).rest(Pn.create())})}returns(e){return new hs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,s){return new hs({args:e||Zt.create([]).rest(Pn.create()),returns:n||Pn.create(),typeName:ae.ZodFunction,...de(s)})}}class ri extends ge{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ri.create=(t,e)=>new ri({getter:t,typeName:ae.ZodLazy,...de(e)});class ai extends ge{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return q(n,{received:n.data,code:j.invalid_literal,expected:this._def.value}),le}return{status:"valid",value:e.data}}get value(){return this._def.value}}ai.create=(t,e)=>new ai({value:t,typeName:ae.ZodLiteral,...de(e)});function lu(t,e){return new Sn({values:t,typeName:ae.ZodEnum,...de(e)})}class Sn extends ge{constructor(){super(...arguments),Bs.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return q(n,{expected:ve.joinValues(s),received:n.parsedType,code:j.invalid_type}),le}if(lr(this,Bs)||iu(this,Bs,new Set(this._def.values)),!lr(this,Bs).has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return q(n,{received:n.data,code:j.invalid_enum_value,options:s}),le}return lt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Sn.create(e,{...this._def,...n})}exclude(e,n=this._def){return Sn.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}Bs=new WeakMap;Sn.create=lu;class oi extends ge{constructor(){super(...arguments),zs.set(this,void 0)}_parse(e){const n=ve.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Y.string&&s.parsedType!==Y.number){const i=ve.objectValues(n);return q(s,{expected:ve.joinValues(i),received:s.parsedType,code:j.invalid_type}),le}if(lr(this,zs)||iu(this,zs,new Set(ve.getValidEnumValues(this._def.values))),!lr(this,zs).has(e.data)){const i=ve.objectValues(n);return q(s,{received:s.data,code:j.invalid_enum_value,options:i}),le}return lt(e.data)}get enum(){return this._def.values}}zs=new WeakMap;oi.create=(t,e)=>new oi({values:t,typeName:ae.ZodNativeEnum,...de(e)});class vs extends ge{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.promise&&n.common.async===!1)return q(n,{code:j.invalid_type,expected:Y.promise,received:n.parsedType}),le;const s=n.parsedType===Y.promise?n.data:Promise.resolve(n.data);return lt(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vs.create=(t,e)=>new vs({type:t,typeName:ae.ZodPromise,...de(e)});class Mt extends ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:a=>{q(s,a),a.fatal?n.abort():n.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const a=i.transform(s.data,r);if(s.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return le;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?le:c.status==="dirty"||n.value==="dirty"?rs(c.value):c});{if(n.value==="aborted")return le;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?le:o.status==="dirty"||n.value==="dirty"?rs(o.value):o}}if(i.type==="refinement"){const a=o=>{const c=i.refinement(o,r);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?le:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?le:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Vn(a))return a;const o=i.transform(a.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Vn(a)?Promise.resolve(i.transform(a.value,r)).then(o=>({status:n.value,value:o})):a);ve.assertNever(i)}}Mt.create=(t,e,n)=>new Mt({schema:t,typeName:ae.ZodEffects,effect:e,...de(n)});Mt.createWithPreprocess=(t,e,n)=>new Mt({schema:e,effect:{type:"preprocess",transform:t},typeName:ae.ZodEffects,...de(n)});class qt extends ge{_parse(e){return this._getType(e)===Y.undefined?lt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qt.create=(t,e)=>new qt({innerType:t,typeName:ae.ZodOptional,...de(e)});class _n extends ge{_parse(e){return this._getType(e)===Y.null?lt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_n.create=(t,e)=>new _n({innerType:t,typeName:ae.ZodNullable,...de(e)});class li extends ge{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===Y.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}li.create=(t,e)=>new li({innerType:t,typeName:ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...de(e)});class ci extends ge{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Qs(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new bt(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bt(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}ci.create=(t,e)=>new ci({innerType:t,typeName:ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...de(e)});class dr extends ge{_parse(e){if(this._getType(e)!==Y.nan){const s=this._getOrReturnCtx(e);return q(s,{code:j.invalid_type,expected:Y.nan,received:s.parsedType}),le}return{status:"valid",value:e.data}}}dr.create=t=>new dr({typeName:ae.ZodNaN,...de(t)});const Im=Symbol("zod_brand");class co extends ge{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class _i extends ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?le:r.status==="dirty"?(n.dirty(),rs(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?le:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,n){return new _i({in:e,out:n,typeName:ae.ZodPipeline})}}class ui extends ge{_parse(e){const n=this._def.innerType._parse(e),s=i=>(Vn(i)&&(i.value=Object.freeze(i.value)),i);return Qs(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}ui.create=(t,e)=>new ui({innerType:t,typeName:ae.ZodReadonly,...de(e)});function gl(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function cu(t,e={},n){return t?bs.create().superRefine((s,i)=>{var r,a;const o=t(s);if(o instanceof Promise)return o.then(c=>{var l,u;if(!c){const f=gl(e,s),h=(u=(l=f.fatal)!==null&&l!==void 0?l:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...f,fatal:h})}});if(!o){const c=gl(e,s),l=(a=(r=c.fatal)!==null&&r!==void 0?r:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:l})}}):bs.create()}const Om={object:je.lazycreate};var ae;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ae||(ae={}));const uo=(t,e={message:`Input not instance of ${t.name}`})=>cu(n=>n instanceof t,e),uu=Nt.create,fo=xn.create,Tm=dr.create,Em=kn.create,fu=Xs.create,Am=Fn.create,Nm=cr.create,$m=ei.create,Lm=ti.create,Mm=bs.create,Pm=Pn.create,jm=an.create,Rm=ur.create,du=$t.create,hu=je.create,Dm=je.strictCreate,Vm=ni.create,Fm=Lr.create,Bm=si.create,zm=Zt.create,Um=ii.create,qm=fr.create,Wm=Bn.create,Hm=hs.create,Km=ri.create,Zm=ai.create,pu=Sn.create,Gm=oi.create,Ym=vs.create,yl=Mt.create,Jm=qt.create,Qm=_n.create,Xm=Mt.createWithPreprocess,eg=_i.create,tg=()=>uu().optional(),ng=()=>fo().optional(),sg=()=>fu().optional(),ig={string:t=>Nt.create({...t,coerce:!0}),number:t=>xn.create({...t,coerce:!0}),boolean:t=>Xs.create({...t,coerce:!0}),bigint:t=>kn.create({...t,coerce:!0}),date:t=>Fn.create({...t,coerce:!0})},rg=le;var jn=Object.freeze({__proto__:null,defaultErrorMap:ys,setErrorMap:sm,getErrorMap:ar,makeIssue:or,EMPTY_PATH:im,addIssueToContext:q,ParseStatus:it,INVALID:le,DIRTY:rs,OK:lt,isAborted:ja,isDirty:Ra,isValid:Vn,isAsync:Qs,get util(){return ve},get objectUtil(){return Pa},ZodParsedType:Y,getParsedType:Xt,ZodType:ge,datetimeRegex:ou,ZodString:Nt,ZodNumber:xn,ZodBigInt:kn,ZodBoolean:Xs,ZodDate:Fn,ZodSymbol:cr,ZodUndefined:ei,ZodNull:ti,ZodAny:bs,ZodUnknown:Pn,ZodNever:an,ZodVoid:ur,ZodArray:$t,ZodObject:je,ZodUnion:ni,ZodDiscriminatedUnion:Lr,ZodIntersection:si,ZodTuple:Zt,ZodRecord:ii,ZodMap:fr,ZodSet:Bn,ZodFunction:hs,ZodLazy:ri,ZodLiteral:ai,ZodEnum:Sn,ZodNativeEnum:oi,ZodPromise:vs,ZodEffects:Mt,ZodTransformer:Mt,ZodOptional:qt,ZodNullable:_n,ZodDefault:li,ZodCatch:ci,ZodNaN:dr,BRAND:Im,ZodBranded:co,ZodPipeline:_i,ZodReadonly:ui,custom:cu,Schema:ge,ZodSchema:ge,late:Om,get ZodFirstPartyTypeKind(){return ae},coerce:ig,any:Mm,array:du,bigint:Em,boolean:fu,date:Am,discriminatedUnion:Fm,effect:yl,enum:pu,function:Hm,instanceof:uo,intersection:Bm,lazy:Km,literal:Zm,map:qm,nan:Tm,nativeEnum:Gm,never:jm,null:Lm,nullable:Qm,number:fo,object:hu,oboolean:sg,onumber:ng,optional:Jm,ostring:tg,pipeline:eg,preprocess:Xm,promise:Ym,record:Um,set:Wm,strictObject:Dm,string:uu,symbol:Nm,transformer:yl,tuple:zm,undefined:$m,union:Vm,unknown:Pm,void:Rm,NEVER:rg,ZodIssueCode:j,quotelessJson:nm,ZodError:bt});const ag=jn.object({format:jn.string(),subtype:jn.string()});class Ye{static audioContext;static audioTypes=new Set(["wav","flac","mp3","ogg","m4a","mp4"]);static play(e){this.audioContext||(this.audioContext=new AudioContext);const n=this.audioContext,s=n.createBufferSource();return s.buffer=e,s.connect(n.destination),s.start(),s}static async fromFile(e,n=48e3){const i=await new OfflineAudioContext({length:1,sampleRate:n}).decodeAudioData(await e.arrayBuffer()),r=this.fromAudioBuffer(i);return r.#n=e.name,r}static fromAudioBuffer(e){return new this({data:e.getChannelData(0),fs:e.sampleRate})}#e;#t;#n;#s;#i;get data(){return this.#e}get fs(){return this.#t}set name(e){this.#n=e}get name(){return this.#n}get info(){return this.#s}get decoder(){return this.#i}constructor({data:e,fs:n,name:s,info:i,decoder:r}){this.#e=e,this.#t=n,this.#n=s??"",this.#s=i??null,this.#i=r??""}getInfo(){let e=this.#s,n=`sampleRate: ${this.#t}`;return e!=null&&(n+=`, format: ${e.format}[${e.subtype}]`),this.#i&&(n+=`(${this.#i})`),n}toWave(){throw new Error("Function not implemented.")}toAudioBuffer(){const e=this.#e,n=new AudioBuffer({length:e.length,sampleRate:this.#t});return n.getChannelData(0).set(e),n}}Object.assign(Ye.prototype,{[Symbol.toStringTag]:"AudioData"});const bl=(()=>{const{buffer:t}=Float64Array.of(1.982031);switch(String.fromCharCode(...new Uint8Array(t))){case"äJ#f¶ÿ?":return"<";case"?ÿ¶f#Jä":return">";case"f¶ÿ?äJ#":return"M"}})(),og=t=>{if(bl!==t)return`字节序为 ${bl} ，预期应为 ${t}`};function*lg(t){let e=null,n=0,s=t.length;for(;n<s;n++){const i=t[n]===0;e==null?i&&(e=n):i||(yield[e,n],e=null)}e!==null&&(yield[e,n])}const cg=t=>Array.from(lg(t)),mu=(t,e)=>{t=Float64Array.from(t);const n=cg(t);{const a=n[0];if(a!=null&&a[0]===0){n.shift();const c=a[1];t.fill(t[c],0,c)}const o=n.at(-1);if(o!=null&&o[1]===t.length){n.pop();const c=o[0];t.fill(t[c-1],c)}}for(const[a,o]of n){const c=t[a-1];let u=(t[o]-c)/(o-a);u||=0;for(let f=a,h=1;f<o;f++,h++)t[f]=c+u*h}const{BYTES_PER_ELEMENT:s}=Float64Array,{byteLength:i}=t;let r;if(e>i){const a=new Float64Array((e-i)/s);r=[t,a.fill(t.at(-1)??0)]}else e<i?r=[t.subarray(0,e/s)]:r=[t];return r},ug=async(t,e=!1)=>{const n={},s="granted";return e&&(n.mode="readwrite"),s===await t.queryPermission(n)||s===await t.requestPermission(n)},fg=async(t,e,n)=>{const i=await(await t.getFileHandle(n,{create:!0})).createWritable();try{const r=Ju(e)?new Blob(e):e;await i.write(r)}finally{await i.close()}},vl=window?.Intl?.Locale??null,dg=typeof vl=="function"?t=>new vl(t).language:String;function*hg(t=navigator.languages,e){yield*t;for(const n of t)yield dg(n);yield e}let pg="zh-Hans";const gu=(t,e,n=navigator.languages)=>{for(const s of hg(n,pg)){const i=t(s);if(i!=null)return r=>Qu(i,r)?i[r]:e}throw new RangeError(`invalid language tags: ${JSON.stringify(n)}`)};var ma={exports:{}},wl;function mg(){return wl||(wl=1,function(t){(function(){function e(a,o){if(o&&o.multiple&&!Array.isArray(a))throw new Error("Invalid argument type: Expected an Array to serialize multiple values.");const c=4294967296;let l,u,f=new Uint8Array(128),h=0;if(o&&o.multiple)for(let x=0;x<a.length;x++)m(a[x]);else m(a);return f.subarray(0,h);function m(x,O){switch(typeof x){case"undefined":v();break;case"boolean":d(x);break;case"number":b(x);break;case"string":E(x);break;case"object":x===null?v():x instanceof Date?y(x):Array.isArray(x)?T(x):x instanceof Uint8Array||x instanceof Uint8ClampedArray?A(x):x instanceof Int8Array||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array?T(x):$(x);break;default:if(!O&&o&&o.invalidTypeReplacement)typeof o.invalidTypeReplacement=="function"?m(o.invalidTypeReplacement(x),!0):m(o.invalidTypeReplacement,!0);else throw new Error("Invalid argument type: The type '"+typeof x+"' cannot be serialized.")}}function v(x){g(192)}function d(x){g(x?195:194)}function b(x){if(isFinite(x)&&Math.floor(x)===x)if(x>=0&&x<=127)g(x);else if(x<0&&x>=-32)g(x);else if(x>0&&x<=255)C([204,x]);else if(x>=-128&&x<=127)C([208,x]);else if(x>0&&x<=65535)C([205,x>>>8,x]);else if(x>=-32768&&x<=32767)C([209,x>>>8,x]);else if(x>0&&x<=4294967295)C([206,x>>>24,x>>>16,x>>>8,x]);else if(x>=-2147483648&&x<=2147483647)C([210,x>>>24,x>>>16,x>>>8,x]);else if(x>0&&x<=18446744073709552e3){let O=x/c,N=x%c;C([211,O>>>24,O>>>16,O>>>8,O,N>>>24,N>>>16,N>>>8,N])}else x>=-9223372036854776e3&&x<=9223372036854776e3?(g(211),_(x)):x<0?C([211,128,0,0,0,0,0,0,0]):C([207,255,255,255,255,255,255,255,255]);else u||(l=new ArrayBuffer(8),u=new DataView(l)),u.setFloat64(0,x),g(203),C(new Uint8Array(l))}function E(x){let O=s(x),N=O.length;N<=31?g(160+N):N<=255?C([217,N]):N<=65535?C([218,N>>>8,N]):C([219,N>>>24,N>>>16,N>>>8,N]),C(O)}function T(x){let O=x.length;O<=15?g(144+O):O<=65535?C([220,O>>>8,O]):C([221,O>>>24,O>>>16,O>>>8,O]);for(let N=0;N<O;N++)m(x[N])}function A(x){let O=x.length;O<=15?C([196,O]):O<=65535?C([197,O>>>8,O]):C([198,O>>>24,O>>>16,O>>>8,O]),C(x)}function $(x){let O=0;for(let N in x)x[N]!==void 0&&O++;O<=15?g(128+O):O<=65535?C([222,O>>>8,O]):C([223,O>>>24,O>>>16,O>>>8,O]);for(let N in x){let W=x[N];W!==void 0&&(m(N),m(W))}}function y(x){let O=x.getTime()/1e3;if(x.getMilliseconds()===0&&O>=0&&O<4294967296)C([214,255,O>>>24,O>>>16,O>>>8,O]);else if(O>=0&&O<17179869184){let N=x.getMilliseconds()*1e6;C([215,255,N>>>22,N>>>14,N>>>6,N<<2>>>0|O/c,O>>>24,O>>>16,O>>>8,O])}else{let N=x.getMilliseconds()*1e6;C([199,12,255,N>>>24,N>>>16,N>>>8,N]),_(O)}}function g(x){if(f.length<h+1){let O=f.length*2;for(;O<h+1;)O*=2;let N=new Uint8Array(O);N.set(f),f=N}f[h]=x,h++}function C(x){if(f.length<h+x.length){let O=f.length*2;for(;O<h+x.length;)O*=2;let N=new Uint8Array(O);N.set(f),f=N}f.set(x,h),h+=x.length}function _(x){let O,N;x>=0?(O=x/c,N=x%c):(x++,O=Math.abs(x)/c,N=Math.abs(x)%c,O=~O,N=~N),C([O>>>24,O>>>16,O>>>8,O,N>>>24,N>>>16,N>>>8,N])}}function n(a,o){let l=0;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),typeof a!="object"||typeof a.length>"u")throw new Error("Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize.");if(!a.length)throw new Error("Invalid argument: The byte array to deserialize is empty.");a instanceof Uint8Array||(a=new Uint8Array(a));let u;if(o&&o.multiple)for(u=[];l<a.length;)u.push(f());else u=f();return u;function f(){const y=a[l++];if(y>=0&&y<=127)return y;if(y>=128&&y<=143)return b(y-128);if(y>=144&&y<=159)return E(y-144);if(y>=160&&y<=191)return T(y-160);if(y===192)return null;if(y===193)throw new Error("Invalid byte code 0xc1 found.");if(y===194)return!1;if(y===195)return!0;if(y===196)return d(-1,1);if(y===197)return d(-1,2);if(y===198)return d(-1,4);if(y===199)return A(-1,1);if(y===200)return A(-1,2);if(y===201)return A(-1,4);if(y===202)return v(4);if(y===203)return v(8);if(y===204)return m(1);if(y===205)return m(2);if(y===206)return m(4);if(y===207)return m(8);if(y===208)return h(1);if(y===209)return h(2);if(y===210)return h(4);if(y===211)return h(8);if(y===212)return A(1);if(y===213)return A(2);if(y===214)return A(4);if(y===215)return A(8);if(y===216)return A(16);if(y===217)return T(-1,1);if(y===218)return T(-1,2);if(y===219)return T(-1,4);if(y===220)return E(-1,2);if(y===221)return E(-1,4);if(y===222)return b(-1,2);if(y===223)return b(-1,4);if(y>=224&&y<=255)return y-256;throw console.debug("msgpack array:",a),new Error("Invalid byte value '"+y+"' at index "+(l-1)+" in the MessagePack binary data (length "+a.length+"): Expecting a range of 0 to 255. This is not a byte array.")}function h(y){let g=0,C=!0;for(;y-- >0;)if(C){let _=a[l++];g+=_&127,_&128&&(g-=128),C=!1}else g*=256,g+=a[l++];return g}function m(y){let g=0;for(;y-- >0;)g*=256,g+=a[l++];return g}function v(y){let g=new DataView(a.buffer,l+a.byteOffset,y);if(l+=y,y===4)return g.getFloat32(0,!1);if(y===8)return g.getFloat64(0,!1)}function d(y,g){y<0&&(y=m(g));let C=a.subarray(l,l+y);return l+=y,C}function b(y,g){y<0&&(y=m(g));let C={};for(;y-- >0;){let _=f();C[_]=f()}return C}function E(y,g){y<0&&(y=m(g));let C=[];for(;y-- >0;)C.push(f());return C}function T(y,g){y<0&&(y=m(g));let C=l;return l+=y,i(a,C,y)}function A(y,g){y<0&&(y=m(g));let C=m(1),_=d(y);switch(C){case 255:return $(_)}return{type:C,data:_}}function $(y){if(y.length===4){let g=(y[0]<<24>>>0)+(y[1]<<16>>>0)+(y[2]<<8>>>0)+y[3];return new Date(g*1e3)}if(y.length===8){let g=(y[0]<<22>>>0)+(y[1]<<14>>>0)+(y[2]<<6>>>0)+(y[3]>>>2),C=(y[3]&3)*4294967296+(y[4]<<24>>>0)+(y[5]<<16>>>0)+(y[6]<<8>>>0)+y[7];return new Date(C*1e3+g/1e6)}if(y.length===12){let g=(y[0]<<24>>>0)+(y[1]<<16>>>0)+(y[2]<<8>>>0)+y[3];l-=8;let C=h(8);return new Date(C*1e3+g/1e6)}throw new Error("Invalid data length for a date value.")}}function s(a){let o=!0,c=a.length;for(let f=0;f<c;f++)if(a.charCodeAt(f)>127){o=!1;break}let l=0,u=new Uint8Array(a.length*(o?1:4));for(let f=0;f!==c;f++){let h=a.charCodeAt(f);if(h<128){u[l++]=h;continue}if(h<2048)u[l++]=h>>6|192;else{if(h>55295&&h<56320){if(++f>=c)throw new Error("UTF-8 encode: incomplete surrogate pair");let m=a.charCodeAt(f);if(m<56320||m>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+m.toString(16)+" at index "+f+" out of range");h=65536+((h&1023)<<10)+(m&1023),u[l++]=h>>18|240,u[l++]=h>>12&63|128}else u[l++]=h>>12|224;u[l++]=h>>6&63|128}u[l++]=h&63|128}return o?u:u.subarray(0,l)}function i(a,o,c){let l=o,u="";for(c+=o;l<c;){let f=a[l++];if(f>127)if(f>191&&f<224){if(l>=c)throw new Error("UTF-8 decode: incomplete 2-byte sequence");f=(f&31)<<6|a[l++]&63}else if(f>223&&f<240){if(l+1>=c)throw new Error("UTF-8 decode: incomplete 3-byte sequence");f=(f&15)<<12|(a[l++]&63)<<6|a[l++]&63}else if(f>239&&f<248){if(l+2>=c)throw new Error("UTF-8 decode: incomplete 4-byte sequence");f=(f&7)<<18|(a[l++]&63)<<12|(a[l++]&63)<<6|a[l++]&63}else throw new Error("UTF-8 decode: unknown multibyte start 0x"+f.toString(16)+" at index "+(l-1));if(f<=65535)u+=String.fromCharCode(f);else if(f<=1114111)f-=65536,u+=String.fromCharCode(f>>10|55296),u+=String.fromCharCode(f&1023|56320);else throw new Error("UTF-8 decode: code point 0x"+f.toString(16)+" exceeds UTF-16 reach")}return u}let r={serialize:e,deserialize:n,encode:e,decode:n};t?t.exports=r:window[window.msgpackJsName||"msgpack"]=r})()}(ma)),ma.exports}var gg=mg();const xl=oo(gg),Ji=Object.freeze({int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,float32:Float32Array,float64:Float64Array,uint8Clamped:Uint8ClampedArray}),Mr=Object.getPrototypeOf(Uint8Array),yg=Mr.prototype,kl=t=>t instanceof Mr,ho=new Map,yu=new Map,bg=t=>ho.has(t);for(const[t,e]of Object.entries(Ji))yu.set(e,t),ho.set(t,e);const{call:vg}=Function.prototype,Ps=(t,e)=>t*e,Sl=vg.bind(yg.subarray);class Oe extends Array{static isNdarray(e,n,s){return e instanceof Oe?s==null?e.ndim===n:e.ndim===n&&e.buffer instanceof Ji[s]:e instanceof Mr?s==null?n===1:n===1&&e instanceof Ji[s]:!1}static*xreshape(e,n,s){const i=n.slice(1),r=i.reduce(Ps,1),a=n[0];let o=0;for(;o<a&&s<e.length;o++,s+=r)yield this._reshape(e,i,s)}static _reshape(e,n,s){if(n.length>1){const i=Oe.from(Oe.xreshape(e,n,s));return i.buffer=e,i.shape=Object.freeze(n),i.offset=s,Object.freeze(i)}else return s===0&&n[0]===e.length?e:Sl(e,s,s+n[0])}static create(e,n,s=0){typeof n=="string"?n=n.split(",").map(Number):typeof n=="number"&&(n=[n]);let i,r;return bg(e)?(i=Ji[e],r=new i(n.reduce(Ps,1)),s=0):kl(e)?r=e:(i=e,r=new i(n.reduce(Ps,1)),s=0),this._reshape(r,n,s)}constructor(e){super(e)}get ndim(){return this.shape.length}slice(e=0,n=this.length){return Oe.unpack(Oe.pack(this.subarray(e,n)))}subarray(e=0,n=this.length){e<0&&(e+=this.length);let s=super.slice(e,n);s.buffer=this.buffer;let i=this.shape.slice();return i[0]=s.length,s.shape=Object.freeze(i),s.offset=this.offset+e*i.slice(1).reduce(Ps,1),Object.freeze(s)}reshape(e){return arguments.length>1&&(e=[...arguments]),Oe.create(this.buffer,e,this.offset)}toBuffer(){const{buffer:e,shape:n,offset:s}=this,i=n.reduce(Ps);return s===0&&i===e.length?e:Sl(e,s,s+i)}static pack(e){let n,s;kl(e)?(n=e,s=[n.length]):(n=e.toBuffer(),s=e.shape.slice());const{buffer:i,byteOffset:r,byteLength:a,constructor:o}=n;return{shape:s,dtype:yu.get(o),buffer:new Uint8Array(i,r,a)}}static unpack(e){const{buffer:n,shape:s,dtype:i}=e,{byteOffset:r,byteLength:a}=n,o=ho.get(i);return this.create(new o(n.buffer.slice(r,r+a)),s)}}Object.assign(Oe.prototype,{[Symbol.toStringTag]:Oe.name});const wg=Object.freeze({int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,float32:Float32Array,float64:Float64Array,uint8Clamped:Uint8ClampedArray}),xg=pu(Object.keys(wg));uo(Mr);const kg=hu({shape:du(fo().int()),dtype:xg,buffer:uo(Uint8Array)}),Sg=kg.transform((t,e)=>Oe.unpack(t)),bu=(t,e)=>Sg.refine(n=>Oe.isNdarray(n,t,e)),hr=bu(1,"float64"),Va=bu(2,"float64"),Fa=jn.object({t:hr,f0:hr}),_g=Fa.extend({sp:Va,ap:Va}),Cg=jn.object({fs:jn.number(),info:ag,data:jn.union([hr,Va.transform(t=>t[0])])}).transform(t=>new Ye(t));class fi{static async create(e){return new this(e)}baseURL;constructor(e){this.baseURL=new URL(e,location.href).href}async fetch(e,n,s={}){e=new URL(e,this.baseURL).href,n!=null&&(s.method??="POST",Bl(n)?(s.headers=new Headers(s.headers),s.headers.set("content-type","application/x-msgpack"),s.body=xl.encode(n)):s.body=n),s.credentials??="include";const i=new Request(e,s),r=await fetch(i),{status:a}=r;if(!(a>=200&&a<300))throw new TypeError("Request failed with status code "+a);let o;return r.headers.get("content-type")==="application/x-msgpack"&&(o=await r.arrayBuffer(),o=xl.decode(new Uint8Array(o))),{request:i,response:r,data:o}}debug(e){const n=e;try{const s=performance.getEntriesByName(e.response.url),i=s[s.length-1];n.$timing=i,n.$now=performance.now()}catch{}this.lastRespConfig=n}async available(e=""){const{data:n}=await this.fetch("soundfile/available/"+e);return n}async encodeAudio(e,n,s,i){const r=await this.fetch("soundfile/write",{fs:n,data:Oe.pack(e),format:s,subtype:i},{headers:{Accept:"application/octet-stream"}});return this.debug(r),r.response.blob()}async decodeAudio(e){const n=await this.fetch("soundfile/read",e,{headers:{"Content-Type":"application/octet-stream"}});return this.debug(n),Cg.parse(n.data)}async dio(e,n){const s=await this.fetch("pyworld/dio",{fs:n,data:Oe.pack(e)});return this.debug(s),Fa.parse(s.data)}async harvest(e,n){const s=await this.fetch("pyworld/harvest",{fs:n,data:Oe.pack(e)});return this.debug(s),Fa.parse(s.data)}async all(e,n){const s=await this.fetch("pyworld/all",{fs:n,data:Oe.pack(e)});return this.debug(s),_g.parse(s.data)}async synthesize(e,n,s,i){const r=await this.fetch("pyworld/synthesize",{fs:i,f0:Oe.pack(e),sp:Oe.pack(n),ap:Oe.pack(s)});return this.debug(r),hr.parse(r.data)}async savefig(e,n=!0){const s=await this.fetch("pyworld/savefig",{figlist:Array.from(e,i=>Oe.pack(i)),log:n},{headers:{Accept:"image/png"}});return this.debug(s),s.response.blob()}}Object.assign(fi.prototype,{name:"PyWorld",[Symbol.toStringTag]:"PyWorld"});const Ig=""+new URL("world-DTZhDC5J.wasm",import.meta.url).href;let Di,Ba,vu,Rn;const wu=(async()=>{try{Di=WebAssembly,Ba=Di.compileStreaming,vu=Di.instantiate,Di.Module.imports(await Ba(fetch("data:application/wasm;base64,AGFzbQEAAAA"))),Rn=!0}catch(t){throw Rn=!1,t}})();let Us;const Og=()=>Us;let po=async()=>{Us==null&&(await wu,Us=Ba(fetch(Ig)));try{const t=await Us;return po=Og,t}catch(t){throw Us=null,t}};const Jn=t=>{if(t<0)throw new RangeError("invalid number")},{min:Tg}=Math,Vi=8,Eg=28,Ag=58;class js{#e;#t=0;#n;get buffer(){return this.#e}get pos(){return this.#t}get size(){return this.#n}constructor(e){typeof e=="number"?(this.#e=new Uint8Array(e),this.#n=0):(this.#e=new Uint8Array(e),this.#n=this.#e.byteLength)}#s(e){const n=this.#e.length;if(e>n){let s=n;s<1&&(s=8);do s+=Tg(s,65536);while(e>s);let i=this.#e;this.#e=new Uint8Array(s),this.#e.set(i)}}read(e){let{buffer:n}=e,s=0,i=this.#t;for(let r=0,a=e.length;r<a;r+=2){let o=e[r],c=e[r+1],l=new Uint8Array(n,o,c);if(i+=c,i>this.#n){l.set(new Uint8Array(this.#e.buffer,this.#t,this.#n-this.#t)),s+=this.#n-this.#t,this.#t=this.#n;break}l.set(new Uint8Array(this.#e.buffer,this.#t,c)),this.#t=i,s+=c}return s}write(e){let{buffer:n}=e,s=0,i=this.#t;for(let r=0,a=e.length;r<a;r+=2){let o=e[r],c=e[r+1];i+=c,i>this.#n&&(this.#n=i),this.#s(i),this.#e.set(new Uint8Array(n,o,c),this.#t),this.#t=i,s+=c}return s}seek(e,n){let s;switch(n){case 0:s=e;break;case 1:s=this.#t+e;break;case 2:s=this.#n+e;break;default:return-1}return s>=0&&(this.#t=s),s}getData(){return new Uint8Array(this.#e.buffer,0,this.#n)}getText(){return new TextDecoder().decode(new Uint8Array(this.#e.buffer,0,this.#n))}}let ga=null,xu;const Ng=async()=>xu(await po());class ku{static{xu=async e=>{const n=await vu(e,{wasi_snapshot_preview1:{fd_read(r,a,o,c){const l=s.buffer,u=i.#n[r];if(u==null)return Vi;let f=u.read(new Uint32Array(l,a>>>0,o*2));return new Uint32Array(l,c,1)[0]=f,0},fd_write(r,a,o,c){const l=s.buffer,u=i.#n[r];if(u==null)return Vi;let f=u.write(new Uint32Array(l,a>>>0,o*2));return new Uint32Array(l,c,1)[0]=f,0},fd_seek(r,a,o,c){const l=s.buffer,u=i.#n[r];if(u==null)return Vi;let f=u.seek(Number(a),o);return f<0?Eg:(new BigUint64Array(l,c>>>0,1)[0]=BigInt(f),0)},fd_fdstat_get(r,a){const o=s.buffer;return new Uint8Array(o,a,1)[0]=r>2?4:2,0},fd_fdstat_set_flags(r,a){return Ag},fd_close(r){const a=i.#n[r];return a==null?Vi:(a.seek(0,0),0)},proc_exit(r){throw new Error("exit with exit code "+r)}},env:{constructNotify(r){i.#s[i.#s.length]=r},readFloat64Array(r,a,o){const c=s.buffer;new Float64Array(c,a>>>0,o).set(i.#t[r])},writeFloat64Array(r,a,o){const c=s.buffer;(i.#t[r]=new Float64Array(+o)).set(new Float64Array(c,a>>>0,o))},readFloat64Array2D(r,a,o,c){const l=s.buffer,u=new Uint32Array(l,a>>>0,o),f=i.#t[r];let h=0;for(;h<o;h++)new Float64Array(l,u[h],c).set(f[h])},writeFloat64Array2D(r,a,o,c){const l=s.buffer,u=new Uint32Array(l,a>>>0,o),f=i.#t[r]=Oe.create("float64",[o,c]);let h=0;for(;h<o;h++)f[h].set(new Float64Array(l,u[h],c))},emscripten_notify_memory_growth(r){}}}),s=n.exports.memory;ga=n;const i=new ku(n);return ga=null,i}}#e;#t;#n;#s=[];constructor(e){if(ga!==e)throw new TypeError("Illegal constructor.");this.#e=e.exports,this.#t=null,this.#n=null,this.#e._initialize()}get memorySize(){return this.#e.memory.buffer.byteLength}about(){try{return this.#n=[null,new js(8)],this.#e._get_info(),this.#n[1].getText().trim()}finally{this.#n=null}}#i(e,n=0,s=0){this.#e._init_world(e,n,s)}#r(){this.#t=null,this.#n=null;for(const e of this.#s)this.#e._destruct(e);this.#s=[]}dio(e,n,s=5,i=!1){const r=e.length;try{return this.#t=[e],this.#i(n),Jn(this.#e._dio(r,n,s,i?1:0)),{f0:this.#t[2],time_axis:this.#t[1]}}finally{this.#r()}}harvest(e,n,s=5,i=!1){const r=e.length;try{return this.#t=[e],this.#i(n),Jn(this.#e._harvest(r,n,s,i?1:0)),{f0:this.#t[2],time_axis:this.#t[1]}}finally{this.#r()}}stonemask(e,n,s,i){const r=e.length,a=n.length;try{return this.#t=[e,s,n],Jn(this.#e._stonemask(r,i,a)),this.#t[2]}finally{this.#r()}}cheaptrick(e,n,s,i){const r=e.length,a=n.length;try{this.#t=[e,s,n],this.#i(i);const o=this.#e._cheaptrick(r,i,a);return Jn(o),{spectrogram:this.#t[3],fft_size:o}}finally{this.#r()}}d4c(e,n,s,i,r=0){const a=e.length,o=n.length;try{return this.#t=[e,s,n],this.#i(i),Jn(this.#e._d4c(a,i,o,r)),{aperiodicity:this.#t[4]}}finally{this.#r()}}wav2world(e,n,s=5){const{f0:i,time_axis:r}=this.dio(e,n,s),a=this.stonemask(e,i,r,n),{spectrogram:o,fft_size:c}=this.cheaptrick(e,a,r,n),{aperiodicity:l}=this.d4c(e,a,r,n);return{time_axis:r,f0:a,fft_size:c,spectrogram:o,aperiodicity:l}}synthesis(e,n,s,i,r=5){const a=e.length;try{if(a!=n.shape[0]||a!=s.shape[0])throw new TypeError(`Mismatched number of frames between F0 (${a}), spectrogram (${n.shape[0]}) and aperiodicty (${s.shape[0]})`);if(n.shape[1]!=s.shape[1])throw new TypeError(`Mismatched dimensionality (spec size) between spectrogram (${n.shape[1]}) and aperiodicity (${s.shape[1]})`);return this.#t=[null,null,e,n,s],Jn(this.#e._synthesis(a,(n.shape[1]-1)*2,i,r)),this.#t[0]}finally{this.#r()}}wavread(e){try{this.#t=[null],this.#n=[null,new js(8),null,new js(e)];const n=this.#e._wavreadlength();if(n>0){const s=this.#e._wavread(n);if(s>0){const i=this.#t[0],r=this.#t[1];return{x:i,fs:s,nbit:r[1]}}}throw new TypeError(this.#n[1].getText().trim()||"Unknown Error")}finally{this.#r()}}wavwrite(e,n){try{this.#t=[e],this.#n=[null,new js(8),null,new js(256)],this.#e._wavwrite(e.length,n);const s=this.#n[3];if(s.size>0)return new Blob([s.getData()],{type:"audio/wave"});throw new TypeError(this.#n[1].getText().trim()||"Unknown Error")}finally{this.#r()}}}const $g=""+new URL("worker-B5cmXAjk.js",import.meta.url).href,Vt=(t,e,n,s)=>new Promise((i,r)=>{const a=new Worker($g,void 0);a.addEventListener("message",c=>{try{const{data:l}=c,{error:u}=l;if(u!=null){if(typeof u!="object"){r(u);return}r(u instanceof Error?u:Object.assign(new Error,u));return}i(l)}catch(l){r(l)}finally{a.terminate()}});const o=c=>{try{r(new Error(c.message||"Unknown Error",{cause:c}))}catch(l){r(l)}finally{a.terminate()}};a.addEventListener("error",o),a.addEventListener("messageerror",o),a.postMessage({module:t,functionToRun:String(e),args:n},s)});let za=null;const Lg=async()=>{const t=await po();za=t;const e=new Mg(t);return za=null,e};class Mg{#e;constructor(e){if(za!==e)throw new TypeError("Illegal constructor.");this.#e=e}fetch(e,n,s){return Vt(this.#e,e,n,s)}dio(e,n,s,i){return Vt(this.#e,({world:r},a)=>{let o=r.dio(...a);return[o,[o.f0.buffer,o.time_axis.buffer]]},[e,n,s,i])}harvest(e,n,s,i){return Vt(this.#e,({world:r},a)=>{let o=r.harvest(...a);return[o,[o.f0.buffer,o.time_axis.buffer]]},[e,n,s,i])}stonemask(e,n,s,i){return Vt(this.#e,({world:r},a)=>{let o=r.stonemask(...a);return[o,[o.buffer]]},[e,n,s,i])}async cheaptrick(e,n,s,i){const{spectrogram:r,fft_size:a}=await Vt(this.#e,({Ndarray:o,world:c},l)=>{let{spectrogram:u,fft_size:f}=c.cheaptrick(...l),h=o.pack(u);return[{spectrogram:h,fft_size:f},[h.buffer.buffer]]},[e,n,s,i]);return{spectrogram:Oe.unpack(r),fft_size:a}}async d4c(e,n,s,i,r){const{aperiodicity:a}=await Vt(this.#e,({Ndarray:o,world:c},l)=>{let{aperiodicity:u}=c.d4c(...l),f=o.pack(u);return[{aperiodicity:f},[f.buffer.buffer]]},[e,n,s,i,r]);return{aperiodicity:Oe.unpack(a)}}async wav2world(e,n,s){const[i,r,a,o,c]=await Vt(this.#e,({Ndarray:l,world:u},[f,h,m])=>{let{f0:v,time_axis:d,fft_size:b,spectrogram:E,aperiodicity:T}=u.wav2world(f,h,m),A=l.pack(E),$=l.pack(T);return[[v,d,A,$,b],[v.buffer,A.buffer.buffer,$.buffer.buffer]]},[e,n,s]);return{f0:i,time_axis:r,fft_size:c,spectrogram:Oe.unpack(a),aperiodicity:Oe.unpack(o)}}synthesis(e,n,s,i,r){return Vt(this.#e,({Ndarray:a,world:o},[c,l,u,f,h])=>{let m=a.unpack(l),v=a.unpack(u),d=o.synthesis(c,m,v,f,h);return[d,[d.buffer]]},[e,Oe.pack(n),Oe.pack(s),i,r])}wavread(e){return Vt(this.#e,({world:n},s)=>{const i=n.wavread(...s);return[i,[i.x.buffer]]},[e])}wavwrite(e,n){return Vt(this.#e,({world:s},i)=>[s.wavwrite(...i)],[e,n])}}const pr="World-Wasm";class di{static async create(e=!0){await wu;const n=await(e?Lg:Ng)();return new this(n)}#e;constructor(e){this.#e=e}async encodeAudio(e,n,s,i){return this.#e.wavwrite(e,n)}async decodeAudio(e){const n=await e.arrayBuffer();try{const{x:i,fs:r,nbit:a}=await this.#e.wavread(n),o={format:"WAV",subtype:`PCM_${a}`};return new Ye({data:i,fs:r,info:o,decoder:pr})}catch(i){console.warn(`${pr} error`,i)}const s=String.fromCharCode(...new Uint8Array(n,0,16));if(/^RIFF.{4}WAVEfmt /s.test(s)){const i=new DataView(n),r=i.getUint16(20,!0)===3,a=i.getUint32(24,!0),o=i.getUint16(34,!0),l=await new OfflineAudioContext({length:1,sampleRate:a}).decodeAudioData(n),u=l.getChannelData(0),f=l.sampleRate;if(f!==a)throw new TypeError(`Assertion failed: AudioBuffer.sampleRate == ${a}`,{cause:l});const h={format:"WAV",subtype:`PCM_${o}${r?"F":""}`};return new Ye({data:u,fs:f,info:h})}else{const r=await new AudioContext().decodeAudioData(n),a=r.getChannelData(0),o=r.sampleRate;return new Ye({data:a,fs:o,decoder:"Web Audio API"})}}async dio(e,n){const{f0:s,time_axis:i}=await this.#e.dio(e,n,5,!0);return{t:i,f0:s}}async harvest(e,n){const{f0:s,time_axis:i}=await this.#e.harvest(e,n,5,!0);return{t:i,f0:s}}async all(e,n){const s=this.#e,{f0:i,time_axis:r}=await s.dio(e,n),a=await s.stonemask(e,i,r,n),{spectrogram:o}=await s.cheaptrick(e,a,r,n),{aperiodicity:c}=await s.d4c(e,a,r,n);return{t:r,f0:a,sp:o,ap:c}}async synthesize(e,n,s,i){return this.#e.synthesis(e,n,s,i,5)}}Object.assign(di.prototype,{name:pr,[Symbol.toStringTag]:pr});const Pg=`name: New Project
comment: ""
output_dir: Vocal
cache_dir: UCache
ustx_version: "0.6"
resolution: 480
bpm: 120
beat_per_bar: 4
beat_unit: 4
expressions:
  dyn:
    name: dynamics (curve)
    abbr: dyn
    type: Curve
    min: -240
    max: 120
    default_value: 0
    is_flag: false
    flag: ""
  pitd:
    name: pitch deviation (curve)
    abbr: pitd
    type: Curve
    min: -1200
    max: 1200
    default_value: 0
    is_flag: false
    flag: ""
  clr:
    name: voice color
    abbr: clr
    type: Options
    min: 0
    max: -1
    default_value: 0
    is_flag: false
    options: []
  eng:
    name: resampler engine
    abbr: eng
    type: Options
    min: 0
    max: 1
    default_value: 0
    is_flag: false
    options:
    - ""
    - worldline
  vel:
    name: velocity
    abbr: vel
    type: Numerical
    min: 0
    max: 200
    default_value: 100
    is_flag: false
    flag: ""
  vol:
    name: volume
    abbr: vol
    type: Numerical
    min: 0
    max: 200
    default_value: 100
    is_flag: false
    flag: ""
  atk:
    name: attack
    abbr: atk
    type: Numerical
    min: 0
    max: 200
    default_value: 100
    is_flag: false
    flag: ""
  dec:
    name: decay
    abbr: dec
    type: Numerical
    min: 0
    max: 100
    default_value: 0
    is_flag: false
    flag: ""
  gen:
    name: gender
    abbr: gen
    type: Numerical
    min: -100
    max: 100
    default_value: 0
    is_flag: true
    flag: g
  genc:
    name: gender (curve)
    abbr: genc
    type: Curve
    min: -100
    max: 100
    default_value: 0
    is_flag: false
    flag: ""
  bre:
    name: breath
    abbr: bre
    type: Numerical
    min: 0
    max: 100
    default_value: 0
    is_flag: true
    flag: B
  brec:
    name: breathiness (curve)
    abbr: brec
    type: Curve
    min: -100
    max: 100
    default_value: 0
    is_flag: false
    flag: ""
  lpf:
    name: lowpass
    abbr: lpf
    type: Numerical
    min: 0
    max: 100
    default_value: 0
    is_flag: true
    flag: H
  mod:
    name: modulation
    abbr: mod
    type: Numerical
    min: 0
    max: 100
    default_value: 0
    is_flag: false
    flag: ""
  alt:
    name: alternate
    abbr: alt
    type: Numerical
    min: 0
    max: 16
    default_value: 0
    is_flag: false
    flag: ""
  shft:
    name: tone shift
    abbr: shft
    type: Numerical
    min: -36
    max: 36
    default_value: 0
    is_flag: false
    flag: ""
  shfc:
    name: tone shift (curve)
    abbr: shfc
    type: Curve
    min: -1200
    max: 1200
    default_value: 0
    is_flag: false
    flag: ""
  tenc:
    name: tension (curve)
    abbr: tenc
    type: Curve
    min: -100
    max: 100
    default_value: 0
    is_flag: false
    flag: ""
  voic:
    name: voicing (curve)
    abbr: voic
    type: Curve
    min: 0
    max: 100
    default_value: 100
    is_flag: false
    flag: ""
time_signatures:
- bar_position: 0
  beat_per_bar: 4
  beat_unit: 4
tempos:
- position: 0
  bpm: 120
tracks:
- phonemizer: OpenUtau.Core.DefaultPhonemizer
  renderer_settings: {}
  mute: false
  solo: false
  volume: 0
voice_parts:
- name: New Part
  comment: ""
  track_no: 0
  position: 0
  notes:
  - position: 480
    duration: 480
    tone: 69
    lyric: a
    pitch:
      data:
      - {x: -1, y: 0, shape: io}
      - {x: 1, y: 0, shape: io}
      snap_first: true
    vibrato: {length: 0, period: 175, depth: 25, in: 10, out: 10, shift: 0, drift: 0}
    phoneme_expressions: []
    phoneme_overrides: []
  curves:
  - xs: []
    ys: []
    abbr: pitd
wave_parts: []
`,{trunc:_l,floor:Rs}=Math,jg={tF0Offset:0,tF0Left:0,tF0Right:0,dF0Left:0,dF0Right:0,dF0Vbr:0},Cl=new Uint16Array(8),ya="k,ky,g,gy,s,sh,z,t,ts,ty,ch,d,dy,n,ny,h,hy,b,by,f,p,py,m,my,y,r,ry,v,w,j".split(","),Il=crypto.randomUUID?.bind(crypto)??(()=>{crypto.getRandomValues(Cl);const t=Array.from(Cl,e=>e.toString(16).padStart(4,"0"));return[t[0]+t[1],t[2],t[3],t[4],t[5]+t[6]+t[7]].join("-")});class hi{static createNote(e,n,s,i){return{onset:e,duration:n,lyrics:s,phonemes:"",pitch:i,detune:0,attributes:jg}}bpm;offsetRatio;basePitch;pitchDelta;loudness;notes;constructor(e){this.bpm=e,this.offsetRatio=e*7056e5/60,this.basePitch=60,this.pitchDelta=[],this.loudness=[],this.notes=[]}calcOffset(e){return _l(e*this.offsetRatio)}calcLabOffset(e){return _l(e*this.offsetRatio/1e7)}createNote(e,n,s){return hi.createNote(this.calcOffset(e),this.calcOffset(n),s,this.basePitch)}*xparseLab(e){const n=/^\s*(\S+)\s+(\S+)\s+([\S\s]*?)\s*$/;for(const s of typeof e=="string"?e.split(/\r?\n/):e){const i=s.match(n);if(i==null)continue;let[r,a,o,c]=i;yield[this.calcLabOffset(+a),this.calcLabOffset(+o),c]}}injectLab(e){for(const[n,s,i]of this.xparseLab(e)){if(i==="pau"||i==="sil")continue;const r=hi.createNote(n,s-n,i,this.basePitch);ya.includes(i)&&(r.phonemes=i),this.notes.push(r)}}injectPitch(e,n){const s=100*(69-this.basePitch);for(let i=0;i<n.length;i++){if(e[i]<55)continue;const r=this.calcOffset(n[i]),a=100*12*Math.log2(e[i]/440);this.pitchDelta.push(r,a+s)}}findPitchRange(e,n,s=0){const i=this.pitchDelta;let r=s;for(;r<i.length;r+=2)if(i[r]>=e){s=r;break}for(;r<i.length;r+=2)if(i[r]>n)return[s,r];return[r,0]}calcMaxPitch(e,n){const s=this.pitchDelta,i=new Map;for(let a=e+1;a<n;a+=2){const o=Math.round(s[a]/100);i.has(o)?i.set(o,i.get(o)+1):i.set(o,1)}let r=[0,0];for(const a of i.entries())(r[1]<a[1]||r[1]===a[1]&&r[0]>a[0])&&(r=a);return r[0]}margeConsonantNote(){const{notes:e}=this;let n=0,s=e.length-1;for(;n<s;n++){const i=e[n];if(!ya.includes(i.lyrics))continue;const r=e[n+1];if(i.onset+i.duration!==r.onset||ya.includes(r.lyrics))continue;r.lyrics=i.phonemes+r.lyrics;const a=e[n-1];a?.onset+a?.duration===i.onset&&(a.duration+=i.duration),e.splice(n,1),s=e.length-1}}refinePitch(){const{notes:e}=this,n=this.pitchDelta;let s,i,r,a;for(s=0;s<e.length;s++){const o=e[s];if([r,a]=this.findPitchRange(o.onset,o.onset+o.duration,r),r>=a)continue;let c=this.calcMaxPitch(r,a);for(o.pitch+=c,c*=100,i=r+1;i<a;i+=2)n[i]-=c}}*xcalcLoudnessWithEnvelope(e,n){const{abs:s,sign:i,log10:r,max:a}=Math;for(let o=1,c=e.length-1;o<c;o++){const l=s(e[o-1]),u=s(e[o]),f=s(e[o+1]),h=i(u-l),m=i(u-f);h+m>0&&(yield this.calcOffset(o/n),yield a(20*r(u),-38))}}injectLoudnessWithEnvelope(e,n){for(const s of this.xcalcLoudnessWithEnvelope(e,n))this.loudness.push(s)}toJSON(e){const n=Il(),s=Il(),i={mode:"cubic",points:[]};return{version:119,time:{meter:[{index:0,numerator:4,denominator:4}],tempo:[{position:0,bpm:this.bpm}]},library:[{name:e??"Part 1",uuid:s,parameters:{pitchDelta:{mode:"cubic",points:this.pitchDelta},vibratoEnv:i,loudness:{mode:"cubic",points:this.loudness},tension:i,breathiness:i,voicing:i,gender:i,toneShift:i},notes:this.notes}],tracks:[{name:"未命名音轨",dispColor:"ff7db235",dispOrder:0,renderEnabled:!1,mixer:{gainDecibel:0,pan:0,mute:!1,solo:!1,display:!0},mainGroup:{name:"main",uuid:n,parameters:{pitchDelta:i,vibratoEnv:i,loudness:i,tension:i,breathiness:i,voicing:i,gender:i,toneShift:i},notes:[]},mainRef:{groupID:n,blickOffset:0,pitchOffset:0,isInstrumental:!1,database:{name:"",language:"",phoneset:"",backendType:""},dictionary:"",voice:{}},groups:[{groupID:s,blickOffset:0,pitchOffset:0,isInstrumental:!1,database:{name:"",language:"",phoneset:"",backendType:""},dictionary:"",voice:{}}]}],renderConfig:{destination:"./",filename:"未命名",numChannels:1,aspirationFormat:"noAspiration",bitDepth:16,sampleRate:48e3,exportMixDown:!0}}}toUstx(e){const n=us.parse(Pg),s=7056e5/480;n.tempos[0].bpm=this.bpm;const i=n.voice_parts[0];e!=null&&(i.name=e);const r=JSON.stringify(i.notes[0]);i.notes=this.notes.map(f=>{const h=JSON.parse(r);return h.lyric=f.lyrics,h.tone=f.pitch,h.position=Rs(f.onset/s),h.duration=Rs((f.onset+f.duration)/s)-h.position,h});const{xs:a,ys:o}=i.curves[0],{pitchDelta:c}=this;let l=0,u=c.length;for(;l<u;l+=2)a.push(Rs(c[l]/s)),o.push(Rs(c[l+1]));return us.stringify(n)}toShidunzi(e="unknown",n="",s="",i="1"){let a=this.notes[0];const o=this.notes.flatMap(c=>c.lyrics.split(";").map(l=>{const u=l.match(/^([A-Z])([.\d]+)(,.+)?$/s),[,f,h,m]=u??[,a.onset+a.duration===c.onset?"D":"X","2"],v=Rs(c.onset/147e4);return a=c,`${f},0,${v},480,${h}${m||",1"}`}));return`[Meta]
title = ${e}
author = ${n}
mapper = ${s}

level = ${i}
bpm = ${this.bpm}
offset = 0
bg_offset = 0

[Data]
${o.join(`
`)}`}}var Lt=Uint8Array,Su=Uint16Array,Rg=Int32Array,Dg=new Lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vg=new Lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_u=function(t,e){for(var n=new Su(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var i=new Rg(n[30]),s=1;s<30;++s)for(var r=n[s];r<n[s+1];++r)i[r]=r-n[s]<<5|s;return{b:n,r:i}},Cu=_u(Dg,2),Fg=Cu.b,Bg=Cu.r;Fg[28]=258,Bg[258]=28;_u(Vg,0);var zg=new Su(32768);for(var $e=0;$e<32768;++$e){var hn=($e&43690)>>1|($e&21845)<<1;hn=(hn&52428)>>2|(hn&13107)<<2,hn=(hn&61680)>>4|(hn&3855)<<4,zg[$e]=((hn&65280)>>8|(hn&255)<<8)>>1}var Pr=new Lt(288);for(var $e=0;$e<144;++$e)Pr[$e]=8;for(var $e=144;$e<256;++$e)Pr[$e]=9;for(var $e=256;$e<280;++$e)Pr[$e]=7;for(var $e=280;$e<288;++$e)Pr[$e]=8;var Ug=new Lt(32);for(var $e=0;$e<32;++$e)Ug[$e]=5;var qg=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Lt(t.subarray(e,n))},Wg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],mn=function(t,e,n){var s=new Error(e||Wg[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,mn),!n)throw s;return s},Hg=new Lt(0),Kg=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,s=9;--s;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t}(),Zg=function(){var t=-1;return{p:function(e){for(var n=t,s=0;s<e.length;++s)n=Kg[n&255^e[s]]^n>>>8;t=n},d:function(){return~t}}},Gg=function(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n},ze=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Ol=typeof TextEncoder<"u"&&new TextEncoder,Yg=typeof TextDecoder<"u"&&new TextDecoder,Jg=0;try{Yg.decode(Hg,{stream:!0}),Jg=1}catch{}function mr(t,e){var n;if(Ol)return Ol.encode(t);for(var s=t.length,i=new Lt(t.length+(t.length>>1)),r=0,a=function(l){i[r++]=l},n=0;n<s;++n){if(r+5>i.length){var o=new Lt(r+8+(s-n<<1));o.set(i),i=o}var c=t.charCodeAt(n);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|t.charCodeAt(++n)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63)):(a(224|c>>12),a(128|c>>6&63),a(128|c&63))}return qg(i,0,r)}var Qi=function(t){var e=0;if(t)for(var n in t){var s=t[n].length;s>65535&&mn(9),e+=s+4}return e},Tl=function(t,e,n,s,i,r,a,o){var c=s.length,l=n.extra,u=o&&o.length,f=Qi(l);ze(t,e,a!=null?33639248:67324752),e+=4,a!=null&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(r<0&&8),t[e++]=i&&8,t[e++]=n.compression&255,t[e++]=n.compression>>8;var h=new Date(n.mtime==null?Date.now():n.mtime),m=h.getFullYear()-1980;if((m<0||m>119)&&mn(10),ze(t,e,m<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),e+=4,r!=-1&&(ze(t,e,n.crc),ze(t,e+4,r<0?-r-2:r),ze(t,e+8,n.size)),ze(t,e+12,c),ze(t,e+14,f),e+=16,a!=null&&(ze(t,e,u),ze(t,e+6,n.attrs),ze(t,e+10,a),e+=14),t.set(s,e),e+=c,f)for(var v in l){var d=l[v],b=d.length;ze(t,e,+v),ze(t,e+2,b),t.set(d,e+4),e+=4+b}return u&&(t.set(o,e),e+=u),e},Qg=function(t,e,n,s,i){ze(t,e,101010256),ze(t,e+8,n),ze(t,e+10,n),ze(t,e+12,s),ze(t,e+16,i)},ba=function(){function t(e){this.filename=e,this.c=Zg(),this.size=0,this.compression=0}return t.prototype.process=function(e,n){this.ondata(null,e,n)},t.prototype.push=function(e,n){this.ondata||mn(5),this.c.p(e),this.size+=e.length,n&&(this.crc=this.c.d()),this.process(e,n||!1)},t}(),Xg=function(){function t(e){this.ondata=e,this.u=[],this.d=1}return t.prototype.add=function(e){var n=this;if(this.ondata||mn(5),this.d&2)this.ondata(mn(4+(this.d&1)*8,0,1),null,!1);else{var s=mr(e.filename),i=s.length,r=e.comment,a=r&&mr(r),o=i!=e.filename.length||a&&r.length!=a.length,c=i+Qi(e.extra)+30;i>65535&&this.ondata(mn(11,0,1),null,!1);var l=new Lt(c);Tl(l,0,e,s,o,-1);var u=[l],f=function(){for(var b=0,E=u;b<E.length;b++){var T=E[b];n.ondata(null,T,!1)}u=[]},h=this.d;this.d=0;var m=this.u.length,v=Gg(e,{f:s,u:o,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(f(),h){var b=n.u[m+1];b?b.r():n.d=1}h=1}}),d=0;e.ondata=function(b,E,T){if(b)n.ondata(b,E,T),n.terminate();else if(d+=E.length,u.push(E),T){var A=new Lt(16);ze(A,0,134695760),ze(A,4,e.crc),ze(A,8,d),ze(A,12,e.size),u.push(A),v.c=d,v.b=c+d+16,v.crc=e.crc,v.size=e.size,h&&v.r(),h=1}else h&&f()},this.u.push(v)}},t.prototype.end=function(){var e=this;if(this.d&2){this.ondata(mn(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},t.prototype.e=function(){for(var e=0,n=0,s=0,i=0,r=this.u;i<r.length;i++){var a=r[i];s+=46+a.f.length+Qi(a.extra)+(a.o?a.o.length:0)}for(var o=new Lt(s+22),c=0,l=this.u;c<l.length;c++){var a=l[c];Tl(o,e,a,a.f,a.u,-a.c-2,n,a.o),e+=46+a.f.length+Qi(a.extra)+(a.o?a.o.length:0),n+=a.b}Qg(o,e,this.u.length,s,n),this.ondata(null,o,!0),this.d=2},t.prototype.terminate=function(){for(var e=0,n=this.u;e<n.length;e++){var s=n[e];s.t()}this.d=2},t}();const{floor:El}=Math,ey=t=>{let n="";for(const s of t.notes){const{lyrics:i,pitch:r}=s,a=El(s.onset/147e4),o=El((s.onset+s.duration)/147e4)-a;n+=`
    <Note position="${a}" duration="${o}" note-number="${r}" lyric="${i}" breath="false">
      <PhonemeTimings />
    </Note>`}return`<?xml version="1.0" encoding="utf-8"?>
<Score resolution="480">
  <Tempos>
    <Tempo position="0" tempo="${t.bpm}" />
  </Tempos>
  <TimeSignatures>
    <TimeSignature position="0" beats="4" beat-type="4" />
  </TimeSignatures>
  <KeySignatures>
    <KeySignature position="0" key="0" />
  </KeySignatures>
  <Notes>${n}
  </Notes>
</Score>`},ty=()=>`<?xml version="1.0" encoding="utf-8"?>
<Project>
  <GeneratorVersion>1.0.0</GeneratorVersion>
  <NeutrinoParameters>
    <StyleShift>0</StyleShift>
    <ModelDir></ModelDir>
  </NeutrinoParameters>
  <WorldParameters>
    <PitchShift>1</PitchShift>
    <FormantShift>1</FormantShift>
    <SmoothPitch>0</SmoothPitch>
    <SmoothFormant>0</SmoothFormant>
    <EnhanceBreathiness>0</EnhanceBreathiness>
  </WorldParameters>
  <EditFilePaths>
    <FilePath id="score">edit\\score.xml</FilePath>
    <FilePath id="pitch">edit\\pitch.bin</FilePath>
    <FilePath id="dynamics">edit\\dynamics.bin</FilePath>
  </EditFilePaths>
  <RenderInfoPath>render\\render_info.xml</RenderInfoPath>
</Project>`,ny=(t,e,n)=>new Promise((s,i)=>{const r=[],a=new Xg((u,f,h)=>{if(u!=null){i(u);return}r.push(f),h&&s(r)}),o=new ba(`${t}/${t}.ntpj`);a.add(o);const c=new ba(`${t}/edit/score.xml`);a.add(c);const l=new ba(`${t}/edit/pitch.bin`);a.add(l),a.end(),o.push(mr(ty()),!0),c.push(mr(ey(e)),!0);for(const{buffer:u,byteOffset:f,byteLength:h}of mu(n,n.byteLength))l.push(new Uint8Array(u,f,h));l.push(new Uint8Array(0),!0)}),{trunc:Fi}=Math,Al=typeof window.showDirectoryPicker!="function",sy=xs({name:"Koharu Label",props:{backend:{type:String,default:""},baseURL:{type:String,default:"/"}},data(){return{extra:!1,type:"f64",bpm:"120",basePitch:"60",phonemesRadio:"null",refinePitch:!1,useHarvest:!1,envelope:!1}},setup(t,e){const n=og("<");n!=null&&(kt.error(n),console.exception(n));const{backend:s}=t;return{world:Te(null),worldType:Te(s!=="python"?"World-Wasm":"PyWorld"),worldPromise:Te(null),handle:Te(null),labFile:Te(null),audio:Te(null),worldResult:Te(null),inst:Te(null)}},watch:{worldType:{handler(t){let e=null;this.world=null,t==="World-Wasm(Async)"?e=di.create(!0):t==="World-Wasm"?e=di.create(!1):t==="PyWorld"&&(e=fi.create(this.$props.baseURL)),this.worldPromise=e},immediate:!0}},computed:{audioName(){const{audio:t,worldResult:e}=this;if(t!=null&&e!=null)return t.name.replace(Xn,"");const{labFile:n}=this;if(n!=null)return n.name.replace(Xn,"")},audioMsg(){const{world:t,audio:e,worldResult:n}=this;if(t==null)return"";if(e!=null){if(e instanceof Ye)return e.getInfo();if(n==null)return`使用 ${t.name} 导入音频文件 ${e.name}`}return t instanceof fi?`PyWorld: ${t.baseURL}`:""}},methods:{async openDir(){try{const t=await window.showDirectoryPicker();await ug(t,!0)&&(this.handle=t)}catch(t){if(!(t instanceof Error))throw t;if(t.name==="AbortError")kt.warning("已取消"),this.handle=null;else throw t}},async handleChange(t){for(const e of t){const n=gi(e);switch(n){case"lab":this.labFile=e;break;case"svp":this.loadSvpFile(e);break;case"ustx":this.loadUstxFile(e);break;case"f0":this.closeAudioFile(),await this.loadF0File(e);break;default:Ye.audioTypes.has(n)&&(this.closeAudioFile(),await this.loadAudioFile(e))}}},async loadSvpFile(t){const e=JSON.parse((await t.text()).replace(/\0+$/,"")),{bpm:n}=e.time.tempo[0],s=1e7/(n*7056e5/60),i=[...function*(){for(const{name:u,mainGroup:{notes:f}}of e.tracks)yield{type:"轨道",name:u,notes:f};for(const{name:u,notes:f}of e.library)yield{type:"音符组",name:u,notes:f}}()],r=prompt(i.map((u,f)=>`${f}:(${u.notes.length})[${u.type}]${u.name}`).join(`
`),`${i.findIndex(u=>u.notes.length>0)??0}`);if(r==null)return;const{name:a,notes:o}=i[+r];let c=[];for(const u of o){const f=u.onset+u.duration,h=Fi(u.onset*s),m=Fi(f*s);c[c.length]=`${h} ${m} ${u.lyrics}
`}const l=`${t.name.replace(Xn,"")}[${a}].lab`;this.labFile=new File(c,l,{type:"text/plain"})},async loadUstxFile(t){const e=us.parse(await t.text()),{bpm:n}=e.tempos[0],s=1e7/(n*480/60),i=[...e.voice_parts],r=prompt(i.map((u,f)=>`${f}:(${u.notes.length})${u.name}`).join(`
`),`${i.findIndex(u=>u.notes.length>0)??0}`);if(r==null)return;const{name:a,notes:o}=i[+r];let c=[];for(const u of o){const f=u.position+u.duration,h=Fi(u.position*s),m=Fi(f*s);c[c.length]=`${h} ${m} ${u.lyric}
`}const l=`${t.name.replace(Xn,"")}[${a}].lab`;this.labFile=new File(c,l,{type:"text/plain"})},exportLabFile(){const{labFile:t}=this;this.saveFile([t],t.name)},closeLabFile(){this.labFile=null},async loadAudioFile(t){const{world:e}=this;try{this.audio=t;const n=await e.decodeAudio(t);n.name=t.name;const s=await e[this.useHarvest?"harvest":"dio"](n.data,n.fs);this.audio=n,this.worldResult=s}catch(n){throw this.closeAudioFile(),kt.error("导入失败"),n}},closeAudioFile(){this.audio=this.worldResult=null},async loadF0File(t){try{const e=await t.arrayBuffer();let n;switch(this.type){case"f32":n=new Float64Array(new Float32Array(e));break;case"f64":n=new Float64Array(e);break}const s={f0:n,t:Float64Array.from(n,(i,r)=>r/200)};this.audio=t,this.worldResult=s}catch(e){throw this.closeAudioFile(),kt.error("导入失败"),e}},exportF0(){const{audioName:t,worldResult:e}=this;if(t==null||e==null)return;let n=prompt("填充长度（字节）");if(typeof n!="string")return;n=n.replace(/[\s,]/g,"");let s;if(!n)s=[e.f0];else{let{f0:i}=e,r=parseInt(n);if(r!==r)return;r===0&&(r=i.byteLength),s=mu(i,r)}if(this.type=="f32")for(let i=0;i<s.length;i++)s[i]=new Float32Array(s[i]);this.saveFile(s,t+".f0")},async createSvpFile(){const t=this,{labFile:e,audio:n,audioName:s,worldResult:i,phonemesRadio:r}=t,a=t.inst=new hi(+t.bpm);if(a.basePitch=+t.basePitch,i!=null){const{f0:o,t:c}=i;a.injectPitch(o,c)}if(e!=null)a.injectLab(await e.text());else if(i!=null){let o=3528e5,c=a.calcOffset(i.t.at(-1)??0),l=0,u,f,h;for(u=0;u<c;u+=o)[f,h]=a.findPitchRange(u,u+o,l),!(f>=h)&&(l=f,a.notes.push(hi.createNote(u,o,"a",a.basePitch)))}if(r!=="null"&&(a.margeConsonantNote(),r!=="marge")){let o=String;r==="hiragana"?o=ds.toHiragana:r==="katakana"&&(o=ds.toKatakana);for(const c of a.notes)c.lyrics=o(c.lyrics)}if(t.refinePitch&&a.refinePitch(),t.envelope&&n instanceof Ye){const{data:o,fs:c}=n;a.injectLoudnessWithEnvelope(o,c)}return a},async exportSvp(){const{audioName:t}=this,n=(await this.createSvpFile()).toJSON(t);this.saveFile([JSON.stringify(n),"\0"],`${t}.svp`)},async exportUstx(){const{audioName:t}=this,e=await this.createSvpFile();this.saveFile([e.toUstx(t)],`${t}.ustx`)},async exportShidunzi(){const{audioName:t}=this,e=await this.createSvpFile();this.saveFile([e.toShidunzi(t)],"data.sdz")},async exportNtpj(){const{audioName:t,worldResult:e}=this,n=await this.createSvpFile();this.saveFile(await ny(t,n,e.f0),`${t}.zip`)},async saveFile(t,e){const{handle:n}=this;if(n==null){Zs(t,e);return}await fg(n,t,e),kt.success("导出成功")}},render(){const t=this;return k(ki,{gutter:5},()=>[k(Ut,{xs:24,lg:12},()=>[k($r,{global:!0,onChange:t.handleChange}),k(yt,{},{title:()=>{const e=t.labFile?.name;return k("p",{},[e!=null?k("i",{class:"ivu-icon ivu-icon-md-document"}):null,k("span",{title:e??"或 svp, ustx 文件"},[e??"需要 lab 文件"])])},extra:()=>k(ht,{},()=>[k(me,{disabled:t.labFile==null,onClick:t.exportLabFile},()=>"导出 lab"),k(me,{disabled:t.labFile==null,onClick:t.closeLabFile},()=>k(st,{type:"md-close"}))])}),k(yt,{},{title:()=>{const e=t.audio?.name;return k("p",{},[t.audioName!=null?k("i",{class:"ivu-icon ivu-icon-md-document"}):null,k("span",{title:e??`或 ${[...Ye.audioTypes].join(", ")} 文件`},[e??"需要 f0 文件"])])},extra:()=>k(ht,{},()=>[k(me,{disabled:t.worldResult?.t[1]!==.005,onClick:t.exportF0},()=>"导出 f0"),k(me,{disabled:t.audioName==null,onClick:t.closeAudioFile},()=>k(st,{type:"md-close"}))]),default:()=>k(os,{promise:t.worldPromise,onFulfilled(e){t.world=e}},(e,n)=>[k(jo,{style:"float:right",type:"button",modelValue:t.type,"onUpdate:modelValue"(s){t.type=s}},()=>{const s=t.audio!=null;return[k(Gn,{disabled:s,label:"f32",title:"适用于 NEUTRINO v2"},()=>"单精度"),k(Gn,{disabled:s,label:"f64"},()=>"双精度")]}),k(is,{style:"width:200px;display:block;margin-bottom:0.8em",transfer:!0,disabled:t.audio!=null,prefix:e!=="pending"?e!=="rejected"?"":"ios-close":"ios-loading",modelValue:t.worldType,"onUpdate:modelValue"(s){t.worldType=s}},()=>[k(Bt,{value:"World-Wasm(Async)",disabled:!Rn},()=>"World-Wasm(Async)"),k(Bt,{value:"World-Wasm",disabled:!Rn},()=>"World-Wasm"),k(Bt,{value:"PyWorld"},()=>"PyWorld")]),e!=="pending"?e!=="rejected"?t.audioMsg:Rn?`加载失败 ${this.worldType}`:k("span",{style:"color:red"},["当前浏览器不支持 WebAssembly"]):`正在加载 ${this.worldType}`])}),k(yt,{icon:t.audioName!=null?"md-document":"",title:t.handle!=null?`导出到 ${t.handle.name}`:"导出"},{extra:()=>k(ht,{},()=>{const e=t.audioName==null&&t.labFile==null;return[k(me,{disabled:Al,title:Al?"当前浏览器不支持 FS Access API":null,onClick:t.openDir},()=>"打开文件夹"),k(me,{disabled:e,onClick:t.exportSvp,title:"适用于 Synthesizer V Studio"},()=>"svp"),k(me,{disabled:e,onClick:t.exportUstx,title:"适用于 OpenUtau"},()=>"ustx"),t.extra?k(me,{disabled:e,onClick:t.exportShidunzi,title:"适用于 石墩子快跑"},()=>"sdz"):null,t.extra?k(me,{disabled:e,onClick:t.exportNtpj,title:"适用于 NEUTRINOTyouseiSienTool v1.8.0.3"},()=>"ntpj"):null]}),default:()=>[k(gs,{modelValue:t.bpm,"onUpdate:modelValue"(e){t.bpm=e}},{prepend:()=>k("span",{},["BPM:"])}),k(gs,{modelValue:t.basePitch,"onUpdate:modelValue"(e){t.basePitch=e}},{prepend:()=>k("span",{},["基准音高:"]),append:()=>k(zc,{modelValue:t.refinePitch,"onUpdate:modelValue"(e){t.refinePitch=e}},()=>"细化音高")}),k(jo,{type:"button",modelValue:t.phonemesRadio,"onUpdate:modelValue"(e){t.phonemesRadio=e}},()=>[k(Gn,{label:"null"},()=>"不转换"),k(Gn,{label:"marge"},()=>"合并辅音"),k(Gn,{label:"hiragana"},()=>"平假名"),k(Gn,{label:"katakana"},()=>"片假名")])]})]),k(Ut,{xs:24,lg:12},()=>[k(yt,{},()=>k("div",{innerHTML:Bp}))])])}});class iy{iterator;constructor(e){this.iterator=e[Symbol.asyncIterator]?.()??e[Symbol.iterator]()}async pull(e){try{const n=await this.iterator.next();n.done?e.close():e.enqueue(await n.value)}catch(n){try{await this.iterator.return?.()}finally{throw n}}}async cancel(){await this.iterator.return?.()}}class Iu{reader;preventCancel;constructor(e,n){this.preventCancel=n?.preventCancel??!1,this.reader=e.getReader()}next(){return this.reader.read()}async return(){return this.preventCancel?this.reader.releaseLock():await this.reader.cancel(),{done:!0,value:void 0}}}Iu.prototype[Symbol.asyncIterator]=async function*(){}.prototype[Symbol.asyncIterator];class ws{static from(e,n){return new this(new ReadableStream(new iy(e),n))}readable;constructor(e){this.readable=e}pipe(e,n){return ws.from(e(this),n)}values(e){return new Iu(this.readable,e)}}ws.prototype[Symbol.asyncIterator]=ws.prototype.values;{const{values:t}=ReadableStream.prototype;if(typeof t=="function"){const e={values(n){return t.call(this.readable,n)}};e[Symbol.asyncIterator]=e.values,Object.assign(ws.prototype,e)}}const{from:Nl}=Array,{log:Ou}=Math,ry=Ou(2),ay=Ou(440);let Ci="",Ua=null;const mo=(t=50021)=>{typeof t=="number"&&(t=`http://127.0.0.1:${t}/`),Ua=null,Ci=t},Tu=()=>(Ua??=new URL("/setting",Ci).href,Ua);mo();const Cn=async(t,e,n={})=>{t=new URL(t,Ci).href,e!=null&&(n.method??="POST",Bl(e)?(n.headers=new Headers(n.headers),n.headers.set("content-type","application/json"),n.body=JSON.stringify(e)):n.body=e),n.credentials??="omit";const s=new Request(t,n),i=await fetch(s),{status:r}=i;if(!(r>=200&&r<300))throw new TypeError(`Request failed with status code ${r}`);return{request:s,response:i}},Eu=async()=>{const t=await(await Cn("/version")).response.json(),e=await(await Cn("/engine_manifest")).response.json();return{version:t,name:e.name,brand_name:e.brand_name,icon:"data:image/png;base64,"+e.icon,uuid:e.uuid,frameRate:e.frame_rate}},oy=async()=>{const{response:t}=await Cn("/speakers"),e=await t.json();return Nl(e,({name:n,styles:s,speaker_uuid:i})=>({value:s[0].id,label:n,uuid:i,children:Nl(s,({name:r,id:a})=>({value:a,label:r}))}))},ly=async()=>{const{response:t}=await Cn("/singers"),e=await t.json(),n=[],s=[];for(const{name:i,styles:r}of e)for(const{name:a,id:o,type:c}of r){const l=c==="sing",u={id:o,name:`${i}（${l?"シング":"ハミング"}・${a}）`};l&&(n[n.length]=u),s[s.length]=u}return{query:n,synthesis:s}},cy=async(t,e)=>{const{response:n}=await Cn(`/sing_frame_audio_query?speaker=${t}`,e);return await n.json()},$l="pau,sil,cl,a,i,u,e,o,N".split(","),uy="k,ky,g,gy,s,sh,z,t,ts,ty,ch,d,dy,n,ny,h,hy,b,by,f,p,py,m,my,y,r,ry,v,w,j".split(","),Ll=t=>ry*((t-69)/12)+ay,fy=(t,e,n)=>{const{notes:s}=e,{phonemes:i}=n;let r=[],a=[];for(let o=1,c=1;o<i.length;o++){const{phoneme:l,frame_length:u}=i[o];if(l==="pau"||l==="sil"){r.length&&(a.push({accentPhrases:[{moras:r,accent:0,isInterrogative:!1}],speedScale:1,pitchScale:0,intonationScale:1,volumeScale:1,prePhonemeLength:.1-(r[0].consonantLength??0),postPhonemeLength:.1,outputSamplingRate:24e3,outputStereo:!1,kana:""}),r=[]);continue}if($l.includes(l)){const{key:f,lyric:h}=s[c++];r.push({text:h,vowel:l,vowelLength:u/t,pitch:Ll(f)})}else if(uy.includes(l)){const f=i[o+1];if($l.includes(f.phoneme)){const{key:h,lyric:m}=s[c++];r.push({text:m,consonant:l,consonantLength:u/t,vowel:f.phoneme,vowelLength:f.frame_length/t,pitch:Ll(h)}),o++}}}return a},{padStart:Ml,toLowerCase:dy}=String.prototype,{trunc:Pl}=Math,jl="pau,sil,cl,a,i,u,e,o,N".split(","),hy="k,ky,g,gy,s,sh,z,t,ts,ty,ch,d,dy,n,ny,h,hy,b,by,f,p,py,m,my,y,r,ry,v,w,j".split(","),py=/^\s*(\d+)\s+(\d+)\s+([\S\s]*?)\s*$/;function*qa(t){for(const e of typeof t=="string"?t.split(/\r?\n/):t){const n=e.match(py);if(!n)continue;let[s,i,r,a]=n;yield[+i,+r,a]}}const my=(t,{minVowelLength:e=.05,maxVowelLength:n=.15,pitch:s=5.8}={})=>{const{min:i,max:r}=Math,a=Array.isArray(t)?t:Array.from(qa(t)),o=u=>r(i(u,n),e);let c=[],l=[];for(let u=0;u<a.length;u++){const f=a[u][2];if(f==="pau"||f==="sil"){c.length&&(l.push({accentPhrases:[{moras:c,accent:0,isInterrogative:!1}],speedScale:1,pitchScale:0,intonationScale:1,volumeScale:1,prePhonemeLength:.1,postPhonemeLength:.1,outputSamplingRate:24e3,outputStereo:!1,kana:""}),c=[]);continue}if(jl.includes(f))c.push({text:f,vowel:f,vowelLength:o((a[u][1]-a[u][0])/1e7),pitch:s});else if(hy.includes(f)){const h=a[u+1];jl.includes(h[2])&&(c.push({text:f+h[2],consonant:f,consonantLength:(a[u][1]-a[u][0])/1e7,vowel:h[2],vowelLength:o((h[1]-h[0])/1e7),pitch:s}),u++)}}return l},gy=async()=>{const{response:t}=await Cn("/speakers"),e=await t.json();let n="";for(const s of e)for(const i of s.styles){const r=gt(Ml,i.id,3," "),a=gt(Ml,s.name,6,"　");n+=`${r}:${a}（${i.name}）
`}return n},Au=t=>{const{accentPhrases:e,...n}=t;return n.accent_phrases=Array.from(e,s=>{const{moras:i,...r}=s;return r.moras=Array.from(i,a=>{const{consonantLength:o,vowelLength:c,...l}=a;return l.consonant_length=o,l.vowel_length=c,l}),r}),n},yy=async(t,e)=>{const{response:n}=await Cn(`/synthesis?speaker=${t}`,Au(e));return n.blob()},by=async(t,e,n,s)=>{const i=new URLSearchParams({base_speaker:t,target_speaker:e,morph_rate:n}),{response:r}=await Cn(`/synthesis_morphing?${i}`,Au(s));return r.blob()},vy=function*(t,e=0){if(t==null)return;const{speedScale:n}=t,s=1e7,i=(r,a="pau")=>{const o=Pl(e);e+=r*s/n;const c=Pl(e);return[o,c,a]};yield i(t.prePhonemeLength);for(const r of t.accentPhrases){for(const o of r.moras)o.consonantLength!=null&&o.consonant!=null&&(yield i(o.consonantLength,o.consonant)),yield i(o.vowelLength,o.vowel!=="N"?gt(dy,o.vowel):o.vowel);const{pauseMora:a}=r;a!=null&&(yield i(a.vowelLength,a.vowel))}yield i(t.postPhonemeLength)},wy=(t,e=0)=>{let n="";for(const s of vy(t,e))n+=s.join(" ")+`
`;return n},{apply:xy}=Reflect,tt=gu(t=>{switch(t){case"zh-CN":case"zh-Hans":return{loading:"加载中",world_syn:"开始 WORLD 合成",vox_syn:"开始 VOICEVOX 合成",conn_vox_fail:"连接 VOICEVOX ENGINE 失败",world_analysis:"开始 WORLD 分析",syn_input:"输入　角色ID，最小元音长度，最大元音长度，音高：",syn_fail:"合成失败",syn_pend:"合成中",syn_v:"合成",syn:"合成",export:"导出",version_:"版本：",refresh:"刷新",set_cors0:"可能需要前往 ",set_cors1:" 设置CORS"};case"en-US":case"en":return{loading:"Loading",world_syn:"Start WORLD synthesis",vox_syn:"Start VOICEVOX synthesis",conn_vox_fail:"Connect VOICEVOX ENGINE failed",world_analysis:"Start WORLD analysis",syn_input:"Input speaker id,min vowel length,max vowel length,pitch:",syn_fail:"Synthesis failed",syn_pend:"In synthesis",syn_v:"Synthesize",syn:"Synthesis",export:"export",version_:"Version: ",refresh:"Refresh",set_cors0:"You may need to go to ",set_cors1:" to set CORS"}}},""),Rl=gu(t=>{switch(t){case"zh-CN":case"zh-Hans":return{require:e=>`需要 ${e} 文件`};case"en-US":case"en":return{require:e=>`Require ${e} file`}}},()=>""),pi={normalizeLab(t){const e=/^(pau|sil)$/;let n="",s="",i="";for(const[r,a,o]of qa(t))e.test(n)&&e.test(o)&&(i+="#"),i+=s,s=`${r} ${a} ${o}
`,n=o;return i+=s,i},*xparseLab(t){for(const[e,n,s]of qa(t))yield[e/1e4,n/1e4,s]},labelSync(t,e,n,s,i,r){const a=[n.length,s[0].length],o=Oe.create("float64",a),c=Oe.create("float64",a);o.buffer.fill(1e-16),c.buffer.fill(1-1e-16);const l=pi.xparseLab(e),{trunc:u}=Math;for(const[f,h]of pi.xparseLab(t)){const{done:m,value:v}=l.next();if(m)break;const[d,b]=v,E=(b-d)/(h-f);for(let T=u(f/5),A=u(h/5);T<A;T++){const $=u((E*(T*5-f)+d)/5);if(T>=o.length||$>=s.length)break;o[T].set(s[$]),c[T].set(i[$])}}return[n,o,c,r]},async normalizeVvproj(t){(typeof t=="string"||t instanceof Blob)&&(t=await new Response(t).json());for(const e of Object.values(t.audioItems))for(const n of e.query.accentPhrases){for(const i of n.moras)i.pitch=5.8,i.vowelLength=.15;const{pauseMora:s}=n;typeof s=="object"&&s&&(s.vowelLength=.15)}return JSON.stringify(t)}},va=(t,e)=>async function(...n){if(this.process==null){this.process=t;try{await(this.output=xy(e,this,n).then(i=>i instanceof Blob?URL.createObjectURL(i):typeof i=="function"?(setTimeout(i),null):this.output=null))}catch(s){throw kt.error(tt("syn_fail")),s}finally{this.process=null}}},Dl=async()=>{const t=await Eu(),e=await gy();return{...t,speakers:e}},Nu=xs({name:"Koharu Label Syncer (Legacy)",props:{backend:{type:String,default:""},baseURL:{type:String,default:"/"}},data(){return{voxInfo:Dl(),process:null,output:null,outputState:"empty",imgs:[],lab0:"",lab1:"",useSavefig:!1,promptValue:null,info:""}},setup(t,e){const{backend:n}=t;return{world:Te(null),worldType:Te(n!=="python"?"World-Wasm":"PyWorld"),worldPromise:Te(null),f0File:Te(null),audio:Te(null),worldResult:Te(null)}},watch:{worldType:{handler(t){let e=null;this.world=null,t==="World-Wasm(Async)"?e=di.create(!0):t==="World-Wasm"?e=di.create(!1):t==="PyWorld"&&(e=Promise.resolve(new fi(this.$props.baseURL))),this.worldPromise=e},immediate:!0}},computed:{outputAudioName(){const{audio:t}=this;return t instanceof Ye?t.name.replace(Xn,"_voxsyn.wav"):null}},methods:{getVoxInfo(){this.voxInfo=Dl()},setVoxBaseURL(){let t=prompt("VOICEVOX Engine URL:",Ci);t!=null&&(mo(t===""?void 0:t),this.getVoxInfo())},async handleChange(t){const{audioTypes:e}=Ye;let n,s,i;for(const r of t){const a=gi(r);if(a==="lab")n=r;else if(a==="f0")s=r;else if(a==="vvproj"){Zs([await pi.normalizeVvproj(r)],r.name);return}else e.has(a)&&(i=r)}if(n!=null){let r=await n.text();r=i!=null?r:pi.normalizeLab(r),this[i!=null?"lab1":"lab0"]=`#filename=${n.name}
${r}`}s!=null&&(this.f0File=s),i!=null&&await this.loadAudioFile(i)},closeF0File(){this.f0File=null},async loadAudioFile(t){const{world:e}=this;try{this.closeAudioFile(),this.audio=t;const n=await e.decodeAudio(t);n.name=t.name;const s=await e.all(n.data,n.fs);this.audio=n,this.worldResult=s}catch(n){throw this.closeAudioFile(),kt.error("导入失败"),n}if(this.useSavefig&&e instanceof fi)try{const{worldResult:n,imgs:s}=this;if(n==null)return;for(const r of s)URL.revokeObjectURL(r);s.length=0;const i=[[[n.f0]],[[n.sp]],[[n.ap],!1]];for(let r=0;r<i.length;r++)s[r]=URL.createObjectURL(await e.savefig(...i[r]))}catch(n){console.warn(n)}},closeAudioFile(){this.audio=this.worldResult=this.output=null},async exportOriginAudio(){const{world:t,audio:e}=this;if(!(t!=null&&e instanceof Ye))return;const{name:n,data:s,fs:i,info:r}=e,a=await t.encodeAudio(s,i,r?.format,r?.subtype);Zs([a],n)},log(t){if(t==null){this.info="";return}this.info=t,kt.info(t)},handleSynthesize(){},handleSynthesizeTest(){},handleSynthesizeVox(){}},render(){const t=this;return k(ki,{gutter:5},()=>[k(Ut,{xs:24,lg:12},()=>[k($r,{global:!0,onChange:t.handleChange}),k(yt,{icon:t.f0File!=null?"md-document":"",title:t.f0File?.name??Rl("require")("f0")},{extra:()=>k(me,{disabled:t.f0File==null,onClick:t.closeF0File},()=>k(st,{type:"md-close"}))}),k(yt,{icon:t.audio instanceof Ye?"md-document":"",title:t.audio!=null?t.audio instanceof Ye?t.audio.name:tt("loading"):Rl("require")("wav")},{extra:()=>k(ht,{},()=>[k(me,{disabled:!(t.audio instanceof Ye),onClick:t.exportOriginAudio},()=>tt("export")),k(me,{disabled:!(t.audio instanceof Ye),onClick:t.closeAudioFile},()=>k(st,{type:"md-close"}))]),default:()=>k(os,{promise:t.worldPromise,onFulfilled(e){t.world=e}},(e,n)=>[k(is,{style:"width: 200px;display: block;margin-bottom: .8em",transfer:!0,disabled:t.audio!=null||t.outputState==="pending",prefix:e!=="pending"?e!=="rejected"?"":"ios-close":"ios-loading",modelValue:t.worldType,"onUpdate:modelValue"(s){t.worldType=s}},()=>[k(Bt,{value:"World-Wasm(Async)",disabled:!Rn},()=>"World-Wasm(Async)"),k(Bt,{value:"World-Wasm",disabled:!Rn},()=>"World-Wasm"),k(Bt,{value:"PyWorld"},()=>"PyWorld")]),t.audio instanceof Ye?t.audio.getInfo():""])}),k(os,{promise:t.output,onSettle(e,n,s,i){t.outputState=e,s==="fulfilled"&&typeof i=="string"&&URL.revokeObjectURL(i)}},(e,n)=>{e==="fulfilled"&&n==null&&(e="pending");const s=e==="fulfilled",i=e==="rejected",r=e==="pending",a=e==="empty";return k(yt,{},{title:()=>k("p",{},[k("span",{},[s?k(st,{type:"md-document"}):null,s?k("a",{href:n,download:t.outputAudioName},t.outputAudioName):null,i?tt("syn_fail"):null,r?tt("syn_pend"):null,a?tt("syn"):null])]),extra:()=>k(me,{loading:r,disabled:t.f0File==null,onClick:t.handleSynthesize},()=>tt("syn_v")),default:()=>[s?k("audio",{controls:"",src:n,style:{width:"100%"}}):null,r?k("div",{},[t.info]):null]})}),k(os,{promise:t.voxInfo},(e,n)=>{const s=e==="fulfilled",i=e==="rejected",r=e==="pending";return k(yt,{},{title:()=>[k("p",{},[k("span",{},[s?n.brand_name:"VOICEVOX"])]),s?k("div",{class:"ivu-cell-label"},[n.name]):null,s?k("div",{class:"ivu-cell-label"},[`${tt("version_")}${n.version}`]):null],extra:()=>k(ht,{},()=>[k(me,{loading:r,onClick:t.setVoxBaseURL},()=>"URL"),k(me,{disabled:r,onClick:t.getVoxInfo},()=>tt("refresh"))]),default:()=>{if(s)return[k("pre",{innerText:n.speakers})];if(i){const a=Tu();return[tt("conn_vox_fail"),k("br"),tt("set_cors0"),k("a",{target:"_blank",href:a},[a]),tt("set_cors1")]}}})}),Array.from(t.imgs,e=>k("img",{src:e}))]),k(Ut,{xs:12,lg:6},()=>[k(gs,{type:"textarea",autosize:{minRows:20,maxRows:1/0},modelValue:t.lab0,"onUpdate:modelValue"(e){t.lab0=e}})]),k(Ut,{xs:12,lg:6},()=>[k(gs,{type:"textarea",autosize:{minRows:20,maxRows:1/0},modelValue:t.lab1,"onUpdate:modelValue"(e){t.lab1=e}})])])}});Object.assign(Nu.methods,{handleSynthesize:va("",async function(){const t=this,{world:e,f0File:n,audio:s,worldResult:i,lab0:r,lab1:a}=t;if(e==null||n==null)return;if(!(s instanceof Ye&&i!=null))return t.handleSynthesizeVox;const{fs:o,info:c}=s,{sp:l,ap:u}=i;t.log(tt("world_syn"));const f=new Float64Array(await n.arrayBuffer()),h=await e.synthesize(...pi.labelSync(r,a,f,l,u,o));return await e.encodeAudio(h,o,c?.format,c?.subtype)}),handleSynthesizeTest:va("",async function(){const t=this,{world:e,audio:n,worldResult:s}=t;if(e==null||!(n instanceof Ye&&s!=null))return;const{fs:i,info:r}=n,{f0:a,sp:o,ap:c}=s,l=await e.synthesize(a,o,c,i);return await e.encodeAudio(l,i,r?.format,r?.subtype)}),handleSynthesizeVox:va("",async function(){const t=this,{world:e,lab0:n,f0File:s}=t;if(e==null||s==null)return;t.log();let{promptValue:i}=t;const r=tt("syn_input");if(i==null&&(i="8,0.05,0.15,5.8"),i=prompt(r,i),i==null)return;t.promptValue=i;const[a,o,c,l]=i.split(","),u=my(n,{minVowelLength:+o,maxVowelLength:+c,pitch:+l});let f=ws.from(u.entries()).pipe(async function*(b){const E=a.indexOf(":")>0;let T=yy;if(E){let[A,$,y]=a.split(/\s*:\s*/);T=(g,C)=>by(A,$,y,C)}for await(const[A,$]of b){const y=`${tt("vox_syn")} (${A+1}/${u.length})`;t.log(y);const g=await T(a,$);yield{i:A,query:$,file:g}}}).pipe(async function*(b){let E=0,T="",A=/([^\n]+\n)$/,$,y,g;for await(const{i:C,query:_,file:x}of b)C+1,`${u.length}`,{fs:$,info:y,data:g}=await e.decodeAudio(x),T+=wy(_,E).replace(A,"#$1"),E+=g.length/$*1e7,yield new Uint8Array(g.buffer,g.byteOffset,g.byteLength);h={offset:E,lab1:T,Ctor:g.constructor,info:y,fs:$}}),h;const m=await new Response(f.readable).arrayBuffer();t.log(tt("world_analysis"));const v=new Ye({data:new h.Ctor(m),fs:h.fs,info:h.info});v.name=s.name.replace(/\.f0$/,`(${i}).wav`);const d=await e.all(v.data,v.fs);return t.lab0=n,t.lab1=h.lab1.replace(/#([^\n]+\n)$/,"$1"),t.audio=v,t.worldResult=d,t.log(),t.handleSynthesize})});const{trunc:wa}=Math,{apply:ky}=Reflect,xa={ustxToNotesList(t,e,n=0){const s=[],i=e*60/480/t.tempos[0].bpm,r={frame_length:wa(.1*e),lyric:""};let a=0,o=[r];for(const{position:c,duration:l,tone:u,lyric:f}of t.voice_parts[n].notes)a<c&&(o.length>1&&(o[o.length]=r,s[s.length]=o,o=[r]),a=c),o[o.length]={frame_length:wa((c+l)*i)-wa(c*i),key:u,lyric:f},a+=l;return o[o.length]=r,s[s.length]=o,s},async notesListToQuerys(t,e,n,s){const i=[];let r=0;for(;r<t.length;r++){s(r,t.length);const a={notes:t[r]};i.push(...fy(e,a,await cy(n,a)))}return s(r,t.length),i},querysToVvproj(t,e,n,s){const i=e.speakers[n],r={engineId:e.uuid,speakerId:i.uuid,styleId:i.children[s].value},a=[],o={};for(let c=0;c<t.length;c++){const l=t[c];let u="";for(const f of l.accentPhrases)for(const h of f.moras)u+=h.text;a[c]=`${c}`,o[c]={text:u,voice:r,query:l}}return JSON.stringify({appVersion:"0.16.1",audioKeys:a,audioItems:o})}},ka=async()=>{const t=await Eu(),e=await oy(),n=await ly();return{...t,speakers:e,singers:n}},Sy=xs({name:"Koharu Label Syncer",props:{backend:{type:String,default:""},baseURL:{type:String,default:"/"}},setup(t){const e=Te(null),n=Te(null),s=Te(-1),i=Te(null),r=Te(ka()),a=Te(-1),o=Te(-1),c=Te(-1),l=Te(null),u=Te(null);return{process:l,message:u,ustxFile:e,ustx:n,ustxPartIndex:s,voxInfo:i,voxInfoPromise:r,querySingerIndex:a,speakerIndex:o,speakerStyleIndex:c,exportVvprojFile:((h,m)=>async function(...v){if(l.value==null){l.value=h;try{const d=await ky(m,null,v);Zs(d,d.name)}catch(d){throw kt.error("失败"),d}finally{l.value=null,u.value=null}}})("vvproj",async()=>{const h=i.value,{frameRate:m}=h,v=h.singers.query[a.value].id,d=xa.ustxToNotesList(n.value,m,s.value),b=await xa.notesListToQuerys(d,m,v,(T,A)=>{const $=`${T}/${A}`;u.value=$}),E=xa.querysToVvproj(b,h,o.value,c.value);return new File([E],e.value.name.replace(Xn,".vvproj"))})}},methods:{getVoxInfo(){this.voxInfo=null,this.voxInfoPromise=ka()},setVoxBaseURL(){let t=prompt("VOICEVOX Engine URL:",Ci);t!=null&&(mo(t||void 0),this.voxInfo=null,this.voxInfoPromise=ka())},handleChange(t){for(const e of t)gi(e)==="ustx"&&this.openUstxFile(e)},async openUstxFile(t){this.ustx=Pc(await t.text()),this.ustxPartIndex=0,this.ustxFile=t},closeUstxFile(){this.ustx=null,this.ustxPartIndex=-1,this.ustxFile=null}},render(){const t=this;return k(ki,{gutter:5},()=>[k(Ut,{xs:24,lg:12},()=>[k($r,{global:!0,onChange:t.handleChange}),k(yt,{icon:t.ustxFile!=null?"md-document":"",title:t.ustxFile?.name??"需要 ustx 文件"},{extra:()=>k(me,{disabled:t.process!=null||t.ustxFile==null,onClick:t.closeUstxFile},()=>k(st,{type:"md-close"})),default:()=>k(is,{style:"width:320px;display:block;margin-bottom:.8em",transfer:!0,disabled:t.process!=null||t.ustx==null,modelValue:t.ustxPartIndex,"onUpdate:modelValue"(e){t.ustxPartIndex=e}},()=>t.ustx!=null?Array.from(t.ustx.voice_parts,({name:e},n)=>k(Bt,{value:n},()=>e)):null)}),k(yt,{icon:t.ustxFile!=null&&t.voxInfo!=null?"md-document":"",title:`导出${t.message!=null?`　（${t.message}）`:""}`},{extra:()=>k(ht,{},()=>{const{process:e}=t;return[k(me,{disabled:e!=null||t.ustx==null||t.voxInfo==null||!(t.speakerStyleIndex>=0),loading:e==="vvproj",onClick:t.exportVvprojFile},()=>"vvproj")]}),default:()=>{const e=t.voxInfo;return[k(is,{style:"width:320px;display:block;margin-bottom:.8em",transfer:!0,disabled:t.process!=null||e==null,modelValue:t.querySingerIndex,"onUpdate:modelValue"(n){t.querySingerIndex=n}},()=>e!=null?Array.from(e.singers.query,({name:n},s)=>k(Bt,{key:n,value:s},()=>n)):null),k(is,{style:"width:200px",transfer:!0,disabled:t.process!=null||e==null,modelValue:t.speakerIndex,"onUpdate:modelValue"(n){t.speakerIndex=n,t.speakerStyleIndex=0}},()=>e!=null?Array.from(e.speakers,({label:n},s)=>k(Bt,{key:n,value:s},()=>n)):null),k(is,{style:"width:200px",transfer:!0,placeholder:"",disabled:t.process==null&&e!=null?e.speakers[t.speakerIndex]==null:!0,modelValue:t.speakerStyleIndex,"onUpdate:modelValue"(n){t.speakerStyleIndex=n}},()=>e!=null&&e.speakers[t.speakerIndex]!=null?Array.from(e.speakers[t.speakerIndex].children,({label:n},s)=>k(Bt,{key:n,value:s},()=>n)):null)]}}),k(os,{promise:t.voxInfoPromise,onFulfilled(e){t.voxInfo=e,t.querySingerIndex=0}},(e,n)=>{const s=e==="fulfilled",i=e==="rejected",r=e==="pending";return k(yt,{},{title:()=>[k("p",{},[k("span",{},[s?n.brand_name:"VOICEVOX"])]),s?k("div",{class:"ivu-cell-label"},[n.name]):null,s?k("div",{class:"ivu-cell-label"},[`版本：${n.version}`]):null],extra:()=>k(ht,{},()=>[k(me,{loading:r,onClick:t.setVoxBaseURL},()=>"URL"),k(me,{disabled:r,onClick:t.getVoxInfo},()=>"刷新")]),default:()=>{if(i){const a=Tu();return["连接 VOICEVOX ENGINE 失败",k("br"),"可能需要前往 ",k("a",{target:"_blank",href:a},[a])," 设置CORS"]}}})})])])}}),$u={あ:"a",い:"i",うぉ:"w o",う:"i\\",え:"e",お:"uo",か:"kh a",きゃ:"kh j a",きゅ:"kh j i\\",きょ:"kh j uo",き:"kh i",く:"kh i\\",け:"kh e",こ:"kh uo",さ:"s a",しゃ:"s\\ a",しゅ:"s\\ i\\",しぇ:"s\\ e",しょ:"s\\ uo",し:"s\\ i",す:"s i\\",せ:"s e",そ:"s uo",た:"th a",ちゃ:"ts\\h a",ちゅ:"ts\\h i\\",ちぇ:"ts\\h e",ちょ:"ts\\h uo",ち:"ts\\h i",つ:"tsh i\\",てぃ:"th i",て:"th e",と:"th uo",な:"n a",にゃ:"n j a",にゅ:"n j i\\",にょ:"n j uo",に:"n i",ぬ:"n i\\",ね:"n e",の:"n uo",は:"x a",ひゃ:"x j a",ひゅ:"x j i\\",ひょ:"x j uo",ひ:"x i",ふぁ:"f a",ふぃ:"f i",ふぇ:"f e",ふぉ:"f o",ふ:"x i\\",へ:"x e",ほ:"x uo",ま:"m a",みゃ:"m j a",みゅ:"m j i\\",みょ:"m j uo",み:"m i",む:"m i\\",め:"m e",も:"m uo",や:"j ia",ゆ:"j i\\",いぇ:"j e",よ:"j uo",ら:"l a",りゃ:"l j a",りゅ:"l j i\\",りょ:"l j uo",り:"l i",る:"l i\\",れ:"l e",ろ:"l uo",わ:"w a",を:"o",ん:":n",が鼻:"N a",が:"k a",ぎ鼻:"N i",ぎゃ:"k j a",ぎゅ:"k j i\\",ぎょ:"k j uo",ぎ:"k i",ぐ鼻:"N i\\",ぐ:"k i\\",げ鼻:"N e",げ:"k e",ご鼻:"N uo",ご:"k uo",ざ:"ts a",じゃ:"ts\\ a",じゅ:"ts\\ i\\",じぇ:"ts\\ e",じょ:"ts\\ uo",じ:"ts i",ず:"ts i\\",ぜ:"ts e",ぞ:"ts uo",だ:"t a",ぢゃ:"ts\\ a",ぢゅ:"ts\\ i\\",ぢょ:"ts\\ uo",ぢ:"ts i",づ:"ts i\\",でぃ:"t i",で:"t e",ど:"t uo",ば:"p a",びゃ:"p j a",びゅ:"p j i\\",びょ:"p j uo",び:"p i",ぶ:"p i\\",べ:"p e",ぼ:"p uo",ぱ:"ph a",ぴゃ:"ph j a",ぴゅ:"ph j i\\",ぴょ:"ph j uo",ぴ:"ph i",ぷ:"ph i\\",ぺ:"ph e",ぽ:"ph uo",っ:"cl"};function*Lu(t,e){e=e??$u;let n;for(n=0;n<t.length;n++){const s=t[n],i=t[n+1],r=e[s+i]||e[s];r!=null&&(yield r)}}const go=(t,e)=>Array.from(Lu(t,e)).join(" ");go.map=$u;go.gen=Lu;const{replacer:jr,replacerShort:_y,romaji:Mu}=Xp,Cy=new Map(Object.entries({e:"oa",er:"oa",ri:"i",me:"moa",nv:"nui",nve:"nue",lv:"rui",lve:"rue"})),Iy=_y([[/^([zcs]h?)i$/,(t,e)=>`${En.get(e)??e}u`],[/^([zcs]h?|[dtnlgkhry])ou$/,(t,e)=>`${En.get(e)??e}o`],[/^([zcs]h?|[dtnlgkhr])e$/,(t,e)=>`${En.get(e)??e}oa`],[/^([zcs]h?|[bpmfdtnlgkhryw])eng?$/,(t,e)=>`${En.get(e)??e}on`],[/^([bpmfdtnljqx])ian$/,(t,e)=>`${En.get(e)??e}ien`],[/^([yjqx])[uv](e|n|an)?$/,(t,e,n)=>`${En.get(e)??e}u${n||"i"}`],[/^yi/,"i"],[/^wu/,"u"]]),En=new Map(Object.entries({zh:"j",c:"ts",l:"r",r:"y",q:"ch",x:"sh"})),Pu=/(zh|ch|sh|[bpmfdtnljqxzcsgkhryw])?([ui]?ang?|eng?|ing?|i?ong|u?ai|i?ao|[uv]n|[ui]a|[eu]i|[oi]u|[iuv]e|uo|er|[aoeiuv])/g,ju={ā:"a1",á:"a2",ǎ:"a3",à:"a4",ō:"o1",ó:"o2",ǒ:"o3",ò:"o4",ē:"e1",é:"e2",ě:"e3",è:"e4",ī:"i1",í:"i2",ǐ:"i3",ì:"i4",ū:"u1",ú:"u2",ǔ:"u3",ù:"u4",ü:"v0",ǖ:"v1",ǘ:"v2",ǚ:"v3",ǜ:"v4",ń:"n2",ň:"n3","":"m2"},yo=jr([[Pu,(t,e="",n,s,i)=>{t=e+n;let r=Cy.get(t);return r!=null||(r=Iy(t),r!==t)?r:(r=En.get(e),r!=null&&(e=r),n.slice(-1)==="g"&&(n=n.slice(0,-1)),e+n)}]]),Oy=jr([...yo.map,...Mu.toHiragana.map]),Ty=jr([...yo.map,...Mu.toKatakana.map]),Ey=RegExp(Object.keys(ju).join("|"),"g"),Ay=t=>{let e="";return t=t.replace(Ey,n=>(n=ju[n],e=n[1],n[0])),t+e},Ny=jr([[/\S+/g,Ay]]),{parseFromString:$y}=DOMParser.prototype,{serializeToString:Ly}=XMLSerializer.prototype,My=new DOMParser,Py=new XMLSerializer,as={parse(t){return gt($y,My,t,"text/xml")},serialize(t){return gt(Ly,Py,t)},getTextNode(t){const e=t.firstChild;if(e!=null&&e===t.lastChild){const n=e.nodeType;if(n===Node.CDATA_SECTION_NODE||n===Node.TEXT_NODE)return e}return null},setText(t,e){const n=as.getTextNode(t);n!=null?n.data=e:t.textContent=e}};class bo{#e;#t;get data(){return this.#t}constructor(e){this.#e=e,this.#t=as.parse(e)}reset(){this.#t=as.parse(this.#e)}getLyrics(){return Array.from(this,e=>e.textContent??"")}setLyrics(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;as.setText(s,r)}}setPhonemes(e){}export(){return as.serialize(this.#t)}}class jy extends bo{*[Symbol.iterator](){yield*super.data.querySelectorAll("lyric>text")}}class gr{static parse(e){return JSON.parse(String(e).replace(/\0+$/,""))}#e;#t;constructor(e){this.#e=e,this.#t=gr.parse(e)}reset(){this.#t=gr.parse(this.#e)}*[Symbol.iterator](){const e=this.#t;for(const n of e.tracks)yield*n.mainGroup.notes;for(const n of e.library)yield*n.notes}getLyrics(){return Array.from(this,e=>e.lyrics)}setLyrics(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;s.lyrics=r}}setPhonemes(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;s.phonemes=r}}export(){return JSON.stringify(this.#t)+"\0"}}class Ry{#e;#t;constructor(e){this.#e=e,this.#t=us.parse(e)}reset(){return this.#t=us.parse(this.#e)}*[Symbol.iterator](){const e=this.#t;for(const n of e.voice_parts)yield*n.notes}getLyrics(){return Array.from(this,e=>e.lyric)}setLyrics(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;s.lyric=r}}setPhonemes(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;s.phoneme_overrides=[{index:0,phoneme:r}]}}export(){return us.stringify(this.#t)}}class Dy extends bo{#e;#t;constructor(e){super(e);const{tagName:n}=super.data.documentElement;switch(n){case"vsq4":this.#e="note>y",this.#t="note>p";break;case"vsq3":this.#e="note>lyric",this.#t="note>phnms";break;default:throw new TypeError(`Unknown vsqx file: <${n}>`)}}*[Symbol.iterator](e=!1){yield*super.data.querySelectorAll(e?this.#t:this.#e)}setPhonemes(e){const n=e[Symbol.iterator]();for(const s of this.data.querySelectorAll(this.#t)){const{done:i,value:r}=n.next();if(i)return;as.setText(s,r)}}}class Vy extends bo{*[Symbol.iterator](){yield*super.data.querySelectorAll("Score:root>Notes>Note")}getLyrics(){return Array.from(this,e=>e.getAttribute("lyric")??"")}setLyrics(e){const n=e[Symbol.iterator]();for(const s of this){const{done:i,value:r}=n.next();if(i)return;s.setAttribute("lyric",r)}}}const Fy=t=>{if(t.name==="score.xml")return Vy;switch(gi(t)){case"musicxml":return jy;case"svp":return gr;case"ustx":return Ry;case"vsqx":return Dy}},Ru={__proto__:null,debugPinyin:t=>t.replace(Pu,(e,n="",s)=>`[${n},${s}]`),pinyinToRomaji:yo,pinyinToHiragana:Oy,pinyinToKatakana:Ty,romajiToHiragana:ds.toHiragana,romajiToKatakana:ds.toKatakana,toRomaji:ds.from,toHiragana:Ma,toKatakana:eu,toFullKana:tu,toHalfKana:nu,hiraganaToChinesePronounce:t=>go(Ma(t))},By=new Set(["hiraganaToChinesePronounce"]),zy=async()=>{const{pinyinUtil:t}=await import("./pinyinUtil-BfN_Hzj4.js");return Object.assign(Ru,{hanziToPinyinTone:e=>t.getPinyin(e," ",!0,!1),hanziToPinyinNumTone:e=>Ny(t.getPinyin(e," ",!0,!1)),hanziToPinyin:e=>t.getPinyin(e," ",!1,!1)}),t};let Vl;const Uy=xs({name:"Lyric Preprocessor",data(){return{file:null,length:0,lyrics:"",output:"",phonemesMode:!1}},setup(t,e){return Vl??=zy(),{pinyinjs:Vl,inst:Te(null)}},methods:{async loadFile(t,e){try{this.file=e;const n=new t(await e.text());this.inst=n;const s=n.getLyrics();this.length=s.length,this.lyrics=s.join(`
`)}catch(n){throw kt.error("打开文件失败"),this.close(),n}},async loadVvproj(t){try{const e=await new Response(t).json();let n="",s="";const{audioKeys:i,audioItems:r}=e.talk;for(const a of i){const o=r[a];n+=`${o.text}`;for(const{moras:c,pauseMora:l}of o.query.accentPhrases){for(const u of c)s+=`${u.text}`;s+=`${l?.text??" "}`}n+=`
`,s+=`
`}this.length=i.length,this.lyrics=n,this.output=s}catch(e){throw kt.error("打开文件失败"),this.close(),e}},handleChange(t){for(const e of t){const n=Fy(e);if(n!=null)return this.loadFile(n,e);switch(gi(e)){case"vvproj":return this.loadVvproj(e)}}kt.warning("目前仅支持 musicxml 或 svp 文件")},close(){this.file=null,this.inst=null,this.length=0,this.lyrics="",this.output=""},reset(){const{file:t,inst:e}=this;if(t==null||e==null)return;e.reset();const n=e.getLyrics();this.length=n.length,this.lyrics=n.join(`
`)},export(){const{file:t,inst:e}=this;if(t==null||e==null)return;const n=(this.output||this.lyrics).split(`
`);this.phonemesMode?e.setPhonemes(n):e.setLyrics(n),Zs([e.export()],t.name.replace(/(?=(?:\.\w*)?$)/,"_export"))},reverseCopy(){this.lyrics=this.output},handleReplace(t){const e=Ru[t];e!=null&&(this.phonemesMode=By.has(t),this.output=this.lyrics.split(`
`).map(e,this).join(`
`))},handleSubmit(t){t.preventDefault(),t.stopPropagation();const e=t.submitter?.dataset.name;e!=null&&this.handleReplace(e)}},render(){const t=this;return k(ki,{gutter:5},()=>[k(Ut,{xs:24,lg:12},()=>k(dd,{},()=>[t.file==null?k($r,{global:!0,onChange:t.handleChange}):k(yt,{icon:"md-document",title:`${t.file.name}[${t.length}]`},{extra:()=>k(me,{onClick:t.close},()=>k(st,{type:"md-close"})),default:()=>[k(me,{onClick:t.reset},()=>"重置"),k(me,{style:{float:"right"},onClick:t.export},()=>"导出")]}),k(yt,{title:"转换",style:{"margin-top":"20px"}},{extra:()=>k(me,{onClick:t.reverseCopy},()=>"←复制"),default:()=>k("form",{action:"about:blank",onSubmit:t.handleSubmit},[k(zc,{modelValue:t.phonemesMode,"onUpdate:modelValue"(e){t.phonemesMode=e}},()=>"音素模式"),k("br"),k(ht,{style:{"margin-top":"10px"}},()=>[k(me,{"html-type":"submit","data-name":"pinyinToRomaji"},()=>"拼音→罗马字"),k(me,{"html-type":"submit","data-name":"pinyinToHiragana"},()=>"拼音→平假名"),k(me,{"html-type":"submit","data-name":"pinyinToKatakana"},()=>"拼音→片假名")]),k("br"),k(ht,{style:{"margin-top":"10px"}},()=>[k(me,{"html-type":"submit","data-name":"romajiToHiragana"},()=>"罗马字→平假名"),k(me,{"html-type":"submit","data-name":"toHiragana"},()=>"片假名→平假名")]),k("br"),k(ht,{style:{"margin-top":"10px"}},()=>[k(me,{"html-type":"submit","data-name":"romajiToKatakana"},()=>"罗马字→片假名"),k(me,{"html-type":"submit","data-name":"toKatakana"},()=>"平假名→片假名")]),k("br"),k(ht,{style:{"margin-top":"10px"}},()=>[k(me,{"html-type":"submit","data-name":"toRomaji"},()=>"假名→罗马字")]),k("br"),k(ht,{style:{"margin-top":"10px"}},()=>[k(me,{"html-type":"submit","data-name":"toFullKana"},()=>"半角片假名→片假名"),k(me,{"html-type":"submit","data-name":"toHalfKana"},()=>"片假名→半角片假名")]),k("br"),k(os,{promise:t.pinyinjs},{empty:()=>null,default:(e,n)=>[k(ht,{style:{"margin-top":"10px"}},()=>{const s=e!=="fulfilled",i=e==="pending",r={disabled:s,"html-type":"submit"};return[k(me,{...r,loading:i,"data-name":"hanziToPinyinTone"},()=>"汉字→拼音(带声调)"),k(me,{...r,"data-name":"hanziToPinyinNumTone"},()=>"汉字→拼音(数字声调)"),k(me,{...r,"data-name":"hanziToPinyin"},()=>"汉字→拼音")]}),"(",k("a",{href:"https://github.com/sxei/pinyinjs/",target:"_blank"},"pinyinjs"),")",k("br")]}),k(me,{style:{"margin-top":"10px"},"html-type":"submit","data-name":"hiraganaToChinesePronounce"},()=>"假名→汉语音素(svp)"),"(",k("a",{href:"https://www.nicovideo.jp/watch/sm38322727",target:"_blank"},"sm38322727"),")",k("br")])})])),k(Ut,{xs:12,lg:6},()=>[k(gs,{type:"textarea",autosize:{minRows:20,maxRows:1/0},placeholder:"输入歌词，或者导入文件",modelValue:t.lyrics,"onUpdate:modelValue"(e){t.lyrics=e}})]),k(Ut,{xs:12,lg:6},()=>[k(gs,{type:"textarea",autosize:{minRows:20,maxRows:1/0},placeholder:"结果显示在这里，或者导出文件",modelValue:t.output,"onUpdate:modelValue"(e){t.output=e}})])])}}),Wy=(t=location.hash)=>{switch(t){case"":return sy;case"#syncer-legacy":return Nu;case"#syncer":return Sy;case"#lyric":return Uy}return null};export{Uy as Lyric,sy as Main,Sy as Syncer,Wy as getModule};
